<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <menuitem icon="terp-stock" id="menu_stock_root" name="Warehouse" sequence="2"/>
        <menuitem id="menu_stock_warehouse_mgmt" name="Warehouse Management" parent="menu_stock_root" sequence="1"/>
        <menuitem id="menu_stock_product" name="Product" parent="menu_stock_root" sequence="3"/>
        <menuitem action="product.product_normal_action" id="menu_stock_products_menu" parent="menu_stock_product" sequence="1"/>
        <menuitem id="menu_stock_configuration" name="Configuration" parent="menu_stock_root" sequence="6"/>
        <menuitem id="menu_stock_inventory_control" name="Inventory Control" parent="menu_stock_root" sequence="2"/>

        <record id="stock_inventory_line_tree" model="ir.ui.view">
            <field name="name">stock.inventory.line.tree</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Stock Inventory Lines">
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="prod_lot_id"/>
                    <button name="%(stock.action_view_stock_inventory_line_split)d"
                            string="Split inventory lines"
                            type="action" icon="gtk-justify-fill"/>                    
                    <field name="location_id"/>
                </tree>
            </field>
        </record>
        <record id="view_inventory_line_form" model="ir.ui.view">
            <field name="name">stock.inventory.line.form</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Stock Inventory Lines">
                    <field context="location=location_id,uom=product_uom" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom)" select="1" domain="[('type','&lt;&gt;','service')]"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="prod_lot_id"/>
                    <field colspan="4" domain="[('usage','=','internal')]" name="location_id" select="1"/>                  
                        <button name="%(stock.action_view_stock_inventory_line_split)d"
                            string="Split inventory lines"
                            type="action" icon="gtk-justify-fill"/>
                </form>
            </field>
        </record>

         <record id="view_inventory_filter" model="ir.ui.view">
            <field name="name">stock.inventory.filter</field>
            <field name="model">stock.inventory</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Inventory">
                    <group col="10" colspan="4">
                        <field name="name" select="1" />
                        <field name="date" select="1" />
                        <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                    </group>
                </search>

            </field>
        </record>

        <record id="view_inventory_tree" model="ir.ui.view">
            <field name="name">stock.inventory.tree</field>
            <field name="model">stock.inventory</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Lot Inventory" colors="grey:state in ('done', 'cancel')">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>

        </record>
        <record id="view_inventory_form" model="ir.ui.view">
            <field name="name">stock.inventory.form</field>
            <field name="model">stock.inventory</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Lot Inventory">
                    <field name="name" select="1"/>
                    <field name="date" select="1"/>
                    <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                    <notebook colspan="4">
                    <page string="General Informations">
                        <field colspan="4" name="inventory_line_id" nolabel="1" widget="one2many_list">
                            <tree string="Inventory Lines" editable="bottom">
                                <field context="location=location_id,uom=product_uom" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom)" select="1" domain="[('type','&lt;&gt;','service')]"/>
                                <field name="product_qty"/>
                                <field name="product_uom"/>
                                <field name="prod_lot_id"/>
                                <field colspan="4" domain="[('usage','=','internal')]" name="location_id" select="1"/>
                                <field name="state" invisible="1"/>
                                <button name="%(stock.action_view_stock_inventory_line_split)d"
                                    string="Split inventory lines"
                                    type="action" icon="gtk-justify-fill" states="draft"/>
                            </tree>
                            <form string="Inventory Lines">
                                <field colspan="4" context="location=location_id,uom=product_uom" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom)" select="1" domain="[('type','&lt;&gt;','service')]"/>
                                <field name="product_qty"/>
                                <field name="product_uom"/>
                                <field  domain="[('usage','=','internal')]" name="location_id" select="1"/>
                                <field name="prod_lot_id"/>
                                <group colspan="2" col="3">
                                    <button name="%(stock.action_view_stock_inventory_line_split)d"
                                        string="Split inventory lines"
                                        type="action" icon="gtk-justify-fill"/>
                                </group>
                            </form>
                        </field>
                    </page><page string="Posted Inventory">
                        <field colspan="4" name="move_ids" nolabel="1"/>
                    </page>
                    </notebook>
                    <field name="state" select="1"/>
                    <group col="4" colspan="2">
                        <button name="action_done" states="draft" string="Confirm Inventory" type="object" icon="gtk-apply"/>
                        <button name="action_cancel" states="cancel" string="Set to Draft" type="object" icon="gtk-cancel"/>
                        <button name="action_cancel_inventary" states="draft" string="Cancel Inventory" type="object" icon="gtk-cancel"/>
                    </group>

                </form>
            </field>
        </record>
        <record id="action_inventory_form" model="ir.actions.act_window">
            <field name="name">Periodical Inventory</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_inventory_tree"/>
            <field name="context">{'full':'1'}</field>
            <field name="search_view_id" ref="view_inventory_filter" />
        </record>
        <menuitem action="action_inventory_form" id="menu_action_inventory_form" parent="menu_stock_inventory_control" sequence="30"/>

        <record id="action_inventory_form_draft" model="ir.actions.act_window">
            <field name="name">Draft Periodical Inventories</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','=','draft')]</field>
            <field name="filter" eval="True"/>
        </record>

        <record id="view_tracking_form" model="ir.ui.view">
            <field name="name">stock.tracking.form</field>
            <field name="model">stock.tracking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Tracking/Serial">
                    <field name="name" select="1"/>
                    <field name="serial" select="1"/>
                    <field name="date" select="1"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>
        <record id="view_tracking_tree" model="ir.ui.view">
            <field name="name">stock.tracking.tree</field>
            <field name="model">stock.tracking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Tracking/Serial">
                    <field name="name"/>
                    <field name="serial"/>
                    <field name="date"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>
        <record id="action_tracking_form" model="ir.actions.act_window">
            <field name="name">Tracking Lots</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.tracking</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_tracking_tree"/>
        </record>
        <menuitem id="menu_traceability" name="Traceability" parent="menu_stock_root" sequence="4"/>
        <menuitem action="action_tracking_form" id="menu_action_tracking_form" parent="menu_traceability"/>

        <record id="lot_line_tree" model="ir.ui.view">
            <field name="name">stock.tracking.tree</field>
            <field name="model">stock.tracking</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree colors="grey:not active" string="Tracking Number">
                    <field name="name" select="1"/>
                    <field name="serial" select="1"/>
                    <field name="date" select="1"/>
                </tree>
            </field>
        </record>

        <record id="view_production_lot_revision_form" model="ir.ui.view">
            <field name="name">stock.production.lot.revision.form</field>
            <field name="model">stock.production.lot.revision</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Production Lot Revisions">
                    <field colspan="4" name="name"/>
                    <field colspan="2" name="indice"/>
                    <field colspan="2" name="date"/>
                    <newline/>
                    <field name="author_id" readonly="1"/>
                    <newline/>
                    <field name="description"/>
                </form>
            </field>
        </record>
        <record id="view_production_lot_revision_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.revision.tree</field>
            <field name="model">stock.production.lot.revision</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Lot Revisions">
                    <field name="indice"/>
                    <field name="author_id"/>
                    <field name="date"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="view_production_lot_form" model="ir.ui.view">
            <field name="name">stock.production.lot.form</field>
            <field name="model">stock.production.lot</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Production Lot">
                    <notebook colspan="4">
                        <page string="Production Lot">
                            <field name="name" select="1"/>
                            <field name="ref" select="2"/>
                            <field name="prefix" select="1"/>
                            <field name="product_id" select="1"/>
                            <field name="stock_available"/>
                            <field name="date" select="2"/>
                            <field colspan="4" name="revisions" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>
        <record id="view_production_lot_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.tree</field>
            <field name="model">stock.production.lot</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Lot">
                    <field name="prefix" />
                    <field name="name"/>
                    <field name="ref"/>
                    <field name="product_id"/>
                    <field name="stock_available"/>
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="search_product_lot_filter">
            <field name="name">Production Lots Filter</field>
            <field name="model">stock.production.lot</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Product Lots Filter">
                    <group col="10" colspan="4">
                        <filter icon="terp-stock" string="Available" domain="[('stock_available', '&gt;', 0)]" help="Available Product Lots" default="1" />
                        <separator orientation="vertical"/>
                        <field name="prefix" select="1"/>
                        <field name="name" select="1"/>
                        <field name="ref" select="1"/>
                        <field name="product_id" select="1"/>
                        <field name="date" select="1"/>
                    </group>
                    <newline/>
                    <group expand="1" string="Group By..." colspan="4" col="8">
                        <filter string="Product" icon="terp-stock" domain="[]" context="{'group_by':'product_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_production_lot_form" model="ir.actions.act_window">
            <field name="name">Production Lots</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.production.lot</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_production_lot_tree"/>
            <field name="search_view_id" ref="search_product_lot_filter" />
            <field name="context">{'full':'1'}</field>
        </record>
        <menuitem action="action_production_lot_form" id="menu_action_production_lot_form" parent="menu_traceability"/>

        #
        # Lot composition (history)
        #
        <record id="stock_move_tree" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids</field>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel');black:state not in ('cancel')" string="Moves">
                    <field name="product_id" select="1"/>
                    <field name="product_qty" select="1"/>
                    <field name="product_uom" select="1" string="UOM"/>
                    <field name="prodlot_id" select="1"/>
                    <field name="product_packaging" domain="[('product_id','=',product_id)]"/>
                    <field name="picking_id"/>
                    <field name="location_id" select="1"/>
                    <field name="location_dest_id" select="1"/>
                    <field name="date" select="1"/>
                    <field name="date_planned" select="1" string="Date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="stock_move_tree2" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids2</field>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel');black:state not in ('cancel')" string="Moves">
                    <field name="product_id" select="1"/>
                    <field name="product_qty" select="1"/>
                    <field name="product_uom" select="1" string="UOM"/>
                    <field name="prodlot_id" select="1"/>
                    <field name="product_packaging" domain="[('product_id','=',product_id)]"/>
                    <field name="picking_id"/>
                    <field name="location_id" select="1"/>
                    <field name="location_dest_id" select="1"/>
                    <field name="date" select="1"/>
                    <field name="date_planned" select="1" string="Date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <wizard
            id="action_lot2"
            model="stock.production.lot"
            name="stock.traceability.lot.upstream"
            string="Upstream traceability"/>

        <wizard
            id="action_lot4"
            model="stock.production.lot"
            name="stock.traceability.lot.downstream"
            string="Downstream traceability"/>

        <wizard
            id="action4"
            model="stock.tracking"
            name="stock.traceability.upstream"
            string="Upstream traceability"/>

        <wizard
            id="action2"
            model="stock.tracking"
            name="stock.traceability.downstream"
            string="Downstream traceability"/>

        <record id="action3" model="ir.actions.act_window">
            <field name="name">Downstream traceability</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="domain">[('id','in',active_ids)]</field>
            <field name="view_type">tree</field>
            <field eval="stock_move_tree2" name="view_id"/>
        </record>
        <record id="ir_move_traceability_upstream" model="ir.values">
            <field eval="'tree_but_action'" name="key2"/>
            <field eval="'stock.move'" name="model"/>
            <field name="name">Downstream traceability</field>
            <field eval="'ir.actions.act_window,'+str(action3)" name="value"/>
            <field eval="True" name="object"/>
        </record>
        <record id="action5" model="ir.actions.act_window">
            <field name="name">Upstream traceability</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="domain">[('id','in',active_ids)]</field>
            <field name="view_type">tree</field>
            <field eval="stock_move_tree" name="view_id"/>
        </record>
        <record id="ir_move_traceability_downstream" model="ir.values">
            <field eval="'tree_but_action'" name="key2"/>
            <field eval="'stock.move'" name="model"/>
            <field name="name">Upstream traceability</field>
            <field eval="'ir.actions.act_window,'+str(action5)" name="value"/>
            <field eval="True" name="object"/>
        </record>

        <record id="view_location_form" model="ir.ui.view">
            <field name="name">stock.location.form</field>
            <field name="model">stock.location</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Stock location">
                    <field name="name" select="1"/>
                    <field name="active" select="2"/>
                    <field name="usage" select="1"/>
                    <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                    <field name="account_id" select="1"/>
                    <field name="location_id"/>
                    <field name="address_id" context="{'contact_display':'partner'}"/>
                    <field name="icon"/>
                    <newline/>
                    <group col="2" colspan="2">
                        <separator string="Chained Locations" colspan="2"/>
                        <field name="chained_location_type"/>
                        <field name="chained_location_id"/>
                        <field name="chained_auto_packing"/>
                        <field name="chained_delay"/>
                    </group>
                    <group col="2" colspan="2">
                        <separator string="Localization" colspan="2"/>
                        <field name="posx"/>
                        <field name="posy"/>
                        <field name="posz"/>
                    </group>
                    <separator string="Additional Information" colspan="4"/>
                    <field colspan="4" name="comment" nolabel="1"/>
                </form>
            </field>
        </record>
        
        <record id="view_location_tree2" model="ir.ui.view">
            <field name="name">stock.location.tree</field>
            <field name="model">stock.location</field>
            <field name="type">tree</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <tree string="Stock location" colors="blue:usage=='view';darkred:usage=='internal';black:usage not in ('view','internal')">
                    <field name="complete_name"/>
                    <field name="usage"/>
                    <field name="stock_real" invisible="'product_id' not in context"/>
                    <field name="stock_virtual" invisible="'product_id' not in context"/>
                </tree>
            </field>
        </record>

        <record id="action_location_form" model="ir.actions.act_window">
            <field name="name">Locations</field>
            <field name="res_model">stock.location</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_location_tree2"/>
            <field name="context">{'full':'1'}</field>
        </record>
        <menuitem action="action_location_form" id="menu_action_location_form" parent="menu_stock_configuration" />

        <record id="view_location_tree" model="ir.ui.view">
            <field name="name">stock.location.tree</field>
            <field name="model">stock.location</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree toolbar="1">
                    <field icon="icon" name="name"/>
                </tree>
            </field>
        </record>
        <record id="action_location_tree" model="ir.actions.act_window">
            <field name="name">Location Structure</field>
            <field name="res_model">stock.location</field>
            <field name="type">ir.actions.act_window</field>
            <field name="domain">[('location_id','=',False)]</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="view_location_tree"/>
        </record>
        <menuitem action="action_location_tree" id="menu_action_location_tree" parent="menu_stock_inventory_control" sequence="20"/>

        <record id="view_warehouse" model="ir.ui.view">
            <field name="name">stock.warehouse</field>
            <field name="model">stock.warehouse</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Warehouse">
                    <field colspan="4" name="name" select="1"/>
                    <field name="lot_input_id"/>
                    <field name="lot_stock_id"/>
                    <field name="lot_output_id"/>
                    <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                    <newline/>
                    <field name="partner_address_id" context="{'contact_display':'partner'}"/>
                </form>
            </field>
        </record>
        <record id="view_warehouse_tree" model="ir.ui.view">
            <field name="name">stock.warehouse.tree</field>
            <field name="model">stock.warehouse</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Warehouse">
                    <field name="name"/>
                    <field name="lot_input_id"/>
                    <field name="lot_stock_id"/>
                    <field name="lot_output_id"/>
                    <field name="partner_address_id" context="{'contact_display':'partner'}"/>
                </tree>
            </field>
        </record>
        <record id="action_warehouse_form" model="ir.actions.act_window">
            <field name="name">Warehouses</field>
            <field name="res_model">stock.warehouse</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_warehouse_tree"/>
        </record>
        <menuitem action="action_warehouse_form" id="menu_action_warehouse_form" parent="menu_stock_configuration"/>

        <record id="stock_picking_move_wizard_form" model="ir.ui.view">
            <field name="name">stock.picking.move.wizard.form</field>
            <field name="model">stock.picking.move.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Entry Lines">
                    <field name="address_id" invisible="True" context="{'contact_display':'partner'}"/>
                    <field name="picking_id" invisible="True"/>
                    <field domain="[('picking_id','&lt;&gt;',picking_id),('state','in',['confirmed','assigned']),('picking_id.address_id','=',address_id)]" name="move_ids" nolabel="1"/><newline/>
                    <group colspan="4">
                        <button special="cancel" string="Cancel" icon="gtk-cancel"/>
                        <button name="action_move" string="Add" type="object" icon="gtk-add"/>
                    </group>
                </form>
               </field>
        </record>
        <record id="act_stock_picking_move_wizard" model="ir.actions.act_window">
            <field name="name">Fill From Unreceived Products</field>
            <field name="res_model">stock.picking.move.wizard</field>
            <field name="src_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="auto_refresh" eval="1"/>
            <field name="target">new</field>
            <field name="context">{'action_id': active_id}</field>
        </record>

        <record model="ir.ui.view" id="stock_picking_calendar">
            <field name="name">stock.picking.calendar</field>
            <field name="model">stock.picking</field>
            <field name="type">calendar</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar string="Calendar View" date_start="min_date" date_stop="max_date" color="address_id">
                    <field name="origin"/>
                    <field name="type"/>
                    <field name="address_id"/>
                </calendar>
            </field>
        </record>
        <record id="vpicktree" model="ir.ui.view">
            <field name="name">stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('cancel', 'done');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="backorder_id"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="state"/>
                    <button name="%(partial_picking)d" states="assigned" string="Validate" type="action" icon="gtk-go-forward" help="Validate Picking"/>
                    <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel" help="Cancel" confirm="This operation will cancel the picking.   Do you want to continue?"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_form" model="ir.ui.view">
            <field name="name">stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Picking list">
                    <group colspan="4" col="6">
                        <field name="name" select="1" readonly="1"/>
                        <field name="address_id" select="1" context="{'contact_display' : 'partner'}"/>
                        <field name="origin" select="2"/>
                        <field name="backorder_id" select="2" readonly="1"/>
                        <field name="date" />
                        <field name="min_date" select="1"/>
                        <field name="type"/>
                        <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                        <button name="%(make_picking)d" 
                            states="confirmed,assigned" 
                            string="Make Picking" 
                            type="action" 
                            icon="gtk-go-forward"
                            help="Make Picking" colspan="2"/>
                        <button name="%(return_picking)d" 
                            states="done" 
                            string="Return Picking" 
                            type="action"
                            icon="gtk-go-back" 
                            help="Return Picking" colspan="2"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}">
                                <tree colors="grey:state in ('cancel');black:state not in ('cancel')" string="Stock Moves">
                                    <field name="name" string="Move Name"/>
                                    <field name="product_id"/>
                                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" string="UOM"/>
                                    <field name="picking_id" select="1"/>
                                    <field name="prodlot_id"/>
                                    <field name="location_id"/>
                                    <field name="location_dest_id"/>
                                    <field name="date_planned"/>
                                    <field name="state"/>
                                    <button
                                        name="%(stock.track_line)d"
                                        string="Split in production lots"
                                           type="action" icon="gtk-justify-fill"
                                           states="draft,waiting,confirmed,assigned" />
                                       <button
                                           name="%(stock.move_scrap)d"
                                           string="D" type="action"
                                           icon="gtk-convert"
                                           states="draft,waiting,confirmed,assigned" />
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                        <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" select="1" domain="[('usage','=','internal')]"/>
                                            <field name="location_dest_id" select="1" domain="[('usage','=','internal')]"/>
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id)" select="1"/>
                                            <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field name="product_uom" select="1"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name" select="1"/>
                                            <field invisible="1" name="date"/>
                                            <field name="date_planned"/>
                                            <field name="address_id" select="1" context="{'contact_display':'partner'}"/>
                                            <field groups="base.group_extended" name="product_packaging"/>
                                            <field name="prodlot_id" select="2"
                                                context="{'location_id':location_id, 'product_id':product_id}"
                                                domain="[('product_id','=?',product_id)]"
                                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id" select="2"/>
                                            <newline/>
                                            <label/>
                                            <button name="%(track_line)d" string="Split in production lots" type="action" icon="gtk-justify-fill"/>
                                            <button name="%(move_scrap)d" string="Scrap Move Line" type="action" icon="gtk-justify-fill"/>
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state" select="1"/>
                                            <group>
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object" icon="gtk-no"/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object" icon="gtk-cancel"/>
                                            </group>
                                        </page>
                                        <page string="Return Picking History">
                                            <field name="move_stock_return_history" nolabel="1"/>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="6"/>
                                <button name="%(move_split)d" string="Split Entry Lines in two" type="action" icon="gtk-justify-fill"/>
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Confirm (Do Not Process Now)" type="object" icon="gtk-apply"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-media-play"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" icon="gtk-find"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                <button name="%(partial_picking)d" states="assigned" string="Validate" type="action" icon="gtk-apply"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Other info" groups="base.group_extended">
                            <field name="active" select="2"/>
                            <field name="auto_picking"/>
                            <field name="invoice_state" select="2"/>
                            <field name="date_done" select="2"/>
                            <newline/>
                            <field name="move_type"/>
                        </page>
                    </notebook>                    
                </form>
            </field>
        </record>

        <record id="view_stock_picking_filter" model="ir.ui.view">
            <field name="name">stock.picking.list.select</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Stock Picking">
                    <group col="10" colspan="4">
                        <filter icon="terp-stock" string="Available" domain="[('state','=','assigned')]" help="Available Pickings" default="1" />
                        <filter icon="terp-stock" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Pickings"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-stock" string="Back Order" domain="[('backorder_id', '!=', False)]" help="Has Back Order"  />
                        <separator orientation="vertical"/>
                        <field name="location_id" select="1"/>
                        <field name="location_dest_id" select="1"/>
                        <field name="name" select="1"/>
                        <field name="address_id" select="1"/>
                    </group>  
                    <newline/>                   
                    <group expand="1" string="Group By..." colspan="4" col="8">
                        <filter string="Partner" icon="terp-stock" domain="[]" context="{'group_by':'address_id'}"/>
                        <filter string="State" icon="terp-stock" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Date" icon="terp-stock" domain="[]"  context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="view_picking_delivery_tree" model="ir.ui.view">
            <field name="name">stock.picking.delivery.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('cancel', 'done');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="address_id" select="1"/>
                    <field name="backorder_id"/>
                    <field name="origin"/>
                    <field name="date" select="1"/>
                    <field name="min_date" select="1"/>
                    <field name="state" select="1"/>
                    <button name="%(partial_picking)d" states="assigned" string="Validate" type="action" icon="gtk-go-forward" help="Validate Delivery"/>
                    <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel" help="Cancel" confirm="This operation will cancel the delivery.    Do you want to continue?"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_delivery_form" model="ir.ui.view">
            <field name="name">stock.picking.delivery.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Picking list">
                    <group col="6" colspan="4">
                        <field name="name" select="1" readonly="1"/>
                        <field name="address_id" select="1"/>
                        <field name="origin" select="2"/>
                        <field name="backorder_id" select="2" readonly="1"/>
                        <field name="date" />
                        <field name="min_date" select="1"/>
                        <field name="type"/>
                        <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                        <button name="%(make_picking)d" 
                                states="assigned" 
                                string="Make Picking" 
                                type="action" 
                                icon="gtk-go-forward" 
                                help="Make Picking" colspan="2"/>
                        <button name="%(return_picking)d" 
                                states="done" 
                                string="Return Picking" 
                                type="action" 
                                icon="gtk-go-back" 
                                help="Return Picking" colspan="2"/>
                    </group>
                        <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}">
                                <tree colors="grey:state in ('cancel');black:state not in ('cancel')" string="Stock Moves">
                                    <field name="name" string="Move Name"/>
                                    <field name="product_id"/>
                                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" string="UOM"/>
                                    <field name="picking_id" select="1"/>
                                    <field name="prodlot_id"/>
                                    <field name="location_id"/>
                                    <field name="location_dest_id"/>
                                    <field name="date_planned"/>
                                    <field name="state"/>
                                    <button
                                           name="%(stock.track_line)d"
                                           string="Split in production lots"
                                           type="action" icon="gtk-justify-fill"
                                           states="draft,waiting,confirmed,assigned" />
                                       <button
                                           name="%(stock.move_scrap)d"
                                           string="D" type="action"
                                           icon="gtk-convert"
                                           states="draft,waiting,confirmed,assigned" />
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                        <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" select="1" domain="[('usage','=','internal')]"/>
                                            <field name="location_dest_id" select="1" domain="[('usage','&lt;&gt;','view')]"/>
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id)" select="1"/>
                                            <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field name="product_uom" select="1"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name" select="1"/>
                                            <field invisible="1" name="date"/>
                                            <field name="date_planned"/>
                                            <field groups="base.group_extended" name="product_packaging"/>
                                            <field name="prodlot_id" select="2"
                                                context="{'location_id':location_id, 'product_id':product_id}"
                                                domain="[('product_id','=?',product_id)]"
                                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id" select="1"/>
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state" select="1"/>
                                            <group>
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object" icon="gtk-find"/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object" icon="gtk-cancel"/>
                                            </group>
                                        </page>
                                        <page string="Return Picking History">
                                            <field name="move_stock_return_history" nolabel="1"/>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="6"/>
                                <button name="%(move_split)d" string="Split in Two" type="action" states="assigned,confirmed,draft,auto" icon="gtk-justify-fill"/>
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object" icon="gtk-ok"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-media-play"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" icon="gtk-find"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                <button name="%(partial_picking)d" states="assigned" string="Products Sent" type="action" icon="gtk-go-forward"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Other info" groups="base.group_extended">
                            <field name="auto_picking"/>
                            <field name="active" select="2"/>
                            <newline/>
                            <field name="date" select="1"/>
                            <field name="date_done" select="2"/>
                            <field name="move_type"/>
                        </page>
                    </notebook>                    
                </form>
            </field>
        </record>

       <record id="view_stock_delivery_filter" model="ir.ui.view">
            <field name="name">stock.view_stock_delivery_filter.list.select</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Stock Delivery">
                    <group col="10" colspan="4">
                        <filter icon="terp-stock" string="Available" domain="[('state','=','assigned')]" help="Assigned Orders" default="1"/>
                        <filter icon="terp-stock" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Orders"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-stock" string="Back Order" domain="[('backorder_id','!=',False)]" help="Back Order"/>
                        <separator orientation="vertical"/>
                        <field name="name" select="1"/>
                        <field name="address_id" select="1"/>
                        <field name="origin" select="1"/>
                    </group> 
                    <newline/>                    
                    <group expand="1" string="Group By..." colspan="4" col="10">
                        <filter string="Partner" icon="terp-stock" domain="[]"  context="{'group_by':'address_id'}"/>
                        <filter string="State" icon="terp-stock" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Order Date" icon="terp-stock" domain="[]" context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_picking_tree_delivery" model="ir.actions.act_window">
            <field name="name">Delivery Orders</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','delivery')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
            <field name="search_view_id" ref="view_stock_delivery_filter"/>
        </record>
        <record id="action_picking_tree_delivery_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_delivery_tree"/>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_delivery_form"/>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2_calendar" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <menuitem action="action_picking_tree_delivery" groups="base.group_extended" id="menu_action_picking_tree_delivery" parent="menu_stock_warehouse_mgmt" sequence="20"/>

        #
        # Sending Products
        #

        <record id="view_picking_out_tree" model="ir.ui.view">
            <field name="name">stock.picking.out.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('cancel', 'done');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="address_id"/>
                    <field name="backorder_id"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="invoice_state"/>
                    <field name="state"/>
                    <button name="%(partial_picking)d" states="assigned" string="Validate" type="action" icon="gtk-go-forward" help="Validate Picking"/>
                    <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel" help="Cancel" confirm="This operation will cancel the picking.    Do you want to continue?"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_out_form" model="ir.ui.view">
            <field name="name">stock.picking.out.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Picking list">
                    <group col="6" colspan="4">
                        <field name="address_id" select="2"/>
                        <field name="type"/>
                        <field name="min_date" select="2"/>
                        <field name="name" select="1" readonly="1"/>
                        <field name="invoice_state"/>
                        <field name="backorder_id" select="2" readonly="1"/>
                        <field name="origin" select="2" readonly="1"/>
                        <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                        <button name="%(make_picking)d" 
                                states="assigned" 
                                string="Make Picking" 
                                type="action" 
                                icon="gtk-go-forward" 
                                help="Make Picking" colspan="2"/>
                        <button name="%(return_picking)d" 
                                states="done" 
                                string="Return Picking" 
                                type="action" 
                                icon="gtk-go-back" 
                                help="Return Picking" colspan="2"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}">
                                <tree colors="grey:state in ('cancel');black:state not in ('cancel')" string="Stock Moves">
                                    <field name="name" string="Move Name"/>
                                    <field name="product_id"/>
                                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" string="UOM"/>
                                    <field name="picking_id" select="1"/>
                                    <field name="prodlot_id"/>
                                    <field name="location_id"/>
                                    <field name="location_dest_id"/>
                                    <field name="date_planned"/>
                                    <field name="state"/>
                                    <button
                                           name="%(stock.track_line)d"
                                           string="Split in production lots"
                                           type="action" icon="gtk-justify-fill"
                                           states="draft,waiting,confirmed,assigned" />
                                       <button
                                           name="%(stock.move_scrap)d"
                                           string="D" type="action"
                                           icon="gtk-convert"
                                           states="draft,waiting,confirmed,assigned" />
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                         <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" select="1" domain="[('usage','=','internal')]"/>
                                            <field name="location_dest_id" select="1" domain="[('usage','&lt;&gt;','view')]"/>
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id)" select="1"/>
                                            <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)" />
                                            <field name="product_uom" select="1"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name" select="1"/>
                                            <field invisible="1" name="date"/>
                                            <field name="date_planned"/>
                                            <field groups="base.group_extended" name="product_packaging"/>
                                            <field name="prodlot_id" select="1"
                                                context="{'location_id':location_id, 'product_id':product_id}"
                                                domain="[('product_id','=?',product_id)]"
                                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id" select="1"/>
                                            <label/>
                                            <button name="%(track_line)d" string="Split in production lots" type="action" icon="gtk-justify-fill"/>
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state" select="1"/>
                                            <group>
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object"  icon="gtk-jump-to"/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object"  icon="gtk-no"/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object"  icon="gtk-cancel"/>
                                            </group>
                                        </page>
                                        <page string="Return Picking History">
                                            <field name="move_stock_return_history" nolabel="1"/>
                                        </page>
                                    </notebook>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="6"/>
                                <button name="%(move_split)d" string="Split in Two" type="action" icon="gtk-justify-fill"/>
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object" icon="gtk-ok"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-yes"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" groups="base.group_extended" icon="gtk-apply"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon="gtk-jump-to"/>
                                <button name="%(partial_picking)d" states="assigned" string="Picking Done" type="action" icon="gtk-execute"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Other info" groups="base.group_extended">
                            <field name="active" select="2"/>
                            <field name="auto_picking"/>
                            <newline/>
                            <field name="date" select="2"/>
                            <field name="date_done" select="2"/>
                            <field name="move_type"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_picking_out_search" model="ir.ui.view">
            <field name="name">stock.picking.out.search</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Picking list">
                    <group col="8" colspan="4">
                        <filter icon="terp-stock" string="Available" domain="[('state','=','assigned')]" help="Assigned Outgoing Orders"/>
                        <filter icon="terp-stock" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Outgoing Orders"/>
                        <separator orientation="vertical"/>
                        <field name="name" select="1"/>
                        <field name="address_id" select="1"/>
                        <field name="company_id" select="1" widget="selection"/>
                   </group>   
                    <newline/>                 
                    <group expand="1" string="Group By..." colspan="4" col="8">
                        <filter string="Partner" icon="terp-stock" domain="[]" context="{'group_by':'address_id'}"/>
                        <filter string="State" icon="terp-stock" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Date" icon="terp-stock" domain="[]"  context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_picking_tree" model="ir.actions.act_window">
            <field name="name">Outgoing Products</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
            <field name="search_view_id" ref="view_picking_out_search"/>
        </record>
        <record id="action_picking_tree_out_view1_waiting" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree"/>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
<!--        <menuitem action="action_picking_tree" id="menu_action_picking_tree" parent="menu_stock_root" sequence="19"/>-->

        <record id="view_picking_in_tree" model="ir.ui.view">
            <field name="name">stock.picking.in.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree colors="blue:state in ('draft');grey:state in ('cancel', 'done');red:state not in ('cancel', 'done') and date &lt; current_date" string="Picking list">
                    <field name="name"/>
                    <field name="address_id"/>
                    <field name="backorder_id"/>
                    <field name="origin"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="invoice_state"/>
                    <field name="state"/>
                    <button name="%(partial_picking)d" states="assigned" string="Validate" type="action" icon="gtk-ok" help="Receive products"/>
                    <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel" help="Cancel" confirm="This operation will cancel the shipment. Do you want to continue?" />
                </tree>
            </field>
        </record>
        <record id="view_picking_in_form" model="ir.ui.view">
            <field name="name">stock.picking.in.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Input Picking List">
                    <group colspan="4" col="6">
                        <field name="name" readonly="1" select="1"/>
                        <field name="address_id" on_change="onchange_partner_in(address_id)" select="2" context="{'contact_display':'partner'}"/>
                        <field name="origin" select="2"/>
                        <field name="backorder_id" select="2" readonly="1"/>
                        <field name="date"/>
                        <field name="min_date" select="2" readonly="1"/>
                        <field name="invoice_state" select="2" string="Invoice Control"/>
                        <field name="type"/>
                        <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                        <button name="%(make_picking)d" 
                                states="confirmed,assigned" 
                                string="Make Picking" 
                                type="action" 
                                icon="gtk-go-forward" 
                                help="Make Picking" colspan="2"/>
                        <button name="%(return_picking)d" 
                                states="done" 
                                string="Return Picking" 
                                type="action" 
                                icon="gtk-go-back" 
                                help="Return Picking" colspan="2"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_in_id': address_id}">
                                <tree colors="grey:state in ('cancel');black:state not in ('cancel')" string="Stock Moves">
                                    <field name="product_id"/>
                                    <field name="product_qty"/>
                                    <field name="product_uom"/>
                                    <field name="location_dest_id"/>
                                    <field name="prodlot_id"/>
                                    <field name="state"/>
                                    <button
                                           name="%(stock.track_line)d"
                                           string="Split in production lots"
                                           type="action" icon="gtk-justify-fill"
                                           states="draft,waiting,confirmed,assigned" />
                                       <button
                                           name="%(stock.move_scrap)d"
                                           string="D" type="action"
                                           icon="gtk-convert"
                                           states="done,cancel" />
                                </tree>
                                <form string="Stock Moves">
                                    <notebook colspan="4">
                                        <page string="General Information">
                                            <separator colspan="4" string="Move Information"/>
                                            <field name="location_id" select="1" domain="[('usage','&lt;&gt;','view')]"/>
                                            <field domain="[('usage','=','internal')]" name="location_dest_id" select="1"/>
                                            <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id)" select="1"/>
                                            <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field name="product_uom" select="1"/>
                                            <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                            <field groups="product.group_uos" name="product_uos_qty"/>
                                            <field colspan="4" invisible="1" name="name" select="1"/>
                                            <field groups="base.group_extended" name="date_planned"/>
                                            <newline/>
                                            <newline/>
                                            <field groups="base.group_extended" name="product_packaging"/>
                                            <newline/>
                                            <field name="prodlot_id" select="1"
                                                context="{'location_id':location_id, 'product_id':product_id}"
                                                domain="[('product_id','=?',product_id)]"
                                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                            <field groups="base.group_extended" name="tracking_id" select="1"/>
                                            <newline/>
                                            <label/>
                                            <button groups="base.group_extended" name="%(track_line)d" string="Split in production lots" type="action" icon="gtk-justify-fill"/>
                                            <separator colspan="4" string="Move State"/>
                                            <field name="state" select="1"/>
                                            <group>
                                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" icon=""/>
                                                <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object" icon=""/>
                                                <button name="action_cancel" states="assigned" string="Cancel" type="object" icon=""/>
                                            </group>
                                        </page>
                                        <page string="Return Picking History">
                                                    <field name="move_stock_return_history" nolabel="1"/>
                                                </page>
                                            </notebook>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="5"/>
                                <button name="%(act_stock_picking_move_wizard)d" string="Unreceived Products" type="action" states="draft" icon="gtk-redo"/>
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object" icon="gtk-ok"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object" icon="gtk-media-play"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" icon="gtk-find"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" groups="base.group_extended" icon="gtk-jump-to"/>
                                <button name="%(partial_picking)d" states="assigned" string="Products Received" type="action" icon="gtk-ok"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel" icon="gtk-cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_picking_in_search" model="ir.ui.view">
            <field name="name">stock.picking.in.search</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Input Picking List">
                    <group col="8" colspan="4">
                        <filter icon="terp-stock" string="Available" domain="[('state','=','assigned')]" help="Assigned Incoming Orders" default="1" />
                        <separator orientation="vertical"/>
                        <filter icon="terp-stock" string="Back Order" domain="[('backorder_id', '!=', False)]" help="Has Back Order" />
                        <separator orientation="vertical"/>
                        <field name="name" select="1"/>
                        <field name="address_id" select="1"/>
                        <field name="company_id" select="1" widget="selection" groups="base.group_multi_company" />
                    </group>  
                    <newline/>                   
                    <group expand="1" string="Group By..." colspan="4" col="8">
                        <filter string="Partner" icon="terp-stock" domain="[]" context="{'group_by':'address_id'}"/>
                        <filter string="Date" icon="terp-stock" domain="[]"  context="{'group_by':'date'}"/>
                        <filter string="Origin" icon="terp-stock" domain="[]" context="{'group_by':'origin'}"/>
                    </group>
                </search>
            </field>
        </record>


        <record id="action_picking_tree4" model="ir.actions.act_window">
            <field name="name">Incoming shipments</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','in')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
            <field name="search_view_id" ref="view_picking_in_search"/>
        </record>
        <record id="action_invoice_tree5_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_in_tree"/>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <record id="action_invoice_tree5_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_in_form"/>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <record id="action_invoice_tree5_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <menuitem action="action_picking_tree4" id="menu_action_picking_tree4" parent="menu_stock_warehouse_mgmt" sequence="1"/>

        <record id="view_picking_internal_search" model="ir.ui.view">
            <field name="name">stock.picking.internal.search</field>
            <field name="model">stock.picking</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Internal Picking List">
                    <group col="8" colspan="4">
                        <filter icon="terp-stock" string="Available" domain="[('state','=','assigned')]" help="Assigned Internal Moves"/>
                        <filter icon="terp-stock" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Internal Moves" default="1" />
                        <separator orientation="vertical"/>
                        <field name="name" select="1"/>
                        <field name="origin" select="1"/>
                        <field name="company_id" select="1" widget="selection"/>
                    </group>  
                    <newline/>                   
                    <group expand="1" string="Group By..." colspan="4" col="8">
                        <filter string="Partner" icon="terp-stock" domain="[]" context="{'group_by':'address_id'}"/>
                        <filter string="Date" icon="terp-stock" domain="[]"  context="{'group_by':'date'}"/>
                        <filter string="Origin" icon="terp-stock" domain="[]" context="{'group_by':'origin'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_picking_tree6" model="ir.actions.act_window">
            <field name="name">Internal Moves</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','internal')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
            <field name="search_view_id" ref="view_picking_internal_search"/>
        </record>
        <menuitem action="action_picking_tree6" id="menu_action_picking_tree6" parent="menu_stock_warehouse_mgmt" sequence="2"/>

        <record id="view_move_tree" model="ir.ui.view">
            <field name="name">stock.move.tree</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('done', 'cancel');black:state not in ('done', 'cancel');red:date_planned > current_date" string="Moves">
                    <field name="name" string="Move Name"/>
                    <field name="product_id"/>
                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                    <field name="product_uom" string="UOM"/>
                    <field name="picking_id" select="1"/>
                    <field name="prodlot_id"/>
                    <field name="location_id"/>
                    <field name="location_dest_id"/>
                    <field name="date_planned"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

<!--        <menuitem id="menu_traceability_low" name="Low Level" parent="menu_traceability"/> -->

        <record id="view_move_form" model="ir.ui.view">
            <field name="name">stock.move.form</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="4" name="priority"/>
            <field name="arch" type="xml">
                <form string="Stock Moves">
                    <notebook colspan="4">
                        <page string="General Information">
                            <group colspan="2" col="2">
                                <separator colspan="2" string="Move Information"/>
                                <field name="name" select="2"/>
								<field name="delivered_id"/>                                
                                <field name="product_id" select="1" on_change="onchange_product_id(product_id,location_id,location_dest_id)"/>
                                <field name="product_qty" select="2" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                <field name="product_uom" select="2"/>
                                <field name="product_uos" select="2"/>
                            </group>

                            <group colspan="2" col="2">
                                <separator string="Locations &amp; Picking" colspan="2" />
                                <field name="location_id" select="1"/>
                                <field name="location_dest_id" select="1"/>
                                <field name="picking_id" select="2"/>
                                <field name="address_id" select="2" context="{'contact_display':'partner'}"/>
                                <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                            </group>

                            <group colspan="2" col="2">
                                <separator string="Dates &amp; Priority" colspan="2" />
                                <field name="date"/>
                                <field name="date_planned"/>
                                <field name="priority"/>
                            </group>

                            <group colspan="2" col="4">
                                <separator string="Traceability" colspan="4" />
                                <field name="tracking_id" select="1" colspan="4" />
                                <field name="prodlot_id" select="2"
                                    context="{'location_id':location_id, 'product_id':product_id}"
                                    domain="[('product_id','=?',product_id)]"
                                    on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                                <button name="%(track_line)d" string="Split in production lots" type="action" icon="gtk-justify-fill" colspan="2" />
                            </group>
                        </page>
                        <page string="Return Picking History">
                            <field name="move_stock_return_history" nolabel="1"/>
                        </page>
                    </notebook>
                    <group col="6" colspan="4">
                        <field name="state" select="1"/>
                        <button name="action_confirm" states="draft" string="Confirm" type="object" icon="gtk-apply"/>
                        <button name="action_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                        <button name="action_cancel" states="assigned,confirmed" string="Cancel" type="object" icon="gtk-cancel"/>
                        <button name="action_done" states="assigned" string="Make Parcel" type="object" icon="gtk-jump-to"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="view_move_search" model="ir.ui.view">
            <field name="name">stock.move.search</field>
            <field name="model">stock.move</field>
            <field name="type">search</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <search string="Stock Moves">
                    <group col="8" colspan="4">
                        <filter icon="terp-stock" string="Available" domain="[('state','=','assigned')]" help="Available Moves"/>
                        <filter icon="terp-stock" string="Confirmed" domain="[('state','=','confirmed')]" help="Confirmed Moves"/>
                        <filter icon="terp-stock" string="Waiting" domain="[('state','=','waiting')]" help="Waiting"/>
                        <separator orientation="vertical"/>
                        <field name="location_id" select="1"/>
                        <field name="location_dest_id" select="1"/>
                        <field name="product_id" select="1"/>
                    </group> 
                    <newline/>                    
                    <group expand="1" string="Group By..." colspan="4" col="8">
                        <filter string="Product" icon="terp-stock" domain="[]"  context="{'group_by':'product_id'}"/>
                        <filter string="Date" icon="terp-stock" domain="[]" context="{'group_by':'date'}"/>
                        <filter string="Location" icon="terp-stock" domain="[]" context="{'group_by':'location_id'}"/>
                        <filter string="Destination Location" icon="terp-stock" domain="[]" context="{'group_by':'location_dest_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_move_form2" model="ir.actions.act_window">
            <field name="name">All Moves</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_move_tree"/>
            <field name="search_view_id" ref="view_move_search"/>
        </record>
        <menuitem action="action_move_form2" id="menu_action_move_form2" parent="menu_traceability" sequence="1"/>

        <record id="action_picking_all" model="ir.actions.act_window">
            <field name="name">Picking lists</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="search_view_id" ref="view_stock_picking_filter"/>
            <field name="domain">[('type','=','out')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_picking_out_tree_view" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree"/>
            <field name="act_window_id" ref="action_picking_all"/>
        </record>
        <menuitem action="action_picking_all" id="menu_action_picking_all" parent="menu_stock_warehouse_mgmt" sequence="3"/>

        ====================================
        Reception Picking (By Stock Move)
        ====================================

        <record id="view_move_tree_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.tree2</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <tree colors="grey:state in ('cancel','done');black:state not in ('cancel','done')" string="Moves">
                    <field name="picking_id" string="Reference"/>
                    <field name="origin" string="Latest Requisition"/>
                    <field name="partner_id" string="Supplier"/>
                    <field name="product_id"/>
                    <field name="product_qty" />
                    <field name="product_uom" string="UOM"/>
                    <field name="prodlot_id" string="Lot"/>
                    <field name="date_planned"/>
                    <field name="backorder_id"/>
                    <field name="state"/>
                    <button name="%(partial_move)d" string="Partial" type="action" states="assigned" icon="gtk-justify-fill"/>
                    <button name="action_cancel" states="assigned,confirmed" string="Cancel" type="object" icon="gtk-cancel"/>
                </tree>
            </field>
        </record>

        <record id="view_move_form_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.form2</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <form string="Moves">
                    <notebook colspan="4">
                        <page string="General Information">
                            <separator colspan="4" string="Move Information"/>
                            <field name="delivered_id"/>
                            <field name="location_id" select="1"/>
                            <field name="location_dest_id" select="1"/>
                            <field colspan="4" name="product_id" select="1" on_change="onchange_product_id(product_id,location_id,location_dest_id)"/>
                            <field name="product_qty" select="2" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                            <field name="product_uom" select="2"/>
                            <field name="product_uos" select="2"/>
                            <field colspan="4" name="name" select="2"/>
                            <field name="date"/>
                            <field name="company_id" select="1" groups="base.group_multi_company" widget="selection"/>
                            <field name="date_planned"/>
                            <field name="priority"/>
                            <field name="address_id" select="2" context="{'contact_display':'partner'}"/>
                            <newline/>
                            <field name="picking_id" select="2"/>
                            <newline/>
                            <field name="prodlot_id" select="2"
                                context="{'location_id':location_id, 'product_id':product_id}"
                                domain="[('product_id','=?',product_id)]"
                                on_change="onchange_lot_id(prodlot_id,product_qty, location_id, product_id)"/>
                            <field name="tracking_id" select="2"/>
                            <newline/>
                            <label/>
                            <button name="%(track_line)d" string="Split in production lots" type="action" icon="gtk-justify-fill"/>
                            <separator colspan="4" string="Move State"/>
                            <field name="state" select="1"/>
                            <group col="5" colspan="2">
                                <button name="action_confirm" states="draft" string="Confirm" type="object" icon="gtk-apply"/>
                                <button name="action_assign" states="confirmed" string="Set Available" type="object" icon="gtk-yes"/>
                                <button name="action_cancel" states="assigned,confirmed" string="Cancel" type="object" icon="gtk-cancel"/>
                                <button name="%(partial_move)d" states="assigned" string="Partial" type="action" icon="gtk-justify-fill"/>
                                <button name="action_done" states="assigned" string="Done" type="object" icon="gtk-jump-to"/>
                            </group>
                        </page>
                        <page string="Return Picking History">
                            <field name="move_stock_return_history" nolabel="1"/>
                         </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="view_move_search_reception_picking" model="ir.ui.view">
            <field name="name">stock.move.search2</field>
            <field name="model">stock.move</field>
            <field name="type">search</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <search string="Stock Moves">
                    <group col="8" colspan="4">
                        <filter icon="terp-stock" string="To Receive" domain="[('state','in',('confirmed','assigned'))]" default="1" help="Stock to be received"/>
                        <filter icon="terp-stock" string="Back Orders" domain="[('backorder_id','!=',False)]" help="Back Orders"/>
                        <filter icon="terp-stock" string="Planned Today" domain="[('date_planned::date','=',time.strftime('%%Y-%%m-%%d'))]" help="Orders planned for today"/>
                        <separator orientation="vertical"/>
                        <field name="origin" string="Latest Requisition" select="1"/>
                        <field name="partner_id" string="Supplier" select="1"/>
                        <field name="product_id"/>
                    </group>   
                    <newline/>                 
                    <group expand="1" string="Group By..." colspan="4" col="8">
                        <filter string="Product" icon="terp-stock" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="State" icon="terp-stock" domain="[]" context="{'group_by':'state'}"/>
                        <filter string="Date" icon="terp-stock" domain="[]" context="{'group_by':'date'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_reception_picking_move" model="ir.actions.act_window">
            <field name="name">Incoming Products</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('picking_id','!=',False),('picking_id.type','=','in')]</field>
            <field name="view_id" ref="view_move_tree_reception_picking"/>
            <field name="search_view_id" ref="view_move_search_reception_picking"/>
        </record>

        <record model="ir.actions.act_window.view" id="action_move_reception_picking_tree">
            <field name="sequence" eval="1"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_move_tree_reception_picking"/>
            <field name="act_window_id" ref="action_reception_picking_move"/>
        </record>
        <record model="ir.actions.act_window.view" id="action_move_reception_picking_form">
            <field name="sequence" eval="2"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_move_form_reception_picking"/>
            <field name="act_window_id" ref="action_reception_picking_move"/>
        </record>
<!--        <menuitem action="action_reception_picking_move" id="menu_action_reception_picking_move" parent="menu_stock_warehouse_mgmt" sequence="4"/>-->


        # -------------------------------------------------------------
        # Stock incoterms
        # -------------------------------------------------------------
        <record id="view_incoterms_tree" model="ir.ui.view">
            <field name="name">stock.incoterms.tree</field>
            <field name="model">stock.incoterms</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Incoterms">
                    <field name="code"/>
                    <field colspan="4" name="name" select="1"/>
                </tree>
            </field>
        </record>
        <record id="stock_incoterms_form" model="ir.ui.view">
            <field name="name">stock.incoterms.form</field>
            <field name="model">stock.incoterms</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Incoterms">
                    <field colspan="4" name="name" select="1"/>
                    <field name="code" select="1"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>
        <record id="action_incoterms_tree" model="ir.actions.act_window">
            <field name="name">Incoterms</field>
            <field name="res_model">stock.incoterms</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
<!--        <menuitem action="action_incoterms_tree" id="menu_action_incoterms_tree" parent="menu_stock_configuration"/>-->

        <act_window
            context="{'location': active_id}"
            domain="[('type','&lt;&gt;','service')]"
            id="act_product_location_open"
            name="Products"
            res_model="product.product"
            src_model="stock.location"/>

        <act_window
            context="{'location': active_id}"
            domain="[('product_id','=',active_id)]"
            id="act_product_stock_move_open"
            name="All Stock Moves"
            res_model="stock.move"
            src_model="product.product"/>

        <act_window
            domain="[('move_lines','in',[active_id])]"
            id="act_relate_picking"
            name="Related Picking"
            res_model="stock.picking"
            src_model="stock.move"/>

        <act_window
            context="{'location': active_id}"
            domain="[('product_id','=',active_id),('state','in',('waiting','confirmed','assigned'))]"
            id="act_product_stock_move_futur_open"
            name="Future Stock Moves"
            res_model="stock.move"
            src_model="product.product"/>

        <record id="ir_act_product_location_open" model="ir.values">
            <field name="key2">tree_but_open</field>
            <field name="model">stock.location</field>
            <field name="name">Products</field>
            <field eval="'ir.actions.act_window,%d'%act_product_location_open" name="value"/>
            <field eval="True" name="object"/>
        </record>  


        <record id="ir_act_product_location_open" model="ir.values">
            <field name="key2">tree_but_open</field>
            <field name="model">stock.location</field>
            <field name="name">Open Products</field>
            <field eval="'ir.actions.act_window,%d'%action_view_stock_location_product" name="value"/>
            <field eval="True" name="object"/>
        </record> 

        <!-- Graph Views -->
        <!--  Products To Received Vs Planned -->
        <record model="ir.ui.view" id="view_move_graph_reception_picking_tree">
            <field name="name">Products To Received</field>
            <field name="model">report.products.to.received.planned</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Products To Received" >
                    <field name="qty" />
                    <field name="planned_qty" />
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_move_graph_reception_picking">
            <field name="name">Products To Received</field>
            <field name="model">report.products.to.received.planned</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
            <graph string="Products To Received" type="bar" orientation="vertical">
                <field name="date"/>
                <field name="qty" operator="+"/>
                <field name="planned_qty" operator="+"/>
            </graph>
            </field>
        </record>

        <record id="action_move_graph_reception_picking" model="ir.actions.act_window">
            <field name="name">Number of Products to receive Vs planned</field>
            <field name="res_model">report.products.to.received.planned</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="view_id" ref="view_move_graph_reception_picking"/>
        </record>

        <!--  Delivery Product Vs Planned -->
        <record model="ir.ui.view" id="view_move_delivery_products_planned_tree">
            <field name="name">Delivery Products</field>
            <field name="model">report.delivery.products.planned</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Products To Received" >
                    <field name="qty" />
                    <field name="planned_qty" />
                    <field name="date"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="view_move_delivery_products_planned_graph">
            <field name="name">Delivery Products</field>
            <field name="model">report.delivery.products.planned</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
            <graph string="Products To Received" type="bar" orientation="vertical">
                <field name="date"/>
                <field name="qty" operator="+"/>
                <field name="planned_qty" operator="+"/>
            </graph>
            </field>
        </record>

        <record id="action_move_delivery_products_planned" model="ir.actions.act_window">
            <field name="name">Delivery Products Vs Planned</field>
            <field name="res_model">report.delivery.products.planned</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="view_id" ref="view_move_delivery_products_planned_graph"/>
        </record>
          <!-- Product Delivered  -->
        <record id="view_stock_delivery_form" model="ir.ui.view">
            <field name="name">stock.delivery.from</field>
            <field name="model">stock.delivery</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Product">
                		<field name="name"/>
	                    <field name="date"/>
	                    <field name="partner_id"/>
	                    <separator string="Product Delivered Information" colspan="4" />
	                    <field name="product_delivered" colspan="4" nolabel="1" widget="one2many" mode="tree,form">
	                       <tree string="Stock Moves" editable="top">
			                    <field name="picking_id" string="Reference"/>
			                    <field name="origin" string="Latest Requisition"/>
			                    <field name="partner_id" string="Supplier"/>
			                    <field name="product_id"/>
			                    <field name="product_qty" />
			                    <field name="product_uom" string="UOM"/>
			                    <field name="prodlot_id" string="Lot"/>
		            		</tree>
	           			</field> 
                </form>
            </field>
        </record>
        <record id="view_stock_delivery_tree" model="ir.ui.view">
            <field name="name">stock.delivery.tree</field>
            <field name="model">stock.delivery</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Delivered Product">	
                	<field name="name"/>
                    <field name="date"/>
                    <field name="partner_id"/>
                    <field name="product_delivered"/>
                </tree>
            </field>
        </record>
	    
    	<record id="action_stock_delivery" model="ir.actions.act_window">
            <field name="name">Delivered Products</field>
            <field name="res_model">stock.delivery</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
           <!-- <field name="target">new</field>      -->      
            <field name="view_mode">form,tree</field>
            <field name="view_id" ref="view_stock_delivery_tree"/>
        </record>        
		
		<menuitem action="action_stock_delivery" id="menu_action_picking_all" parent="menu_traceability" sequence="4"/>
    </data>
</openerp>
