<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <menuitem icon="terp-stock" id="menu_stock_root" name="Stock Management"/>
        <menuitem id="menu_stock_configuration" name="Configuration" parent="menu_stock_root" sequence="1"/>

        =============================
        Inventory Line
        =============================
        <record id="stock_inventory_line_tree" model="ir.ui.view">
            <field name="name">stock.inventory.line.tree</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Stock Inventory Lines">
                    <field name="location_id"/>
                    <field name="product_id"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                </tree>
            </field>
        </record>
        <record id="view_inventory_line_form" model="ir.ui.view">
            <field name="name">stock.inventory.line.form</field>
            <field name="model">stock.inventory.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Stock Inventory Lines">
                    <field colspan="4" domain="[('usage','=','internal')]" name="location_id" select="1"/>
                    <field context="location=location_id,uom=product_uom" name="product_id" on_change="on_change_product_id(location_id,product_id,product_uom)" select="1" domain="[('type','&lt;&gt;','service')]"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                </form>
            </field>
        </record>

        =============================
        Inventory
        =============================
        <record id="view_inventory_tree" model="ir.ui.view">
            <field name="name">stock.inventory.tree</field>
            <field name="model">stock.inventory</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Lot Inventory">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record id="view_inventory_form" model="ir.ui.view">
            <field name="name">stock.inventory.form</field>
            <field name="model">stock.inventory</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Lot Inventory">
                    <field name="name" select="1"/>
                    <field name="date" select="1"/>
                    <notebook colspan="4">
                    <page string="General Informations">
                        <field colspan="4" name="inventory_line_id" nolabel="1" widget="one2many_list"/>
                    </page><page string="Posted Inventory">
                        <field colspan="4" name="move_ids" nolabel="1"/>
                    </page>
                    </notebook>
                    <field name="state" select="1"/>
                    <group col="2" colspan="2">
                        <button name="action_done" states="draft" string="Confirm Inventory" type="object"/>
                        <button name="action_cancel" states="done" string="Cancel Inventory" type="object"/>
                    </group>
                </form>
            </field>
        </record>
        <record id="action_inventory_form" model="ir.actions.act_window">
            <field name="name">Periodical Inventory</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_inventory_tree"/>
        </record>
        <menuitem action="action_inventory_form" id="menu_action_inventory_form" parent="menu_stock_root"/>

        <record id="action_inventory_form_draft" model="ir.actions.act_window">
            <field name="name">Draft Periodical Inventories</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','=','draft')]</field>
        </record>
        <menuitem action="action_inventory_form_draft" id="menu_action_inventory_form_draft" parent="menu_action_inventory_form"/>
        <record id="action_inventory_form_new" model="ir.actions.act_window">
            <field name="name">New Periodical Inventory</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.inventory</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree</field>
        </record>
        <menuitem action="action_inventory_form_new" id="menu_action_inventory_form_new" parent="menu_action_inventory_form"/>


        =============================
        Lot
        =============================

        <record id="view_tracking_form" model="ir.ui.view">
            <field name="name">stock.tracking.form</field>
            <field name="model">stock.tracking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Tracking/Serial">
                    <field name="name" select="1"/>
                    <field name="serial" select="1"/>
                    <field name="date" select="1"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>
        <record id="view_tracking_tree" model="ir.ui.view">
            <field name="name">stock.tracking.tree</field>
            <field name="model">stock.tracking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Tracking/Serial">
                    <field name="name"/>
                    <field name="serial"/>
                    <field name="date"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>
        <record id="action_tracking_form" model="ir.actions.act_window">
            <field name="name">Tracking Lots</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.tracking</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_tracking_tree"/>
        </record>
        <menuitem id="menu_traceability" name="Traceability" parent="menu_stock_root" sequence="2"/>
        <menuitem action="action_tracking_form" id="menu_action_tracking_form" parent="menu_traceability"/>

        <record id="lot_line_tree" model="ir.ui.view">
            <field name="name">stock.tracking.tree</field>
            <field name="model">stock.tracking</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree color="grey:not active" string="Tracking Number">
                    <field name="name" select="1"/>
                    <field name="serial" select="1"/>
                    <field name="date" select="1"/>
                </tree>
            </field>
        </record>

        <record id="view_production_lot_revision_form" model="ir.ui.view">
            <field name="name">stock.production.lot.revision.form</field>
            <field name="model">stock.production.lot.revision</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Production Lot Revisions">
                    <field colspan="4" name="name"/>
                    <field colspan="2" name="indice"/>
                    <field colspan="2" name="date"/>
                    <newline/>
                    <field name="author_id" readonly="1"/>
                    <newline/>
                    <field name="description"/>
                </form>
            </field>
        </record>
        <record id="view_production_lot_revision_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.revision.tree</field>
            <field name="model">stock.production.lot.revision</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Lot Revisions">
                    <field name="indice"/>
                    <field name="author_id"/>
                    <field name="date"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>
        <record id="view_production_lot_form" model="ir.ui.view">
            <field name="name">stock.production.lot.form</field>
            <field name="model">stock.production.lot</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Production Lot">
	                <notebook colspan="4">
	                	<page string="Production Lot">
		                    <field name="name" select="1"/>
		                    <field name="ref" select="2"/>
		                    <field name="product_id" select="1"/>
		                    <field name="stock_available"/>
		                    <field name="date" select="2"/>
		                    <field colspan="4" name="revisions" nolabel="1"/>
	                    </page>
	                </notebook>
                </form>
            </field>
        </record>
        <record id="view_production_lot_tree" model="ir.ui.view">
            <field name="name">stock.production.lot.tree</field>
            <field name="model">stock.production.lot</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Production Lot">
                    <field name="date"/>
                    <field name="name"/>
                    <field name="ref"/>
                    <field name="product_id"/>
                    <field name="stock_available"/>
                </tree>
            </field>
        </record>
        <record id="action_production_lot_form" model="ir.actions.act_window">
            <field name="name">Production Lots</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.production.lot</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_production_lot_tree"/>
        </record>
        <menuitem action="action_production_lot_form" id="menu_action_production_lot_form" parent="menu_traceability"/>


        #
        # Lot composition (history)
        #
        <record id="stock_move_tree" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids</field>
            <field name="arch" type="xml">
                <tree color="grey:state=='cancel'" string="Moves">
                    <field name="product_id" select="1"/>
                    <field name="product_qty" select="1"/>
                    <field name="product_uom" select="1" string="UOM"/>
                    <field name="prodlot_id" select="1"/>
                    <field name="product_packaging" domain="[('product_id','=',product_id)]"/>
                    <field name="picking_id"/>
                    <field name="location_id" select="1"/>
                    <field name="location_dest_id" select="1"/>
                    <field name="date" select="1"/>
                    <field name="date_planned" select="1" string="Date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record id="stock_move_tree2" model="ir.ui.view">
            <field name="name">Stock Moves</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field name="field_parent">move_history_ids2</field>
            <field name="arch" type="xml">
                <tree color="grey:state=='cancel'" string="Moves">
                    <field name="product_id" select="1"/>
                    <field name="product_qty" select="1"/>
                    <field name="product_uom" select="1" string="UOM"/>
                    <field name="prodlot_id" select="1"/>
                    <field name="product_packaging" domain="[('product_id','=',product_id)]"/>
                    <field name="picking_id"/>
                    <field name="location_id" select="1"/>
                    <field name="location_dest_id" select="1"/>
                    <field name="date" select="1"/>
                    <field name="date_planned" select="1" string="Date"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <wizard
            id="action_lot2"
            model="stock.production.lot"
            name="stock.traceability.lot.upstream"
            string="Upstream traceability"/>

        <wizard
            id="action_lot4"
            model="stock.production.lot"
            name="stock.traceability.lot.downstream"
            string="Downstream traceability"/>

        <wizard
            id="action4"
            model="stock.tracking"
            name="stock.traceability.upstream"
            string="Upstream traceability"/>

        <wizard
            id="action2"
            model="stock.tracking"
            name="stock.traceability.downstream"
            string="Downstream traceability"/>

        <record id="action3" model="ir.actions.act_window">
            <field name="name">Downstream traceability</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="domain">[('id','in',active_ids)]</field>
            <field name="view_type">tree</field>
            <field eval="stock_move_tree2" name="view_id"/>
        </record>
        <record id="ir_move_traceability_upstream" model="ir.values">
            <field eval="'tree_but_action'" name="key2"/>
            <field eval="'stock.move'" name="model"/>
            <field name="name">Downstream traceability</field>
            <field eval="'ir.actions.act_window,'+str(action3)" name="value"/>
            <field eval="True" name="object"/>
        </record>
        <record id="action5" model="ir.actions.act_window">
            <field name="name">Upstream traceability</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">stock.move</field>
            <field name="domain">[('id','in',active_ids)]</field>
            <field name="view_type">tree</field>
            <field eval="stock_move_tree" name="view_id"/>
        </record>
        <record id="ir_move_traceability_downstream" model="ir.values">
            <field eval="'tree_but_action'" name="key2"/>
            <field eval="'stock.move'" name="model"/>
            <field name="name">Upstream traceability</field>
            <field eval="'ir.actions.act_window,'+str(action5)" name="value"/>
            <field eval="True" name="object"/>
        </record>



        =============================
        Location
        =============================
        <record id="view_location_form" model="ir.ui.view">
            <field name="name">stock.location.form</field>
            <field name="model">stock.location</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Stock location">
                    <field name="name" select="1"/>
                    <field name="active" select="2"/>
                    <field name="usage" select="1"/>
                    <field name="account_id" select="1"/>
                    <field name="location_id"/>
                    <field name="address_id" context="{'contact_display':'partner'}"/>
                    <field name="icon"/>
                    <newline/>
                    <group col="2" colspan="2">
                        <separator string="Chained Locations" colspan="2"/>
                        <field name="chained_location_type"/>
                        <field name="chained_location_id"/>
                        <field name="chained_auto_packing"/>
                        <field name="chained_delay"/>
                    </group>
                    <group col="2" colspan="2">
                        <separator string="Localisation" colspan="2"/>
                        <field name="posx"/>
                        <field name="posy"/>
                        <field name="posz"/>
                    </group>
                    <separator string="Additional Information" colspan="4"/>
                    <field colspan="4" name="comment" nolabel="1"/>
                </form>
            </field>
        </record>
        <record id="view_location_tree2" model="ir.ui.view">
            <field name="name">stock.location.tree</field>
            <field name="model">stock.location</field>
            <field name="type">tree</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <tree string="Stock location" colors="blue:usage=='view';darkred:usage=='internal'">
                    <field name="complete_name"/>
                    <field name="usage"/>
                    <field name="stock_real" invisible="'product_id' not in context"/>
                    <field name="stock_virtual" invisible="'product_id' not in context"/>
                </tree>
            </field>
        </record>

        <record id="action_location_form" model="ir.actions.act_window">
            <field name="name">Locations</field>
            <field name="res_model">stock.location</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_location_tree2"/>
        </record>
        <menuitem action="action_location_form" id="menu_action_location_form" parent="menu_stock_configuration"/>

        <record id="view_location_tree" model="ir.ui.view">
            <field name="name">stock.location.tree</field>
            <field name="model">stock.location</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree toolbar="1">
                    <field icon="icon" name="name"/>
                </tree>
            </field>
        </record>
        <record id="action_location_tree" model="ir.actions.act_window">
            <field name="name">Stock Locations Structure</field>
            <field name="res_model">stock.location</field>
            <field name="type">ir.actions.act_window</field>
            <field name="domain">[('location_id','=',False)]</field>
            <field name="view_type">tree</field>
            <field name="view_id" ref="view_location_tree"/>
        </record>
        <menuitem action="action_location_tree" id="menu_action_location_tree" parent="menu_stock_root"/>
		
        =============================
        Warehouse
        =============================
        <record id="view_warehouse" model="ir.ui.view">
            <field name="name">stock.warehouse</field>
            <field name="model">stock.warehouse</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Warehouse">
                    <field colspan="4" name="name" select="1"/>
                    <field name="lot_input_id"/>
                    <field name="lot_stock_id"/>
                    <field name="lot_output_id"/>
                    <newline/>
                    <field name="partner_address_id" context="{'contact_display':'partner'}"/>
                </form>
            </field>
        </record>
        <record id="view_warehouse_tree" model="ir.ui.view">
            <field name="name">stock.warehouse.tree</field>
            <field name="model">stock.warehouse</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Warehouse">
                    <field name="name"/>
                    <field name="lot_input_id"/>
                    <field name="lot_stock_id"/>
                    <field name="lot_output_id"/>
                    <field name="partner_address_id" context="{'contact_display':'partner'}"/>
                </tree>
            </field>
        </record>
        <record id="action_warehouse_form" model="ir.actions.act_window">
            <field name="name">Warehouses</field>
            <field name="res_model">stock.warehouse</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_warehouse_tree"/>
        </record>
        <menuitem action="action_warehouse_form" id="menu_action_warehouse_form" parent="menu_stock_configuration"/>

        ==============================
        Wizard to Fill From Unreceived Products
        ===============================
        <record id="stock_picking_move_wizard_form" model="ir.ui.view">
            <field name="name">stock.picking.move.wizard.form</field>
            <field name="model">stock.picking.move.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Move Lines">
                    <field name="address_id" invisible="True" context="{'contact_display':'partner'}"/>
                    <field name="picking_id" invisible="True"/>
                    <field domain="[('picking_id','&lt;&gt;',picking_id),('state','in',['confirmed','assigned']),('picking_id.address_id','=',address_id)]" name="move_ids" nolabel="1"/><newline/>
                    <group colspan="4">
                        <button special="cancel" string="Cancel"/>
                        <button name="action_move" string="Add" type="object"/>
                    </group>
                </form>
               </field>
        </record>
        <record id="act_stock_picking_move_wizard" model="ir.actions.act_window">
            <field name="name">Fill From Unreceived Products</field>
            <field name="res_model">stock.picking.move.wizard</field>
            <field name="src_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="auto_refresh" eval="1"/>
            <field name="target">new</field>
            <field name="context">{'action_id': active_id}</field>
        </record>


        =============================
        Packing
        =============================
        <record model="ir.ui.view" id="stock_picking_calendar">
            <field name="name">stock.picking.calendar</field>
            <field name="model">stock.picking</field>
            <field name="type">calendar</field>
            <field name="priority" eval="2"/>
            <field name="arch" type="xml">
                <calendar string="Calendar View" date_start="min_date" date_stop="max_date" color="address_id">
                    <field name="origin"/>
                    <field name="type"/>
                    <field name="address_id"/>
                </calendar>
            </field>
        </record>
        <record id="vpicktree" model="ir.ui.view">
            <field name="name">stock.picking.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree color="red:state=='cancel'" string="Packing list">
                    <field name="name"/>
                    <field name="origin"/>
                    <field name="address_id" select="1"/>
                    <field name="backorder_id"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="invoice_state"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_form" model="ir.ui.view">
            <field name="name">stock.picking.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Packing list">
                    <group colspan="4" col="6">
                        <field name="address_id" select="2" context="{'contact_display':'partner'}"/>
                        <field name="type"/>
                        <field name="name" readonly="1"/>
                        <field name="date"/>
                        <field name="min_date" select="2"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}">
                                <form string="Stock Moves">
                                    <separator colspan="4" string="Move Information"/>
                                    <field name="location_id" select="1" domain="[('usage','=','internal')]"/>
                                    <field name="location_dest_id" select="1" domain="[('usage','=','internal')]"/>
                                    <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, parent.address_id)" select="1"/>
                                    <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" select="1"/>
                                    <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field groups="product.group_uos" name="product_uos_qty"/>
                                    <field colspan="4" invisible="1" name="name" select="1"/>
                                    <field invisible="1" name="date"/>
                                    <field name="date_planned"/>
                                    <field name="address_id" select="1" context="{'contact_display':'partner'}"/>
                                    <field groups="base.group_extended" name="product_packaging" domain="[('product_id','=',product_id)]"/>
                                    <field name="prodlot_id" select="2"
                                        context="{'location_id':location_id, 'product_id':product_id}"
                                        domain="[('product_id','=',product_id)]"
                                        on_change="onchange_lot_id(prodlot_id,product_qty, location_id)"/>
                                    <field groups="base.group_extended" name="tracking_id" select="2"/>
                                    <newline/>
                                    <label/>
                                    <button name="%(track_line)d" string="Split in production lots" type="action"/>
                                    <separator colspan="4" string="Move State"/>
                                    <field name="state" select="1"/>
                                    <group colspan="2">
                                        <button name="force_assign" states="confirmed" string="Force Availability" type="object"/>
                                        <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object"/>
                                        <button name="action_cancel" states="assigned" string="Cancel" type="object"/>
                                    </group>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="6"/>
                                <button name="%(move_split)d" string="Split move lines in two" type="action"/>
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Confirm (Do Not Process Now)" type="object"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object"/>
                                <button name="%(partial_picking)d" states="assigned" string="Validate" type="action"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Others info" groups="base.group_extended">
                            <field name="origin" select="2"/>
                            <field name="active" select="2"/>
                            <field name="auto_picking"/>
                            <field name="invoice_state" select="2"/>
                            <field name="date_done" select="2"/>
                            <newline/>
                            <field name="move_type"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        #
        # Delivery Orders
        #

        <record id="view_picking_delivery_tree" model="ir.ui.view">
            <field name="name">stock.picking.delivery.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree color="red:state=='cancel'" string="Packing list">
                    <field name="name"/>
                    <field name="origin"/>
                    <field name="address_id" select="1"/>
                    <field name="backorder_id"/>
                    <field name="date" select="1"/>
                    <field name="min_date" select="1"/>
                    <field name="state" select="1"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_delivery_form" model="ir.ui.view">
            <field name="name">stock.picking.delivery.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Packing list">
                    <group col="6" colspan="4">
                        <field name="address_id" select="1"/>
                        <field name="type"/>
                        <field name="name" select="1" readonly="1"/>
                        <field name="min_date" select="1"/>
                        <field name="backorder_id" select="2" readonly="1"/>
                        <field name="origin" select="2"/>
                    </group>
                        <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}">
                                <form string="Stock Moves">
                                    <separator colspan="4" string="Move Information"/>
                                    <field name="location_id" select="1" domain="[('usage','=','internal')]"/>
                                    <field name="location_dest_id" select="1" domain="[('usage','&lt;&gt;','view')]"/>
                                    <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, parent.address_id)" select="1"/>
                                    <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" select="1"/>
                                    <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field groups="product.group_uos" name="product_uos_qty"/>
                                    <field colspan="4" invisible="1" name="name" select="1"/>
                                    <field invisible="1" name="date"/>
                                    <field name="date_planned"/>
                                    <field groups="base.group_extended" name="product_packaging" domain="[('product_id','=',product_id)]"/>
                                    <field name="prodlot_id" select="2"
                                        context="{'location_id':location_id, 'product_id':product_id}"
                                        domain="[('product_id','=',product_id)]"
                                        on_change="onchange_lot_id(prodlot_id,product_qty, location_id)"/>
                                    <field groups="base.group_extended" name="tracking_id" select="1"/>
                                    <separator colspan="4" string="Move State"/>
                                    <field name="state" select="1"/>
                                    <group colspan="2">
                                        <button name="force_assign" states="confirmed" string="Force Availability" type="object"/>
                                        <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object"/>
                                        <button name="action_cancel" states="assigned" string="Cancel" type="object"/>
                                    </group>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="6"/>
                                <button name="%(move_split)d" string="Split in Two" type="action" states="assigned,confirmed,draft,auto" />
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object"/>
                                <button name="%(partial_picking)d" states="assigned" string="Products Sent" type="action"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Others info" groups="base.group_extended">
                            <field name="auto_picking"/>
                            <field name="active" select="2"/>
                            <newline/>
                            <field name="date" select="1"/>
                            <field name="date_done" select="2"/>
                            <field name="move_type"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>


        <record id="action_picking_tree_delivery" model="ir.actions.act_window">
            <field name="name">Delivery Orders</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','delivery')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_picking_tree_delivery_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_delivery_tree"/>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_delivery_form"/>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2_calendar" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree_delivery"/>
        </record>

        <menuitem action="action_picking_tree_delivery" groups="base.group_extended" id="menu_action_picking_tree_delivery" parent="menu_stock_root" sequence="20"/>

        <record id="action_picking_tree2_delivery" model="ir.actions.act_window">
            <field name="name">Delivery Orders to Process</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('state','=','assigned'),('type','=','delivery')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_picking_tree_delivery_view1_toproc" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_delivery_tree"/>
            <field name="act_window_id" ref="action_picking_tree2_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2_toproc" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_delivery_form"/>
            <field name="act_window_id" ref="action_picking_tree2_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2_toproc_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree2_delivery"/>
        </record>
        <menuitem action="action_picking_tree2_delivery" id="menu_picking_waiting_delivery" parent="menu_action_picking_tree_delivery"/>

        <record id="action_picking_tree3_delivery" model="ir.actions.act_window">
            <field name="name">Future Delivery Orders</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('state','=','confirmed'),('type','=','delivery')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_picking_tree_delivery_view1_waiting" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_delivery_tree"/>
            <field name="act_window_id" ref="action_picking_tree3_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2_waiting" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_delivery_form"/>
            <field name="act_window_id" ref="action_picking_tree3_delivery"/>
        </record>
        <record id="action_picking_tree_delivery_view2_waiting_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree3_delivery"/>
        </record>
        <menuitem action="action_picking_tree3_delivery" id="menu_action_picking_tree3_delivery" parent="menu_action_picking_tree_delivery"/>

       <record id="action_picking_calendar_delivery" model="ir.actions.act_window">
            <field name="name">Calendar of Deliveries</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">calendar,tree,form</field>
            <field name="domain">[('state','=','assigned'),('type','=','delivery')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <menuitem action="action_picking_calendar_delivery" id="menu_picking_calendar_delivery" parent="menu_action_picking_tree_delivery"/>

        #
        # Sending Products
        #

        <record id="view_picking_out_tree" model="ir.ui.view">
            <field name="name">stock.picking.out.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree color="red:state=='cancel'" string="Packing list">
                    <field name="name"/>
                    <field name="origin"/>
                    <field name="address_id"/>
                    <field name="backorder_id"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="invoice_state"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_out_form" model="ir.ui.view">
            <field name="name">stock.picking.out.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Packing list">
                    <group col="6" colspan="4">
                        <field name="address_id" select="2"/>
                        <field name="type"/>
                        <field name="min_date" select="2"/>
                        <field name="name" select="1" readonly="1"/>
                        <field name="invoice_state"/>
                        <field name="backorder_id" select="2" readonly="1"/>
                        <field name="origin" select="2" readonly="1"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_out_id': address_id}">
                                <form string="Stock Moves">
                                    <separator colspan="4" string="Move Information"/>
                                    <field name="location_id" select="1" domain="[('usage','=','internal')]"/>
                                    <field name="location_dest_id" select="1" domain="[('usage','&lt;&gt;','view')]"/>
                                    <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, parent.address_id)" select="1"/>
                                    <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)" />
                                    <field name="product_uom" select="1"/>
                                    <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field groups="product.group_uos" name="product_uos_qty"/>
                                    <field colspan="4" invisible="1" name="name" select="1"/>
                                    <field invisible="1" name="date"/>
                                    <field name="date_planned"/>
                                    <field groups="base.group_extended" name="product_packaging" domain="[('product_id','=',product_id)]"/>
                                    <field name="prodlot_id" select="1"
                                        context="{'location_id':location_id, 'product_id':product_id}"
                                        domain="[('product_id','=',product_id)]"
                                        on_change="onchange_lot_id(prodlot_id,product_qty, location_id)"/>
                                    <field groups="base.group_extended" name="tracking_id" select="1"/>
                                    <label/>
                                    <button name="%(track_line)d" string="Split in production lots" type="action"/>
                                    <separator colspan="4" string="Move State"/>
                                    <field name="state" select="1"/>
                                    <group colspan="2">
                                        <button name="force_assign" states="confirmed" string="Force Availability" type="object"/>
                                        <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object"/>
                                        <button name="action_cancel" states="assigned" string="Cancel" type="object"/>
                                    </group>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="6"/>
                                <button name="%(move_split)d" string="Split in Two" type="action"/>
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object" groups="base.group_extended"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object"/>
                                <button name="%(partial_picking)d" states="assigned" string="Packing Done" type="action"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                        <page string="Others info" groups="base.group_extended">
                            <field name="active" select="2"/>
                            <field name="auto_picking"/>
                            <newline/>
                            <field name="date" select="2"/>
                            <field name="date_done" select="2"/>
                            <field name="move_type"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record id="action_picking_tree" model="ir.actions.act_window">
            <field name="name">Outgoing Products</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','out')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_picking_tree_out_view1_waiting" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree"/>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <record id="action_picking_tree_out_view2_waiting_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree"/>
        </record>
        <menuitem action="action_picking_tree" id="menu_action_picking_tree" parent="menu_stock_root" sequence="19"/>

        <record id="action_picking_tree2" model="ir.actions.act_window">
            <field name="name">Available Packing</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('state','=','assigned'),('type','=','out')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_picking_tree2_out_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree"/>
            <field name="act_window_id" ref="action_picking_tree2"/>
        </record>
        <record id="action_picking_tree2_out_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree2"/>
        </record>
        <record id="action_picking_tree2_out_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree2"/>
        </record>
        <menuitem action="action_picking_tree2" id="menu_picking_waiting" parent="menu_action_picking_tree"/>

        <record id="action_picking_tree3" model="ir.actions.act_window">
            <field name="name">Confirmed Packing Waiting Availability</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('state','=','confirmed'),('type','=','out')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_picking_tree3_out_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_out_tree"/>
            <field name="act_window_id" ref="action_picking_tree3"/>
        </record>
        <record id="action_picking_tree3_out_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_out_form"/>
            <field name="act_window_id" ref="action_picking_tree3"/>
        </record>
        <record id="action_picking_tree3_out_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree3"/>
        </record>
        <menuitem action="action_picking_tree3" id="menu_action_picking_tree3" parent="menu_action_picking_tree"/>

        #
        # Reception of Products
        #
        <record id="view_picking_in_tree" model="ir.ui.view">
            <field name="name">stock.picking.in.tree</field>
            <field name="model">stock.picking</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree color="red:state=='cancel'" string="Packing list">
                    <field name="name"/>
                    <field name="origin"/>
                    <field name="address_id"/>
                    <field name="backorder_id"/>
                    <field name="date"/>
                    <field name="min_date"/>
                    <field name="invoice_state"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>
        <record id="view_picking_in_form" model="ir.ui.view">
            <field name="name">stock.picking.in.form</field>
            <field name="model">stock.picking</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Input Packing List">
                    <group colspan="4" col="6">
                        <field name="address_id" on_change="onchange_partner_in(address_id)" select="2" context="{'contact_display':'partner'}"/>
                        <field name="type"/>
                        <field name="origin" select="2"/>
                        <field name="invoice_state" select="2" string="Invoice Control"/>
                        <field name="name" readonly="1" select="1"/>
                        <field name="min_date" select="2" readonly="1"/>
                        <field name="backorder_id" select="2" readonly="1"/>
                    </group>
                    <notebook colspan="4">
                        <page string="General Information">
                            <field colspan="4" name="move_lines" nolabel="1" widget="one2many_list" default_get="{'move_line':move_lines, 'address_in_id': address_id}">
                                <tree string="Stock Moves">
                                    <field name="product_id"/>
                                    <field name="product_qty"/>
                                    <field name="product_uom"/>
                                    <field name="location_dest_id"/>
                                    <field name="prodlot_id"/>
                                    <field name="state"/>
                                </tree>
                                <form string="Stock Moves">
                                    <separator colspan="4" string="Move Information"/>
                                    <field name="location_id" select="1" domain="[('usage','&lt;&gt;','view')]"/>
                                    <field domain="[('usage','=','internal')]" name="location_dest_id" select="1"/>
                                    <field colspan="4" context="location=location_id" name="product_id" on_change="onchange_product_id(product_id, location_id, location_dest_id, parent.address_id)" select="1"/>
                                    <field name="product_qty" select="1" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field name="product_uom" select="1"/>
                                    <field groups="product.group_uos" name="product_uos" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                                    <field groups="product.group_uos" name="product_uos_qty"/>
                                    <field colspan="4" invisible="1" name="name" select="1"/>
                                    <field groups="base.group_extended" name="date_planned"/>
                                    <newline/>
                                    <newline/>
                                    <field groups="base.group_extended" name="product_packaging" domain="[('product_id','=',product_id)]"/>
                                    <newline/>                                    
                                    <field name="prodlot_id" select="1"
                                        context="{'location_id':location_id, 'product_id':product_id}"
                                        domain="[('product_id','=',product_id)]"
                                        on_change="onchange_lot_id(prodlot_id,product_qty, location_id)"/>
                                    <field groups="base.group_extended" name="tracking_id" select="1"/>
                                    <newline/>
                                    <label/>
                                    <button groups="base.group_extended" name="%(track_line)d" string="Split in production lots" type="action"/>
                                    <separator colspan="4" string="Move State"/>
                                    <field name="state" select="1"/>
                                    <group colspan="2">
                                        <button name="force_assign" states="confirmed" string="Force Availability" type="object"/>
                                        <button name="cancel_assign" states="assigned" string="Cancel Availability" type="object"/>
                                        <button name="action_cancel" states="assigned" string="Cancel" type="object"/>
                                    </group>
                                </form>
                            </field>
                            <group col="7" colspan="4">
                                <label colspan="5"/>
                                <button name="%(act_stock_picking_move_wizard)d" string="Unreceived Products" type="action" states="draft,confirmed,assigned"/>
                            </group>
                            <group col="10" colspan="4">
                                <field name="state" readonly="1"/>
                                <button name="draft_force_assign" states="draft" string="Process Later" type="object"/>
                                <button name="draft_validate" states="draft" string="Process Now" type="object"/>
                                <button name="action_assign" states="confirmed" string="Check Availability" type="object"/>
                                <button name="force_assign" states="confirmed" string="Force Availability" type="object" groups="base.group_extended"/>
                                <button name="%(partial_picking)d" states="assigned" string="Products Received" type="action"/>
                                <button name="button_cancel" states="assigned,confirmed,draft" string="Cancel"/>
                            </group>
                        </page>
                        <page string="Notes">
                            <field colspan="4" name="note" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>



        <record id="action_picking_tree4" model="ir.actions.act_window">
            <field name="name">Incoming Products</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','in')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_invoice_tree5_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_in_tree"/>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <record id="action_invoice_tree5_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_in_form"/>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <record id="action_invoice_tree5_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree4"/>
        </record>
        <menuitem action="action_picking_tree4" id="menu_action_picking_tree4" parent="menu_stock_root" sequence="17"/>

        <record id="action_picking_tree5" model="ir.actions.act_window">
            <field name="name">Packing to Process</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('state','=','assigned'),('type','=','in')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <record id="action_invoice_tree6_view1" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_in_tree"/>
            <field name="act_window_id" ref="action_picking_tree5"/>
        </record>
        <record id="action_invoice_tree6_view2" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_in_form"/>
            <field name="act_window_id" ref="action_picking_tree5"/>
        </record>
        <record id="action_invoice_tree6_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_tree5"/>
        </record>
        <menuitem action="action_picking_tree5" id="menu_action_picking_tree5" parent="menu_action_picking_tree4"/>

        <record id="action_picking_form" model="ir.actions.act_window">
            <field name="name">New Reception Packing</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree,calendar</field>
            <field name="context">{'contact_display': 'partner'}</field>
            <field name="domain">[('type','=','in')]</field>
        </record>
        <record id="action_picking_form_view1" model="ir.actions.act_window.view">
            <field eval="2" name="sequence"/>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="view_picking_in_tree"/>
            <field name="act_window_id" ref="action_picking_form"/>
        </record>
        <record id="action_picking_form_view2" model="ir.actions.act_window.view">
            <field eval="1" name="sequence"/>
            <field name="view_mode">form</field>
            <field name="view_id" ref="view_picking_in_form"/>
            <field name="act_window_id" ref="action_picking_form"/>
        </record>
        <record id="action_picking_form_view2_cal" model="ir.actions.act_window.view">
            <field eval="3" name="sequence"/>
            <field name="view_mode">calendar</field>
            <field name="act_window_id" ref="action_picking_form"/>
        </record>
        <menuitem action="action_picking_form" id="menu_action_picking_form" parent="menu_action_picking_tree4"/>

        <record id="action_picking_tree6" model="ir.actions.act_window">
            <field name="name">Internal Moves</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('type','=','internal')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <menuitem action="action_picking_tree6" id="menu_action_picking_tree6" parent="menu_stock_root" sequence="18"/>


        <record id="action_picking_tree7" model="ir.actions.act_window">
            <field name="name">Available Packing</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('state','=','assigned'),('type','=','internal')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <menuitem action="action_picking_tree7" id="menu_action_picking_tree7" parent="menu_action_picking_tree6"/>

        <record id="action_picking_tree8" model="ir.actions.act_window">
            <field name="name">Confirmed Packing Waiting Availability</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('state','=','confirmed'),('type','=','internal')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <menuitem action="action_picking_tree8" id="menu_action_picking_tree8" parent="menu_action_picking_tree6"/>

        <record id="action_picking_tree9" model="ir.actions.act_window">
            <field name="name">New Internal Packing</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">form,tree,calendar</field>
            <field name="domain">[('state','=','draft'),('type','=','internal')]</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <menuitem action="action_picking_tree9" id="menu_action_picking_tree9" parent="menu_action_picking_tree6"/>

        =============================
        Move Tracking
        =============================


        =============================
        Move
        =============================

        <record id="view_move_tree" model="ir.ui.view">
            <field name="name">stock.move.tree</field>
            <field name="model">stock.move</field>
            <field name="type">tree</field>
            <field eval="6" name="priority"/>
            <field name="arch" type="xml">
                <tree color="grey:state=='cancel'" string="Moves">
                    <field name="name"/>
                    <field name="product_id"/>
                    <field name="product_qty" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                    <field name="product_uom" string="UOM"/>
                    <field name="picking_id" select="1"/>
                    <field name="prodlot_id"/>
                    <field name="location_id"/>
                    <field name="location_dest_id"/>
                    <field name="date_planned"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <menuitem id="menu_traceability_low" name="Low Level" parent="menu_traceability"/>

        <record id="view_move_form" model="ir.ui.view">
            <field name="name">stock.move.form</field>
            <field name="model">stock.move</field>
            <field name="type">form</field>
            <field eval="4" name="priority"/>
            <field name="arch" type="xml">
                <form string="Stock Moves">
                    <separator colspan="4" string="Move Information"/>
                    <field name="location_id" select="1"/>
                    <field name="location_dest_id" select="1"/>
                    <field colspan="4" name="product_id" select="1"/>
                    <field name="product_qty" select="2" on_change="onchange_quantity(product_id, product_qty, product_uom, product_uos)"/>
                    <field name="product_uom" select="2"/>
                    <field name="product_uos" select="2"/>
                    <field colspan="4" name="name" select="2"/>
                    <field name="date"/>
                    <field name="date_planned"/>
                    <field name="priority"/>
                    <field name="address_id" select="2" context="{'contact_display':'partner'}"/>
                    <newline/>
                    <field name="picking_id" select="2"/>
                    <newline/>
                    <field name="prodlot_id" select="2"
                        context="{'location_id':location_id, 'product_id':product_id}"
                        domain="[('product_id','=',product_id)]"
                        on_change="onchange_lot_id(prodlot_id,product_qty, location_id)"/>
                    <field name="tracking_id" select="2"/>
                    <newline/>
                    <label/>
                    <button name="%(track_line)d" string="Split in production lots" type="action"/>
                    <separator colspan="4" string="Move State"/>
                    <field name="state" select="1"/>
                    <group col="4" colspan="2">
                        <button name="action_confirm" states="draft" string="Confirm" type="object"/>
                        <button name="action_assign" states="confirmed" string="Set Available" type="object"/>
                        <button name="action_cancel" states="assigned,confirmed" string="Cancel" type="object"/>
                        <button name="action_done" states="assigned" string="Make Parcel" type="object"/>
                    </group>
                </form>
            </field>
        </record>
        <record id="action_move_form2" model="ir.actions.act_window">
            <field name="name">Stock Moves</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="view_move_tree"/>
        </record>
        <menuitem action="action_move_form2" id="menu_action_move_form2" parent="menu_traceability_low"/>

        <record id="action_move_form3" model="ir.actions.act_window">
            <field name="name">Draft Moves</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','=','draft')]</field>
            <field name="view_id" ref="view_move_tree"/>
        </record>
        <menuitem action="action_move_form3" id="menu_action_move_form3" parent="menu_action_move_form2"/>

        <record id="action_move_form4" model="ir.actions.act_window">
            <field name="name">Available Moves</field>
            <field name="res_model">stock.move</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="domain">[('state','=','assigned')]</field>
            <field name="view_id" ref="view_move_tree"/>
        </record>
        <menuitem action="action_move_form4" id="menu_action_move_form4" parent="menu_action_move_form2"/>

        <record id="action_picking_all" model="ir.actions.act_window">
            <field name="name">Packing</field>
            <field name="res_model">stock.picking</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="context">{'contact_display': 'partner'}</field>
        </record>
        <menuitem action="action_picking_all" id="menu_action_picking_all" parent="menu_traceability_low"/>


        # -------------------------------------------------------------
        # Stock incoterms
        # -------------------------------------------------------------
        <record id="view_incoterms_tree" model="ir.ui.view">
            <field name="name">stock.incoterms.tree</field>
            <field name="model">stock.incoterms</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Incoterms">
                    <field name="code"/>
                    <field colspan="4" name="name" select="1"/>
                </tree>
            </field>
        </record>
        <record id="stock_incoterms_form" model="ir.ui.view">
            <field name="name">stock.incoterms.form</field>
            <field name="model">stock.incoterms</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Incoterms">
                    <field colspan="4" name="name" select="1"/>
                    <field name="code" select="1"/>
                    <field name="active" select="1"/>
                </form>
            </field>
        </record>
        <record id="action_incoterms_tree" model="ir.actions.act_window">
            <field name="name">Incoterms</field>
            <field name="res_model">stock.incoterms</field>
            <field name="type">ir.actions.act_window</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem action="action_incoterms_tree" id="menu_action_incoterms_tree" parent="menu_stock_configuration"/>

        <act_window
            context="{'location': active_id}"
            domain="[('type','&lt;&gt;','service')]"
            id="act_product_location_open"
            name="Products"
            res_model="product.product"
            src_model="stock.location"/>

        <act_window
            context="{'location': active_id}"
            domain="[('product_id','=',active_id)]"
            id="act_product_stock_move_open"
            name="All Stock Moves"
            res_model="stock.move" 
            src_model="product.product"/>

        <act_window
            domain="[('move_lines','in',[active_id])]"
            id="act_relate_picking"
            name="Related Picking"
            res_model="stock.picking" 
            src_model="stock.move"/>

        <act_window
            context="{'location': active_id}"
            domain="[('product_id','=',active_id),('state','in',('waiting','confirmed','assigned'))]"
            id="act_product_stock_move_futur_open"
            name="Future Stock Moves"
            res_model="stock.move" 
            src_model="product.product"/>

        <record id="ir_act_product_location_open" model="ir.values">
            <field name="key2">tree_but_open</field>
            <field name="model">stock.location</field>
            <field name="name">Products</field>
            <field eval="'ir.actions.act_window,%d'%act_product_location_open" name="value"/>
            <field eval="True" name="object"/>
        </record>  


        <record id="ir_act_product_location_open" model="ir.values">
            <field name="key2">tree_but_open</field>
            <field name="model">stock.location</field>
            <field name="name">Open Products</field>
            <field eval="'ir.actions.wizard,%d'%ref('location_product')" name="value"/>
            <field eval="True" name="object"/>
        </record> 

    </data>
</openerp>
