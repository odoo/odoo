<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- Enterprise'dan Veri Çekme Cron Job -->
        <record id="ir_cron_joker_sync_pull" model="ir.cron">
            <field name="name">Joker Sync: Enterprise'dan Veri Çek</field>
            <field name="model_id" ref="model_joker_sync"/>
            <field name="state">code</field>
            <field name="code">model.sync_pull_from_enterprise()</field>
            <field name="interval_number">5</field>
            <field name="interval_type">minutes</field>
            <field name="numbercall">-1</field>
            <field name="active">True</field>
            <field name="doall">False</field>
        </record>

        <!-- Sync Health Check Cron Job -->
        <record id="ir_cron_joker_sync_health" model="ir.cron">
            <field name="name">Joker Sync: Bağlantı Kontrolü</field>
            <field name="model_id" ref="model_joker_sync_config"/>
            <field name="state">code</field>
            <field name="code">
for config in model.search([('active', '=', True)]):
    config.test_connection()
            </field>
            <field name="interval_number">30</field>
            <field name="interval_type">minutes</field>
            <field name="numbercall">-1</field>
            <field name="active">True</field>
            <field name="doall">False</field>
        </record>
    </data>
</odoo>
