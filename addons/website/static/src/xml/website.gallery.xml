<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <!-- 
    =======================================================================
        Gallery Dialog
     
        This template is shown when creating a gallery, allowing users to upload
        images.
     ======================================================================= 
     -->

    <t t-name="website.gallery.dialog.upload">
        <div class="modal fade" >
            <div class="modal-dialog" style="max-width: 50%;">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><![CDATA[&times;]]></button>
                        <h4 class="modal-title">Add images</h4>
                    </div>
                    <div class="modal-body">
                        <form action="/website/images_upload" method="post" enctype="multipart/form-data" >
                            <div class="form-group">
                                <input name="upload" type="file" value="Choose images" multiple="multiple" accept="image/*"/> 
                            </div>
                            <div class="form-group">
                                <input type="submit" value="Upload images" class="btn btn-default" />
                            </div>
                        </form>
                        <div class="progress" >
                            <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%">0</div>
                        </div>
                        <div class="alert alert-success" role="alert">Upload successful.</div>
                        <div class="alert alert-danger" role="alert">Upload failed, some images might not have been uploaded. Check your network connectivity.</div>
                    </div>
                    
                </div>
            </div>
        </div>
    </t>

    <!-- 
        ========================================================================
        Gallery Slideshow
                
        This template is used to display a slideshow of images inside a 
        bootstrap carousel.
        
        ========================================================================
    -->

    <t t-name="website.gallery.slideshow">
        <div t-attf-id="#{id}" class="carousel slide" data-ride="carousel" t-attf-data-interval="#{interval}">
            <div class="carousel-inner container">
                 <t t-foreach="srcs" t-as="src">
                    <t t-if="src_index == index">
                        <div class="item img col-md-12 col-lg-12 active" style="text-align:center">                                       
                            <img t-att-src="src" style="display: inline-block; text-align: center;"/>
                            <div class="carousel-caption"></div>
                        </div>
                    </t>
                    <t t-if="src_index gt index or src_index lt index ">
                        <div class="item img col-md-12 col-lg-12" style="text-align:center" >
                            <img t-att-src="src"/>
                            <!-- Caption support -->
                            <div class="carousel-caption"></div>
                        </div>
                    </t>
                 </t>
            </div>
            
            <ul class="carousel-indicators">
                <t t-foreach="srcs" t-as="src">
                    <t t-if="src_index == index">
                        <li t-attf-data-target="##{id}" t-att-data-slide-to="src_index" class="active" t-attf-style="background-image: url(#{src})"></li>
                    </t>
                    <t t-if="src_index gt index or src_index lt index">
                        <li t-attf-data-target="##{id}" t-att-data-slide-to="src_index" t-attf-style="background-image: url(#{src})"></li>
                    </t>
                </t>
            </ul>
            
            <a class="carousel-control left" t-attf-href="##{id}" data-slide="prev"><span class="glyphicon glyphicon-chevron-left" /></a> 
            <a class="carousel-control right" t-attf-href="##{id}" data-slide="next"><span class="glyphicon glyphicon-chevron-right" /></a>
        </div> <!-- carousel-id -->
        <script type="text/javascript">
            (function() {
            $(".slideshow").css("height", Math.round(window.innerHeight*0.7));
            $(window).on("resize", function() { $(".slideshow").css("height", Math.round(window.innerHeight*0.7)); });
            })();
        </script>
    </t>
    
    <!--
        ========================================================================
        Gallery Slideshow LightBox
        
        This template is used to display a lightbox with a slideshow.
        
        This template wraps website.gallery.slideshow in a bootstrap modal
        dialog.
        ========================================================================
    -->
    <t t-name="website.gallery.slideshow.lightbox">

        <div class="modal fade" aria-labbelledby="Image Gallery Dialog" aria-hidden="true">

            <div class="modal-dialog modal-lg" role="Picture Gallery" t-attf-style="min-width: #{dim.min_width}px ; min-height: #{dim.min_height}px ; max-width: #{dim.max_width}px ; max-height: #{dim.max_height}px ;">
                
                <div class="modal-content">
                    <div class="modal-body slideshow">
                        <t t-call="website.gallery.slideshow"></t>
                    </div>

                </div> 
            </div>
        </div>
    </t>
</templates>
