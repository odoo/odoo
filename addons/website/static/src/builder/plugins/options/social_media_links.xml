<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<t t-name="website.SocialMediaLinks">
    <t t-set="items" t-value="this.computeItems()"/>
    <t t-set="itemsLength" t-value="items.length"/>
    <div class="p-1 px-2 ps-3">
        <table t-ref="root" class="o_social_media_list">
            <tbody>
                <!-- The `fabricatedKey` is a hack. I wish I could use `item.id` for the `t-key`. But the `applyTo`s are not properly updated, and thus it does not target the correct element if the domPosition changes (for example, after a deletion of an earlier item in the list). So `fabricatedKey` is a mix of `item.id` and `item.domPosition`. This causes the inner components to be re-created as soon as one of the two changes -->
                <tr t-foreach="items" t-as="item" t-key="item.fabricatedKey" t-att-data-id="item.id">
                    <td>
                        <button class="btn o_drag_handle ps-0">
                            <i class="oi oi-draggable"/>
                        </button>
                    </td>
                    <td width="100%">
                        <BuilderTextInput
                            action="'editSocialMediaLink'"
                            attributeAction="'href'"
                            applyTo="`a:nth-of-type(${item.domPosition})`"
                            placeholder="'https://example.com/your-page'"
                            default="`${itemsLength === 1
                                ? '#'
                                : ''
                            }`"
                        />
                    </td>
                    <td style="'min-width: 2.5em'">
                        <BuilderButton
                            className="`fa fa-fw fa-minus text-danger bg-transparent border-0 ${itemsLength === 1 ? 'disabled': ''}`"
                            title.translate="Remove link"
                            action="'deleteSocialMediaLink'"
                            applyTo="`a:nth-of-type(${item.domPosition})`"
                            preview="false"
                        />
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="p-1 px-2 ps-3">
        <BuilderButton action="'addSocialMediaLink'" preview="false">Add New Social Network</BuilderButton>
    </div>
</t>

</templates>