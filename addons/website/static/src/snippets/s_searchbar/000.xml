<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

<t t-name="website.search_image_item">
    <img t-if="result['image_url']" t-att-src="result['image_url']" class="o_search_result_image flex-shrink-0 rounded-2"/>
    <i t-else="" t-attf-class="o_search_result_image flex-shrink-0 align-content-center rounded-2 bg-100 fs-6 text-center text-muted fa #{result['_fa']}"/>
</t>

<t t-name="website.search_result_item">
    <li class="o_search_result_item">
        <a t-att-href="result['website_url']" class="o_search_result_link d-flex gap-2 py-2 px-3 text-decoration-none text-muted">
            <t t-call="website.search_image_item"/>
            <div class="o_search_result_content d-flex flex-grow-1">
                <div>
                    <h3 class="h6 mb-0 d-inline" t-out="result['name']"/>
                    <span t-if="search_item_metadata" class="align-baseline text-nowrap smaller">
                        <span> Â· </span>
                        <t t-out="search_item_metadata"/>
                    </span>
                </div>
                <div class="o_search_result_description d-empty-none">
                    <!-- Add a <t t-if="module_speficic_matching_area"/> -->
                    <t t-if="result['tags']" t-out="result['tags']"/>
                    <p
                        t-elif="result['description'] || result['body']"
                        class="mb-0 small"
                        t-out="result['description'] || result['body']"
                    />
                </div>
            </div>
        </a>
    </li>
</t>

<t t-name="website.search_items_page">
    <t t-foreach="bucket.data" t-as="result" t-key="result_index">
        <t t-call="website.search_result_item"/>
    </t>
</t>

<!-- Search Bar autocomplete item -->
<div t-name="website.s_searchbar.autocomplete" class="o_dropdown_menu show position-absolute w-100 rounded-top-0">
    <!-- Fuzzy search fallback -->
    <t t-if="fuzzySearch and Object.keys(results).length !== 0">
        <span class="dropdown-item-text px-3">
            <span class="text-muted">
                No results found for '<t t-out="search"/>'. <br/>Showing results for
                '<a href="#" class="s_searchbar_fuzzy_submit" t-out="fuzzySearch"/>'.
            </span>
        </span>
    </t>
    <!-- No result state -->
    <t t-elif="Object.keys(results).length === 0">
        <span class="dropdown-item-text px-3">
            <span class="text-muted">No results found. Please try another search.</span>
        </span>
    </t>
    <!-- Render results -->
    <ul class="list-unstyled mb-0">
        <t t-foreach="Object.values(results)" t-as="group_result" t-key="group_result_index">
            <t t-set="bucket" t-value="group_result"/>
            <!-- Items -->
            <t t-call="{{ bucket.templateKey }}"/>
        </t>
    </ul>
</div>

</templates>
