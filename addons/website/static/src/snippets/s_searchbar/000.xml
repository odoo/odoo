<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

<t t-name="website.search_image_item">
    <img t-if="result['image_url']" t-att-src="result['image_url']" class="o_search_result_image flex-shrink-0 rounded-2"/>
    <i t-else="" t-attf-class="o_search_result_image flex-shrink-0 align-content-center rounded-2 bg-100 fs-6 text-center text-muted fa #{result['_fa']}"/>
</t>

<t t-name="website.search_result_item">
    <t t-foreach="results.data" t-as="result" t-key="result_index">
        <li class="o_search_result_item">
            <a t-att-href="result['website_url']" class="o_search_result_link d-flex gap-2 py-2 px-3 text-decoration-none text-muted">
                <t t-call="website.search_image_item"/>
                <div class="o_search_result_content d-flex flex-grow-1">
                    <div>
                        <h3 class="h6 mb-0 d-inline" t-out="result['name']"/>
                        <span t-if="result['search_item_metadata']" class="align-baseline text-nowrap smaller">
                            <span> Â· </span>
                            <t t-out="result['search_item_metadata']"/>
                        </span>
                    </div>
                    <div class="o_search_result_description d-empty-none">
                        <!-- TODO in result priority: Add a <t t-if="module_speficic_matching_area"/> -->
                        <t t-if="result['tags']" t-out="result['tags']"/>
                        <p
                            t-elif="result['description'] || result['body']"
                            class="mb-0 small"
                            t-out="result['description'] || result['body']"
                        />
                    </div>
                </div>
            </a>
        </li>
    </t>
</t>

<div t-name="website.s_searchbar.autocomplete.skeleton.loader" class="o_dropdown_menu show w-100">
    <ul class="list-unstyled mb-0">
        <li class="o_search_result_item o_search_result_item_placeholder" t-foreach="[1, 2, 3]" t-as="i" t-key="i">
            <div class="d-flex align-items-center justify-content-between gap-3 py-2 px-3">
                <div class="o_search_result_image flex-shrink-0 rounded-2 placeholder-glow">
                    <span class="placeholder rounded-2 w-100 h-100 d-block bg-500"/>
                </div>
                <div class="o_search_result_content d-flex justify-content-between flex-grow-1 placeholder-glow gap-1">
                    <div class="placeholder col-4 bg-500"/>
                    <div t-attf-class="placeholder col-{{ i % 2 ? '6' : '4' }} bg-500"/>
                </div>
            </div>
        </li>
    </ul>
</div>

<!-- Search Bar autocomplete item -->
<div t-name="website.s_searchbar.autocomplete" class="o_dropdown_menu show position-absolute w-100">
    <!-- Fuzzy search fallback -->
    <t t-if="fuzzySearch and Object.keys(results).length !== 0">
        <span class="dropdown-item-text px-3">
            <span class="text-muted">
                No results found for '<t t-out="search"/>'. <br/>Showing results for
                '<a href="#" class="s_searchbar_fuzzy_submit" t-out="fuzzySearch"/>'.
            </span>
        </span>
    </t>
    <!-- No result state -->
    <t t-elif="Object.keys(results).length === 0">
        <span class="dropdown-item-text px-3">
            <span class="text-muted">No results found. Please try another search.</span>
        </span>
    </t>
    <!-- Render results -->
    <ul class="list-unstyled mb-0">
        <t t-foreach="Object.values(results)" t-as="group_result" t-key="group_result_index">
            <t t-set="results" t-value="group_result"/>
            <!-- Items -->
            <t t-call="website.search_result_item" results="results"/>
        </t>
    </ul>
</div>

</templates>
