<?xml version="1.0" encoding="UTF-8"?>
<template id="template" xml:space="preserve">

    <t t-inherit="mail.widget.Thread.Message" t-inherit-mode="extension">
        <xpath expr="//span[@name='notification_icon']" position="attributes">
            <!--
                Messages from snaimail are considered to have at most one notification.
                The failure type of the whole message is considered to be the same as the one from
                that first notification, and the click action will depend on it.
            -->
            <attribute name="t-att-data-failure-type">message.getNotifications()[0].failure_type</attribute>
        </xpath>
    </t>

    <t t-inherit="mail.widget.Thread.Message.MailTooltip" t-inherit-mode="extension">
        <!--
            It was decided that the information displayed for snaimail messages has to be
            different than for standard messages, see task-1907998.
        -->
        <xpath expr="//span[@name='notification_status']" position="replace">
            <t t-if="notification.notification_type === 'snail'">
                <span class="d-inline-block text-center o_thread_tooltip_icon">
                    <t t-if="notification.notification_status === 'sent'">
                        <i class="fa fa-check o_thread_tooltip_snailmail_icon" title="Sent" role="img" aria-label="Sent"/>
                        Sent
                    </t>
                    <t t-elif="notification.notification_status === 'canceled'">
                        <i class="fa fa-trash-o o_thread_tooltip_snailmail_icon" title="Canceled" role="img" aria-label="Canceled"/>
                        Canceled
                    </t>
                    <t t-elif="notification.notification_status === 'ready'">
                        <i class="fa fa-clock-o o_thread_tooltip_snailmail_icon" title="Awaiting Dispatch" role="img" aria-label="Awaiting Dispatch"/>
                        Awaiting Dispatch
                    </t>
                    <t t-else="">
                        <i class="fa fa-exclamation text-danger o_thread_tooltip_snailmail_icon" title="Error" role="img" aria-label="Error"/>
                        Error
                    </t>
                </span>
            </t>
            <t t-else="">$0</t>
        </xpath>
        <xpath expr="//span[@name='partner_name']" position="replace">
            <t t-if="notification.notification_type === 'snail'"></t>
            <t t-else="">$0</t>
        </xpath>
    </t>

</template>
