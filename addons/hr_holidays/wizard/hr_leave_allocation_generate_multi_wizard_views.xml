<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="hr_leave_allocation_generate_multi_wizard_view_form" model="ir.ui.view">
        <field name="model">hr.leave.allocation.generate.multi.wizard</field>
        <field name="arch" type="xml">
            <form string="Generate time off allocations for multiple employees">
                <div id="title" class="oe_title">
                    <h2>
                        <field name="name" class="w-100" placeholder="e.g. Time Off type (From validity start to validity end / no limit)" required="1"/>
                    </h2>
                </div>
                <group>
                    <group>
                        <field name="allocation_mode" string="Mode"/>
                        <field name="employee_ids" invisible="allocation_mode != 'employee'" required="allocation_mode == 'employee'" widget="many2many_avatar_user"/>
                        <field name="company_id" invisible="allocation_mode != 'company'"/>
                        <field name="department_id" invisible="allocation_mode != 'department'" required="allocation_mode == 'department'"/>
                        <field name="category_id" invisible="allocation_mode != 'category'" required="allocation_mode == 'category'"/>
                        <field name="holiday_status_id"/>
                        <field name="allocation_type" widget="radio" readonly="not can_edit_type"/>
                        <field name="accrual_plan_id"
                            invisible="allocation_type == 'regular'"
                            required="allocation_type == 'accrual'"/>
                        <div class="o_td_label" name="validity_label">
                            <label for="date_from" string="Validity Period"
                                invisible="allocation_type == 'accrual'"/>
                            <label for="date_from" string="Start Date" invisible="allocation_type == 'regular'"/>
                        </div>
                        <div class="o_row" name="validity">
                            <field name="date_from" nolabel="1"/>
                            <i class="fa fa-long-arrow-right mx-2" aria-label="Arrow icon" title="Arrow" invisible="allocation_type == 'accrual'"/>
                            <label class="mx-2" for="date_to" string="Run until" invisible="allocation_type == 'regular'"/>
                            <field name="date_to" nolabel="1" placeholder="No Limit"/>
                            <div id="no_limit_label" class="oe_read_only" invisible="date_to">No limit</div>
                        </div>
                        <div class="o_td_label">
                            <label for="duration"/>
                        </div>
                        <div name="duration_display">
                            <field name="duration" nolabel="1" style="width: 5rem;"/>
                            <span class="ml8" invisible="request_unit == 'hour'">Days</span>
                            <span class="ml8" invisible="request_unit != 'hour'">Hours</span>
                        </div>
                    </group>
                </group>
                <field name="notes" placeholder="Add a reason..." nolabel="1"/>
                <div class="alert alert-warning m-0" role="alert" invisible="not allocation_type_discrepancy">
                    <span>
                        There are existing allocations for some employees that are not compatible with the allocations you're trying to create.
                        Only one allocation type can be set for a given employee and a given time off type.
                    </span>
                </div>
                <footer>
                    <button name="action_generate_allocations" type="object" class="btn-primary"
                        invisible="allocation_type_discrepancy" string="Create Allocations" accesskey="c"/>
                    <button special="cancel" string="Discard" close="1" accesskey="j" />
                </footer>
            </form>
        </field>
    </record>

    <record id="action_hr_leave_allocation_generate_multi_wizard" model="ir.actions.act_window">
        <field name="name">Multiple Requests</field>
        <field name="res_model">hr.leave.allocation.generate.multi.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>
</odoo>
