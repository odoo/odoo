<?xml version="1.0" encoding="utf-8"?>
<odoo>
     <data noupdate="1">
         <!-- Controllers -->
         <record id="menu_referral_controller" model="website.menu">
            <field name="name">Referrals</field>
            <field name="url">/referral</field>
            <field name="parent_id" ref="website.main_menu"/>
            <field name="sequence">55</field>
        </record>

        <!-- Email Templates -->
        <record id="referral_tracker_email_template" model="mail.template">
            <field name="name">Referral tracker email</field>
            <field name="model_id" ref="website_sale_referral.model_referral_tracking" />
            <field name="auto_delete" eval="True"/>
            <field name="email_to">${object.referrer_email}</field>
            <field name="subject">Referral created !</field>
            <field name="body_html" type="xml">
                <span>
                    Dear ${ctx.get('referrer_name')}, <br/> <br/>
                    Your referral ${ctx.get('referred_name')} is registered and we hope you will be rewarded soon thanks to him/her. <br/>
                    You can track the status of the referral via this link: ${object.get_tracking_link()}<br/>
                </span>
            </field>
        </record>

        <record id="referral_won_email_template" model="mail.template">
            <field name="name">Referral won email</field>
            <field name="model_id" ref="website_sale_referral.model_referral_tracking" />
            <field name="auto_delete" eval="True"/>
            <field name="email_to">${object.referrer_email}</field>
            <field name="subject">Referral won !</field>
            <field name="body_html" type="xml">
                <span>
                    Dear ${ctx.get('referrer_name')}, <br/> <br/>
                    Good news, your referral ${ctx.get('referred_name')} subscribed to our product/service. <br/>
                    You will be contacted soon on this mail address to get your reward.<br/>
                    Have a nice day!
                </span>
            </field>
        </record>



        <!-- UTM -->
        <record model="utm.tag" id="utm_campaign_tag_referral">
            <field name="name">Referral</field>
            <field name="color" eval="3"/>
        </record>

        <record model="utm.campaign" id="utm_campaign_referral">
            <field name="name">Referral</field>
            <field name="stage_id" ref="utm.default_utm_stage"/>
            <field name="tag_ids" eval="[(6, 0, [ref('utm_campaign_tag_referral')])]" />
        </record>

        <!-- Activity type -->
        <record id="mail_act_data_referral_reward" model="mail.activity.type">
            <field name="name">Referral to reward</field>
            <field name="icon">fa-gift</field>
        </record>
     </data>
</odoo>
