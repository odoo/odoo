<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="product_wishlist" inherit_id="website_sale_wishlist.product_wishlist">
        <xpath expr="//button[hasclass('o_wish_rm')]" position="after">
            <t t-if="is_view_active('website_sale_comparison.add_to_compare')">
                <t t-set="categories" t-value="product.product_tmpl_id.valid_product_template_attribute_line_ids._prepare_categories_for_display()"/>
                <t t-set="product_variant_id" t-value="product.product_tmpl_id._get_first_possible_variant_id()"/>
                <button
                    t-if="product_variant_id and categories"
                    type="button"
                    class="btn btn-link o_add_to_compare no-decoration btn-sm"
                    aria-label="Add to compare"
                    t-att-data-product-id="product.id"
                >
                    <i class="fa fa-exchange"/> Add to compare
                </button>
            </t>
        </xpath>
    </template>
</odoo>
