<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <record id="view_sales_config" model="ir.ui.view">
            <field name="name">sale settings</field>
            <field name="model">sale.config.settings</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="base_setup.view_sale_config_settings"/>
            <field name="arch" type="xml">
                <group name="config_sale" position="before">
                    <div>
                    <separator string="Invoicing Process"/>
                    <group>
                        <label for="id" string="Invoicing Process"/>
                        <div>
                            <div><field name="group_invoice_so_lines" on_change="onchange_invoice_methods(group_invoice_so_lines, group_invoice_deli_orders)" class="oe_inline"/>
                            <label for="group_invoice_so_lines" string="genrate invoices based on the sale order"/></div>
                            <div><field name="group_invoice_deli_orders" class="oe_inline" on_change="onchange_invoice_methods(group_invoice_so_lines, group_invoice_deli_orders)"/>
                            <label for="group_invoice_deli_orders" string="genrate invoices after and based on delivery orders"/></div>
                            <div><field name="task_work" class="oe_inline" on_change="onchange_task_work(task_work)"/>
                            <label for="task_work" string="prepare invoices based on task's activities"/></div>
                            <div><field name="timesheet" class="oe_inline" on_change="onchange_timesheet(timesheet)"/>
                            <label for="timesheet" string="prepare invoices based on timesheets"/></div>
                        </div>    
                    </group> 
                    <group>
                        <label for="id" string="Default Process"/>
                        <div>
                            <div attrs="{'invisible':['|',('group_invoice_so_lines','=',False),('group_invoice_deli_orders','=',False)],'required': ['|',('group_invoice_so_lines','=',True),('group_invoice_deli_orders','=',True)]}">
                                <field name="default_order_policy" string="the default invocing method is" />
                            </div>
                            <div attrs="{'invisible':[('group_invoice_so_lines','=',False), ('group_invoice_deli_orders','=',False)]}"><field name="module_delivery" class="oe_inline"/>
                            <label for="module_delivery" string="allow adding shipping cost"/></div>
                            <div attrs="{'invisible': [('task_work','=',False), ('module_account_analytic_analysis','=',False)],'required': ['|', ('task_work','=',True), ('module_account_analytic_analysis','=',True)]}"><field name="time_unit" string="the default working time unit for service is " domain="[('category_id.name','=','Working Time')]"/>
                            </div>
                        </div>
                    </group>
                    </div>
                
                    <field name="module_project_timesheet" invisible="1"/>
                    <field name="module_project_mrp" invisible="1"/>
                    <separator string="Quotations and Sales Orders" col="1"/>
                    <group>
                        <label for="id" string="Customer Features"/>
                        <div>
                            <div><field name="group_sale_delivery_address" class="oe_inline"/>
                            <label for="group_sale_delivery_address"/></div>
                            <div><field name="group_sale_pricelist" class="oe_inline"/>
                            <label for="group_sale_pricelist" string="use pricelists to adapt your price per customers"/></div>
                            <div><field name="module_warning" class="oe_inline"/>
                            <label for="module_warning" string="allow configuring alert by customer or products"/></div>
                            <div name="module_sale_journal"><field name="module_sale_journal" class="oe_inline"/>
                            <label for="module_sale_journal" string="allow batch invoicing through journals"/></div>
                        </div>
                    </group>
                    <group>
                        <label for="id" string="Product Features"/>
                        <div>
                            <div><field name="group_uom" class="oe_inline"/>
                            <label for="group_uom" /></div>
                            <div><field name="group_discount_per_so_line" class="oe_inline"/>
                            <label for="group_discount_per_so_line" string="Allow setting a discount on the sale order lines" /></div>
                            <div><label for="decimal_precision" string="What's the decimal precision on prices:"/>
                            <field name="decimal_precision" class="oe_inline"/></div>
                        </div>
                    </group>
                    <group>
                        <label for="id" string="Sale Features"/>
                        <div>
                            <div><field name="group_multiple_shops" class="oe_inline"/>
                            <label for="group_multiple_shops" /></div>
                            <div attrs="{'invisible':[('group_invoice_deli_orders','=',False)]}"><field name="default_picking_policy" class="oe_inline"/>
                            <label for="default_picking_policy" /></div>
                            <div name="module_sale_margin"><field name="module_sale_margin" class="oe_inline"/>
                            <label for="module_sale_margin" /></div>
                        </div>
                    </group>
                    <separator string="Contracts Management" colspan="2"/>
                    <div>Use contract to be able to manage your services with multiple invoicing as part of the same contract with your customer</div>
                    <group>
                        <label for="id" string="Contract Feature"/>
                        <div>
                            <div><field name="module_account_analytic_analysis" on_change="onchange_timesheet(module_account_analytic_analysis)" class="oe_inline"/>
                            <label for="module_account_analytic_analysis" string="Use contract management"/></div>
                            <div attrs="{'invisible':[('module_account_analytic_analysis','=',False)]}"><field name="module_analytic_user_function" class="oe_inline"/>
                            <label for="module_analytic_user_function"/></div>
                        </div>
                    </group>
                </group>
            </field>
        </record>

        <menuitem id="base.menu_sale_config" name="Sales" parent="base.menu_config"
            sequence="1" action="base_setup.action_sale_config"/>

        <record id="view_account_config" model="ir.ui.view">
            <field name="name">account settings</field>
            <field name="model">account.config.settings</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="account.view_account_config_settings"/>
            <field name="priority" eval="16"/>
            <field name="arch" type="xml">
                <separator name="analytic_accounting" position="attributes">
                    <attribute name="invisible">0</attribute>
                    <attribute name="colspan">2</attribute>
                </separator>
                <separator name="analytic_accounting" position="after">
                    <field name="group_analytic_account_for_sales"/>
                    <field name="module_sale_analytic_plans" on_change="onchange_sale_analytic_plans(module_sale_analytic_plans)"/>
                </separator>
            </field>
        </record>

    </data>
</openerp>
