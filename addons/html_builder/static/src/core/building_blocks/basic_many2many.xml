<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<t t-name="html_builder.BasicMany2ManySearchInput">
    <input placeholder="Search for records..." t-on-input="props.onSearch" t-on-focus="props.onSearch" t-ref="autofocus"/>
</t>

<t t-name="html_builder.BasicMany2Many">
    <div>
        <table>
            <tr t-foreach="props.selection" t-as="entry" t-key="entry.id">
                <td>
                    <input type="text" disabled="" t-att-value="entry.name"/>
                </td>
                <td>
                    <button class="o_we_link o_we_text_danger fa fa-fw fa-minus" t-on-click="() => this.unselect(entry.id)"/>
                </td>
            </tr>
        </table>
        <Dropdown>
            <button class="btn" t-ref="opener">Choose a record...</button>
            <t t-set-slot="content">
                <div>
                    <BasicMany2ManySearchInput onSearch="onSearch.bind(this)" toFocus="setSearchInputFocusCallback.bind(this)"/>
                </div>
                <t t-foreach="state.searchResults" t-as="entry" t-key="entry.id">
                    <t t-if="!props.selection.some((sel) => sel.id == entry.id)">
                     <DropdownItem onSelected="() => this.select(entry)">
                         <div t-out="entry.name"/>
                     </DropdownItem>
                    </t>
                </t>
                <t t-if="state.searchMore">
                    <div class="o_we_m2o_search_more" title="Search to show more records" t-on-click="searchMore">Search more...</div>
                </t>
                <t t-if="props.create">
                    <div class="o_we_m2o_create">
                        <input type="text" autocomplete="chrome-off" placeholder="" class="text-start" t-ref="createInput" t-on-input="onCreateInput"/>
                        <button class="btn active" t-att-disabled="!state.createEnabled" t-on-click="() => this.create()">Create</button>
                    </div>
                </t>
            </t>
        </Dropdown>
    </div>
</t>

</templates>
