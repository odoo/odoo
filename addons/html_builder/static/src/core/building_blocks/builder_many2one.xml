<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<t t-name="html_builder.BuilderMany2One">
    <BuilderComponent>
        <SelectMany2X
            model="this.props.model"
            fields="this.props.fields"
            limit="this.props.limit"
            nullText="this.props.nullText"
            domain="this.props.domain"
            selected="this.domState.selected ? [this.domState.selected] : []"
            select="this.select.bind(this)"
            preview="this.hasPreview ? this.preview.bind(this) : undefined"
            revert.bind="this.revert"
            create="this.props.createAction ? this.create.bind(this) : undefined"

            message="this.domState.selected?.display_name || this.props.defaultMessage"
        />
        <button type="button"
                t-if="this.domState.selected and this.props.allowUnselect"
                class="o-hb-btn o-hb-btn-has-icon btn btn-secondary"
                t-on-click="() => this.select()"
                t-on-pointerenter="this.hasPreview ? () => this.preview() : undefined"
                t-on-pointerleave="this.revert"
                t-on-focusin="this.hasPreview ? () => this.preview() : undefined"
                t-on-focusout="this.revert"
                aria-label="Unselect">
            <i class="oi oi-close" role="presentation"/>
        </button>
    </BuilderComponent>
</t>

</templates>
