<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

<!-- TODO: support more features from the previous implementation: "callWith", "filterInModel", "filterInField", "nullText" -->

<t t-name="html_builder.SelectMany2X">
    <SelectMenu
        choices="this.filteredSearchResult().map(e => ({ value: e, label: e.display_name  }))"
        onSelect="props.select"
        searchPlaceholder.translate="Search for records..."
        onInput.bind="onInput"
        class="'border-0'"
        togglerClass="'btn-dark btn-primary bg-dark'"
    >
        <t t-out="props.message"/>
        <t t-set-slot="bottomArea" t-slot-scope="select">
            <a
                t-if="state.hasMore"
                t-on-click="() => this.searchMore(select.data.searchValue)"
                class="'o-dropdown-item dropdown-item o-navigable o_we_m2o_search_more'"
                title="Search to show more records"
            >
                Search more...
            </a>
            <a
                t-if="!!state.nameToCreate"
                t-on-click="() => this.create(state.nameToCreate)"
                class="'o-dropdown-item dropdown-item o-navigable o_we_m2o_create'"
            >
                Create "<t t-out="state.nameToCreate"/>"
            </a>
        </t>
    </SelectMenu>
</t>

</templates>
