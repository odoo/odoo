<?xml version="1.0" encoding="UTF-8"?>
<template xml:space="preserve">

    <t t-name="html_builder.BuilderListDialog">
        <Dialog contentClass="'o_bl_dialog'" title.translate="Manage Records" size="'lg'">
            <input type="search" class="form-control mb-3" placeholder="Search" t-on-input="this.onSearch" />
            <div class="w-100 d-flex flex-row gap-3 ">
                <div class="o_left_panel w-100 h-100 d-flex flex-column flex-nowrap">
                    <div class="d-flex justify-content-between align-items-center">
                        <h4 class="m-0">Excluded records</h4>
                        <button class="btn btn-sm btn-link p-0" t-on-click="this.includeAll">
                            <i class="fa fa-plus me-1" />Include all</button>
                    </div>
                    <div class="o_list_panel overflow-auto border mt-2">
                        <h3 t-if="this.searchExcluded.length === 0" class="text-center text-muted my-2">No record.</h3>
                        <t t-foreach="this.searchExcluded" t-as="record" t-key="record.id">
                            <div class="o_list_item cursor-pointer position-relative ps-4"
                                t-on-click="() => this.include(record)">
                                <div class="d-flex align-items-center">
                                    <span class="overflow-hidden w-100" t-esc="record.display_name" />
                                    <span title="Include record" class="fa fa-plus float-end m-1 pe-2" />
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
                <div class="o_right_panel w-100 h-100 d-flex flex-column flex-nowrap">
                    <div class="d-flex justify-content-between align-items-center">
                        <h4 class="m-0">Included records</h4>
                        <button class="btn btn-sm btn-link p-0" t-on-click="this.excludeAll">
                            <i class="fa fa-minus me-1" />Exclude all</button>
                    </div>
                    <div class="o_list_panel overflow-auto border mt-2">
                        <h3 t-if="this.searchIncluded.length === 0" class="text-center text-muted my-2">No record.</h3>
                        <t t-foreach="this.searchIncluded" t-as="record" t-key="record.id">
                            <div class="o_list_item cursor-pointer position-relative ps-4"
                                t-on-click="() => this.exclude(record)">
                                <div class="d-flex align-items-center">
                                    <span class="overflow-hidden w-100" t-esc="record.display_name" />
                                    <span class="fa fa-minus m-1 pe-2 float-end" title="Exclude record" />
                                </div>
                            </div>
                        </t>
                    </div>
                </div>
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="this.save" t-att-disabled="this.state.includedRecords.length === 0">Save</button>
                <button class="btn btn-secondary" t-on-click="() => this.props.close()">Discard</button>
            </t>
        </Dialog>
    </t>

</template>
