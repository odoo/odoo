<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="assets_frontend" inherit_id="web.assets_frontend">
        <xpath expr="script[last()]" position="after">
            <script type="text/javascript" src="/payment_stripe/static/src/js/stripe_form.js"/>
        </xpath>
    </template>

    <template id="stripe_form">
        <input type="hidden" name="data_set" t-att-data-action-url="tx_url" data-remove-me=""/>
        <input type='hidden' name='amount' t-att-value="amount"/>
        <input type='hidden' name='redirect_url' t-att-value='redirect_url'/>
        <input type='hidden' name='currency' t-att-value='currency'/>
        <input type='hidden' name='name' t-att-value='name'/>
        <input type='hidden' name='phone' t-att-value='phone'/>
        <input type='hidden' name='email' t-att-value='email'/>
        <input type='hidden' name='city' t-att-value='city'/>
        <input type='hidden' name='country' t-att-value='country'/>
        <input type="hidden" name='reference' t-att-value='reference'/>
        <input type="hidden" name='city' t-att-value='city'/>
        <input type="hidden" name='line1' t-att-value='line1'/>
        <input type="hidden" name='state' t-att-value='state'/>
        <input type="hidden" name='postal_code' t-att-value='postal_code'/>
        <input type='hidden' name="acquirer" t-att-value="acquirer.id"/>
        <input type='hidden' name="stripe_key" t-att-value="acquirer.stripe_publishable_key"/>
        <script type="text/javascript" src="/payment_stripe/static/src/js/stripe.js"></script>
    </template>

    <template id="stripe_form_type" inherit_id="payment.payment_tokens_list">
        <xpath expr="//span[hasclass('payment_option_name')]" position="after">
            <t t-if="acq.provider == 'stripe' and acq.payment_flow == 'form'">
                <t t-set="partner_country_id" t-value="acq.env['res.partner'].browse(partner_id).sudo().country_id.id"/>
                <div class="pull-right ml-4">
                    <select class="form-control stripe_payment_type d-none">
                        <t t-foreach="acq.payment_method_ids" t-as="payment_type">
                            <t t-if="partner_country_id in payment_type.country_ids.ids or not payment_type.country_ids.ids">
                                <option t-att-value="payment_type.name"><t t-esc="payment_type.name"/></option>
                            </t>
                        </t>
                    </select>
                </div>
            </t>
        </xpath>
    </template>

    <template id="stripe_s2s_form">
        <input type="hidden" name="data_set" data-create-route="/payment/stripe/s2s/create_json_3ds"/>
        <div t-attf-class="mt8 #{'' if bootstrap_formatting else 'o_card_brand_detail'}">
            <div t-att-class="'form-group col-md-12' if bootstrap_formatting else 'form-group'">
                <input type="tel" name="cc_number" id="cc_number" class="form-control" placeholder="Card number" data-is-required="true"/>
                <div class="card_placeholder"></div>
                <div class="visa"></div>
                <input type="hidden" name="cc_brand" value=""/>
            </div>
            <div t-att-class="'form-group col-md-5' if bootstrap_formatting else 'form-group'">
                <input type="text" name="cc_holder_name" id="cc_holder_name" class="form-control" placeholder="Cardholder name" data-is-required="true"/>
            </div>
            <div t-att-class="'form-group col-md-3' if bootstrap_formatting else 'form-group'">
                <input type="text" name="cc_expiry" id="cc_expiry" class="form-control" maxlength="7" placeholder="Expires (MM / YY)" data-is-required="true"/>
            </div>
            <div t-att-class="'form-group col-md-4' if bootstrap_formatting else 'form-group'">
                <input type="text" name="cvc" id="cvc" class="form-control" maxlength="4" placeholder="CVC" data-is-required="true"/>
            </div>
            <input type="hidden" name="acquirer_id" t-att-value="id"/>
            <input t-if="return_url" type="hidden" name="return_url" t-att-value="return_url"/>
            <input t-if="partner_id" type="hidden" name="partner_id" t-att-value="partner_id"/>
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
            <div class="clearfix"/>
        </div>
    </template>
</odoo>
