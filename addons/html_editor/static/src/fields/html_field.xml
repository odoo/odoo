<templates xml:space="preserve">
    <t t-name="html_editor.HtmlField">
        <t t-if="this.displayReadonly">
            <HtmlViewer
                config="this.getReadonlyConfig()"
                migrateHTML="false"/>
        </t>
        <div t-else="" class="h-100" t-att-class="{'o_show_codeview': this.state.showCodeView, 'o_field_translate': this.isTranslatable}">
            <t t-if="this.state.showCodeView">
                <textarea t-ref="codeView" class="o_codeview" t-att-value="this.value" t-on-change="this.onChange"/>
            </t>
            <t t-if="!this.sandboxedPreview">
                <Wysiwyg
                    config="this.getConfig()"
                    onLoad.bind="this.onEditorLoad"
                    contentClass="`note-editable ${this.state.showCodeView ? 'd-none' : ''}`"
                    onBlur.bind="this.onBlur"
                    t-key="this.wysiwygKey"/>
            </t>
            <t t-if="this.isTranslatable">
                <TranslationButton
                    fieldName="this.props.name"
                    record="this.props.record"
                />
            </t>
        </div>
        <div t-if="this.state.showCodeView || (this.sandboxedPreview and !this.props.readonly)" t-ref="codeViewButton" id="codeview-btn-group" class="btn-group" t-on-click="this.toggleCodeView">
            <button class="o_codeview_btn btn btn-primary">
                <i class="fa fa-code" />
            </button>
        </div>
    </t>
</templates>
