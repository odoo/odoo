-
  In order to test the Packs in OpenERP, we will try to sell a "KIT Shelf of 100cm" which is composed of "[PROFIL] Assembly Section" and "[SIDEPAN] Side Panel" having Phantom BOM.
-
  As all my data are already available, I will create an outgoing order picking for 2 "KIT Shelf of 100cm"
-
  !record {model: stock.picking, id: picking_out}:
    address_id: base.res_partner_address_tang
    company_id: base.main_company
    invoice_state: none
    move_lines:
      - company_id: base.main_company
        location_dest_id: stock.stock_location_customers
        location_id: stock.stock_location_stock
        name: KIT Shelf of 100cm
        product_id: product.product_product_kitshelfofcm0
        product_qty: 2.0
        product_uom: product.product_uom_unit
    move_type: direct
    type: out
-
  I validate the newly created picking.
-
  !python {model: stock.picking}: |
    self.draft_validate(cr, uid, [ref("picking_out")], {
        "active_ids": [ref("stock.menu_action_picking_tree")],
        "active_id": ref("stock.menu_action_picking_tree"), }
    )
-
  I check that my Picking of "KIT Shelf of 100cm" has been automatically
  converted to a picking of  "[PROFIL] Assembly Section" and "[SIDEPAN] Side Panel".
-
  !assert {model: stock.picking, id: picking_out, string: pack_of_beer_splitted}:
    - len(move_lines) >= 2
    - move_lines[0].product_id.id <> move_lines[1].product_id.id
    - move_lines[0].product_id.id in (ref('product.product_product_assemblysection0'), ref('product.product_product_sidepanel0'))
    - move_lines[1].product_id.id in (ref('product.product_product_assemblysection0'), ref('product.product_product_sidepanel0'))
    
