<?xml version="1.0" encoding="utf-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="l10n_in_pos.ReceiptHeader" t-inherit="point_of_sale.ReceiptHeader" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('pos-receipt-contact')]" position="after">
            <t t-if="order.partner_id and order.company?.country_id?.code == 'IN'">
                <div class="pos-receipt-center-align">
                    <div t-if="order.preset_id?.identification != 'address'" t-out="order.partner_id.name"/>
                    <t t-if="order.partner_id.phone">
                        <div>
                            <span>Phone: </span>
                            <t t-out="order.partner_id.phone" />
                        </div>
                    </t>
                    <br />
                </div>
            </t>
        </xpath>
    </t>

    <t t-name="l10n_in_pos.OrderReceipt" t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
        <xpath expr="//div[@class='pos-receipt-taxes']" position="inside">
            <t t-set="l10n_in_hsn_summary" t-value="order._prepareL10nInHsnSummary()"/>
            <table t-if="l10n_in_hsn_summary and header.company.country_id?.code === 'IN' and l10n_in_hsn_summary.items.length > 0" 
                class="l10n_in_hsn_summary_table mt-3 tax-table" t-att-class="receiptClasses.table">
                <thead>
                    <tr>
                        <th class="text-center fw-bolder" colspan="6">HSN Summary</th>
                    </tr>
                    <tr t-att-class="receiptClasses.thr">
                        <th>HSN Code</th>
                        <th>Rate%</th>
                        <th>CGST</th>
                        <th>SGST</th>
                        <th t-if="l10n_in_hsn_summary.has_igst">IGST</th>
                        <th t-if="l10n_in_hsn_summary.has_cess">CESS</th>
                    </tr>
                </thead>
                <tbody>
                    <tr t-foreach="l10n_in_hsn_summary.items" t-as="item" t-key="item_index" class="text-center">
                        <td t-out="item.l10n_in_hsn_code"/>
                        <td><t t-out="item.rate"/>%</td>
                        <td t-out="item.tax_amount_cgst"/>
                        <td t-out="item.tax_amount_sgst"/>
                        <td t-if="l10n_in_hsn_summary.has_igst" t-out="item.tax_amount_igst"/>
                        <td t-if="l10n_in_hsn_summary.has_cess" t-out="item.tax_amount_cess"/>
                    </tr>
                </tbody>
            </table>
        </xpath>
    </t>
</templates>
