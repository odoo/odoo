<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- Add a shortcut to wishlist / talks after registration -->
<template id="registration_complete" inherit_id="website_event.registration_complete">
    <xpath expr="//div[hasclass('row')]" position="after">
        <div t-if="event.website_track" class="row mt-5">
            <div class="col-12">
                <h3>Get prepared ...</h3>
                <p>Book your seat to the best talks by
                    <a t-att-href="'/event/%s/track' % (slug(event))">setting up your wishlist</a>
                </p>
            </div>
        </div>
    </xpath>
</template>

<template id="layout" inherit_id="website_event.layout">
    <xpath expr='//t[@t-call="website.layout"]' position="inside">
        <t t-set="pageName" t-value="'event'"/>
        <t t-set="head">
            <t t-raw="head"/>
            <t t-call="website_event_track_online.pwa_manifest"/>
        </t>
    </xpath>
</template>

<template id="index" inherit_id="website_event.index">
    <xpath expr='//t[@t-call="website.layout"]' position="inside">
        <t t-set="pageName" t-value="'event'"/>
        <t t-set="head">
            <t t-raw="head"/>
            <t t-call="website_event_track_online.pwa_manifest"/>
        </t>
    </xpath>
</template>

<template id="pwa_manifest">
    <link rel="manifest" href="/event/manifest.webmanifest"/>
    <link rel="apple-touch-icon" t-att-href="website.image_url(website, 'app_icon', size='192x192')"/>
    <meta name="theme-color" content="#875A7B"/>
</template>

<template id="assets_frontend" inherit_id="website.assets_frontend" name="Push Notifications Assets">
    <xpath expr="//script[last()]" position="after">
        <script type="text/javascript" src="/website_event_track_online/static/lib/idb-keyval/idb-keyval.js"/>
        <script type="text/javascript" src="/website_event_track_online/static/src/js/website_event_pwa_widget.js"/>
    </xpath>
    <xpath expr="//link[last()]" position="after">
        <link rel="stylesheet" type="text/scss" href="/website_event_track_online/static/src/scss/pwa_frontend.scss"/>
    </xpath>
</template>

</odoo>
