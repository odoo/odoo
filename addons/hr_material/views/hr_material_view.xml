<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <menuitem name="Materials" 
            parent="hr.menu_hr_root" 
            id="menu_material_title"
            sequence="5" />
        <menuitem name="Materials"
            id="menu_material_configuration"
            groups="base.group_hr_manager"
            parent="hr.menu_hr_configuration"
            sequence="41"/>

        <!--Maintenance Request Search View-->
        <record id="hr_material_maintenance_request_view_search" model="ir.ui.view">
            <field name="name">hr.material.maintenance_request.search</field>
            <field name="model">hr.material.maintenance_request</field>
            <field name="arch" type="xml">
                <search string="maintenance Request Search" version="7.0">
                    <field name="name"/>
                    <field name="category_id"/>
                    <field name="user_id"/>
                    <field name="material_id"/>
                    <field name="employee_id"/>
                    <field name="department_id"/>
                    <field name="stage_id"/>
                    <separator/>
                    <filter string="My Requests" icon="terp-accessories-archiver" domain="['|', ('employee_id.user_id', '=', uid), ('department_id.manager_id.user_id', '=', uid)]"/>
                    <separator/>
                    <filter string="Unread Messages" name="message_unread" domain="[('message_unread','=',True)]"/>
                    <group  expand='0' string='Group by...'>
                        <filter string='Users' icon="terp-personal" domain="[]" context="{'group_by': 'user_id'}"/>
                        <filter string='Category' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'category_id'}"/>
                        <filter string='Stages' icon="terp-mrp" domain="[]" context="{'group_by' : 'stage_id'}"/>
                        <filter string='Department' icon="terp-personal" domain="[]" context="{'group_by': 'department_id'}"/>
                        <filter string='Employee' icon="terp-personal" domain="[]" context="{'group_by': 'employee_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <!--Maintenance Request Form View-->
        <record id="hr_material_maintenance_request_view_form" model="ir.ui.view">
            <field name="name">hr.material.maintenance_request.form</field>
            <field name="model">hr.material.maintenance_request</field>
            <field name="arch" type="xml">
                <form string="Maintenance Request" version="7.0">
                    <header>
                        <field name="stage_id" widget="statusbar" clickable="true" readonly="1"/>
                    </header>
                    <sheet>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" string="Subject"/>
                            <h1>
                                <field name="name"/>
                            </h1>
                        </div>
                        <group col="4">
                            <field name="employee_id" on_change="onchange_dept_emp_id(employee_id,department_id)"/>
                            <field name="department_id" on_change="onchange_dept_emp_id(employee_id,department_id)"/>
                            <field name="material_id"  on_change="onchange_material_id(material_id)" context="{'default_category_id':category_id}"/>
                            <field name="category_id" groups="base.group_hr_manager" on_change="onchange_category_id(category_id)"/>
                            <field name="user_id"/>
                            <field name="priority"/>
                            <field name="request_date" groups="base.group_no_one"/>
                            <field name="close_date" groups="base.group_no_one"/>
                        </group>
                        <notebook>
                            <page string="Description">
                                <field name='description' placeholder="Describe here the issue you encounter with the material.."/>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--Maintenance Request Kanban View-->
        <record model="ir.ui.view" id="hr_material_maintenance_request_view_kanban">
            <field name="name">hr.material.maintenance_request.kanban</field>
            <field name="model">hr.material.maintenance_request</field>
            <field name="arch" type="xml">
                <kanban default_group_by="stage_id">
                    <field name="stage_id"/>
                    <field name="color"/>
                    <field name="priority"/>
                    <field name="user_id"/>
                    <field name="category_id"/>
                    <field name="message_summary"/>
                    <templates>
                        <t t-name="kanban-tooltip">
                           <ul class="oe_kanban_tooltip">
                              <li><b>Category:</b> <field name="category_id"/></li>
                              <li><b>Request to:</b> <field name="user_id"/></li>
                           </ul>
                        </t>
                        <t t-name="kanban-box">
                            <div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_global_click oe_semantic_html_override">
                                <div class="oe_dropdown_toggle oe_dropdown_kanban">
                                    <span class="oe_e">i</span>
                                    <ul class="oe_dropdown_menu">
                                        <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit...</a></li></t>
                                        <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                        <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                    </ul>
                                </div>
                                <div class="oe_kanban_content" tooltip="kanban-tooltip">
                                    <div>
                                        <b><field name="name"/></b> <br/>
                                        <span t-if="record.employee_id.raw_value"><field name="employee_id"/><br/></span>
                                        <span t-if="record.department_id.raw_value"><field name="department_id"/><br/></span>
                                        <span class="oe_grey" t-if="record.material_id.raw_value"><field name="material_id"/><br/></span>
                                    </div>
                                    <div class="oe_kanban_footer_left" style="margin-top:2px;">
                                        <t t-raw="record.message_summary.raw_value"/>
                                        <span t-if="record.category_id.raw_value"><field name="category_id"/></span>
                                    </div>
                                    <div class="oe_kanban_right">
	                                    <span class="oe_kanban_highlight" groups="base.group_user">
	                                        <t t-set="priority" t-value="record.priority.raw_value || 5"/>
	                                        <a type="object" name="set_priority" args="['3']" t-if="priority gt 3" title="Low Priority">
	                                           <img src="/web/static/src/img/icons/star-off.png" width="16" height="16"/>
	                                        </a>
	                                        <a type="object" name="set_priority" args="['4']" t-if="priority lte 3" title="Normal Priority">
	                                           <img t-attf-src="/web/static/src/img/icons/star-#{priority lte 3 ? 'on' : 'off'}.png" width="16" height="16"/>
	                                        </a>
	                                        <a type="object" name="set_priority" args="['2']" title="High Priority">
	                                           <img t-attf-src="/web/static/src/img/icons/star-#{priority lte 2 ? 'on' : 'off'}.png" width="16" height="16"/>
	                                        </a>
	                                        <a type="object" name="set_priority" args="['1']" title="Highest Priority">
	                                           <img t-attf-src="/web/static/src/img/icons/star-#{priority == 1 ? 'on' : 'off'}.png" width="16" height="16"/>
	                                        </a>
	                                    </span>
                                        <img t-att-src="kanban_image('res.users', 'image_small', record.user_id.raw_value)" t-att-title="record.user_id.value" width="24" height="24" class="oe_kanban_avatar"/>
                                    </div>
                                </div>
                                <div class="oe_clear"></div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <!--Maintenance Request Tree View-->
        <record id="hr_material_maintenance_request_view_tree" model="ir.ui.view">
            <field name="name">hr.material.maintenance_request.tree</field>
            <field name="model">hr.material.maintenance_request</field>
            <field name="arch" type="xml">
                <tree string="maintenance Request" fonts="bold:message_unread==True" version="7.0">
                    <field name="message_unread" invisible="1"/>
                    <field name="name"/>
                    <field name="request_date" groups="base.group_no_one"/>
                    <field name="employee_id"/>
                    <field name="user_id"/>
                    <field name="category_id" groups="base.group_hr_manager"/>
                    <field name="stage_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_hr_material_maintenance_request_form">
            <field name="name">Maintenance Requests</field>
            <field name="res_model">hr.material.maintenance_request</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_id" ref="hr_material_maintenance_request_view_kanban"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new maintenance request or send an email to *alias*(if alias is configured).
                </p><p>
                    Follow the process of the request and communicate with the collaborator.
                </p>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_hr_material_maintenance_request_link">
            <field name="name">Maintenance Requests </field>
            <field name="res_model">hr.material.maintenance_request</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{
                'search_default_category_id': [active_id], 
                'default_category_id': active_id,
            }</field>
            <field name="search_view_id" ref="hr_material_maintenance_request_view_search"/>
            <field name="view_id" ref="hr_material_maintenance_request_view_kanban"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new maintenance request or send an email to *alias*(if alias is configured).
                </p><p>
                    Follow the process of the request and communicate with the collaborator.
                </p>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_maintenance_request_link">
            <field name="name">Maintenance Requests </field>
            <field name="res_model">hr.material.maintenance_request</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{
                'search_default_material_id': [active_id], 
                'default_material_id': active_id,
            }</field>
            <field name="search_view_id" ref="hr_material_maintenance_request_view_search"/>
            <field name="view_id" ref="hr_material_maintenance_request_view_kanban"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new maintenance request or send an email to *alias*(if alias is configured).
                </p><p>
                    Follow the process of the request and communicate with the collaborator.
                </p>
            </field>
        </record>

        <menuitem name="Maintenance Requests" 
            groups="base.group_user"
            parent="menu_material_title"
            id="menu_m_request_form"
            action="action_hr_material_maintenance_request_form" 
            sequence="3"/>

        <!--Material Form View-->
        <record id="hr_material_view_form" model="ir.ui.view">
            <field name="name">hr.material.form</field>
            <field name="model">hr.material</field>
            <field name="arch" type="xml">
                <form string="Materials" version="7.0">
                    <sheet>
                        <div class="oe_title">
                            <label for="name" class="oe_edit_only" string="Name"/>
                            <h1><field name="name" string="Name"/></h1>
                        </div>
                        <div class="oe_right oe_button_box" name="buttons">
	                        <button name="%(action_maintenance_request_link)d" 
	                            type="action"
	                            class="oe_stat_button"
	                            icon="fa-ticket">
	                            <field string="Maintenance" name="maintenance_count" widget="statinfo"/>
	                        </button>
	                    </div>
                        <group>
	                        <group>
	                            <field name="category_id" groups="base.group_hr_manager" on_change="onchange_category_id(category_id)"/>
	                            <field name="material_assign_to" on_change="onchange_material_assign_to(material_assign_to)"/>
	                        </group>
	                        <group>
	                            <field name="user_id"/>
	                            <field name="employee_id" string="Employee" attrs="{'invisible': [('material_assign_to', '=', 'department')]}"/>
	                            <field name="department_id" string="Department" attrs="{'invisible': [('material_assign_to', '=', 'employee')]}"/>
	                        </group>
	                        <group>
	                            <field name="serial_no"/>
	                        </group>
	                        <group>
	                            <field name="scrap_date" groups="base.group_no_one"/>
	                            <field name="assign_date" groups="base.group_no_one"/>
	                        </group>
                        </group>
                        <notebook>
                            <page string="Description">
                                <field name="note"/>
                            </page>
                            <page string="Product Information">
                                <group col="4">
                                    <field name="partner_id"/>
                                    <field name="cost"/>
                                    <field name="model"/>
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record>

        <!--material Kanaban View-->
        <record model="ir.ui.view" id="hr_material_view_kanban">
           <field name="name">hr.material.kanban</field>
           <field name="model">hr.material</field>
           <field name="arch" type="xml">
               <kanban default_group_by="category_id">
                   <field name="name"/>
                   <field name="color"/>
                   <field name="user_id"/>
                   <field name="category_id"/>
                   <field name="serial_no"/>
                   <field name="model"/>
                   <field name="message_summary"/>
                   <field name="maintenance_ids"/>
                   <templates>
                       <t t-name="kanban-tooltip">
                           <ul class="oe_kanban_tooltip">
                               <li><b>Serial Number:</b> <field name="serial_no"/></li>
                               <li><b>Model Number:</b> <field name="model"/></li>
                           </ul>
                       </t>
                       <t t-name="kanban-box">
                           <div t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_global_click">
                               <div class="oe_dropdown_toggle oe_dropdown_kanban">
                                   <span class="oe_e">Ã­</span>
                                   <ul class="oe_dropdown_menu">
                                       <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit...</a></li></t>
                                       <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                       <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                   </ul>
                               </div>
   
                               <div class="oe_kanban_content" tooltip="kanban-tooltip">
                                   <div><b><field name="name"/><span t-if="record.category_id.raw_value">(<field name="category_id"/>)</span></b></div>
                                   <div>
                                       <span t-if="record.employee_id.raw_value"><field name="employee_id"/><br/></span>
                                       <span t-if="record.department_id.raw_value"><field name="department_id"/><br/></span>
                                       <a t-if="record.maintenance_ids.raw_value"  type="action" name="%(action_maintenance_request_link)d" style="margin-right: 5px">
                                           <t t-raw="record.maintenance_ids.raw_value.length"/> Maintenance Request
                                       </a>
                                       <div class="oe_kanban_footer_left" style="margin-top:2px;">
                                           <span t-if="record.serial_no.raw_value"><field name="serial_no"/><br/></span>
                                           <span t-if="!record.employee_id.raw_value and !record.department_id.raw_value">Unassigned<br/></span>
                                       </div>
                                   </div>
                                   <div class="oe_kanban_bottom_right">
                                       <img t-att-src="kanban_image('hr.employee', 'image_small', record.employee_id.raw_value)" t-att-title="record.employee_id.value" width="27" height="27" class="oe_kanban_avatar"/>
                                   </div>
                                   <div class="oe_kanban_footer_left" style="margin-top:5px;">
                                       <t t-raw="record.message_summary.raw_value"/>
                                       <span t-if="record.model.raw_value"><field name="model"/></span>
                                   </div>
                               </div>
                               <div class="oe_clear"></div>
                           </div>
                       </t>
                   </templates>
               </kanban>
           </field>
        </record>

        <!--Material Tree View-->
        <record id="hr_material_view_tree" model="ir.ui.view">
            <field name="name">hr.material.tree</field>
            <field name="model">hr.material</field>
            <field name="arch" type="xml">
                <tree string="Assign To Employee"  fonts="bold:message_unread==True" version="7.0">
                    <field name="message_unread" invisible="1"/>
                    <field name="name"/>
                    <field name="employee_id" string="Employee"/>
                    <field name="department_id" string="Department"/>
                    <field name="assign_date" groups="base.group_no_one"/>
                    <field name="serial_no"/>
                    <field name="user_id"/>
                    <field name="category_id"/>
                    <field name="partner_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <!--Material Search View-->
        <record id="hr_material_view_search" model="ir.ui.view">
            <field name="name">hr.material.search</field> 
            <field name="model">hr.material</field>
            <field name="arch" type="xml">
                <search string="Search" version="7.0">
                    <field name="name"/>
                    <field name="serial_no"/>
                    <field name="category_id"/>
                    <field name="employee_id"/>
                    <field name="department_id"/>
                    <field name="model"/>
                    <filter string="New" help="Unassigned" icon="terp-accessories-archiver" domain="[('employee_id', '=', False), ('department_id', '=', False)]"/>
                    <filter string="To Do" help="Under Maintenance" icon="terp-accessories-archiver" domain="[('maintenance_ids', '!=', False), ('maintenance_ids.stage_id.fold', '=', False)]"/>
                    <filter string="Assigned" icon="terp-accessories-archiver" domain="['|', ('employee_id', '!=', False), ('department_id', '!=', False)]"/>
                    <separator/>
                    <filter string="My Materials" icon="terp-accessories-archiver" domain="['|', ('employee_id.user_id', '=', uid), ('department_id.manager_id.user_id', '=', uid)]"/>
                    <separator/>
                    <filter string="Unread Messages" name="message_unread" domain="[('message_unread','=',True)]"/>
                    <group  expand='0' string='Group by...'>
                        <filter string='Users' icon="terp-personal" domain="[]" context="{'group_by': 'user_id'}"/>
                        <filter string='Category' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by': 'category_id'}"/>
                        <filter string='Assigned to' help="Assigned to Employees and Departments" icon="terp-personal" domain="[]" context="{'group_by': 'material_assign_to'}"/>
                        <filter string='Department' help="Assigned to Departments" icon="terp-personal" domain="[]" context="{'group_by': 'department_id'}"/>
                        <filter string='Employee' help="Assigned to Employees" icon="terp-personal" domain="[]" context="{'group_by': 'employee_id'}"/>
                        <filter string='Supplier' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by': 'partner_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_hr_material_form">
            <field name="name">Materials</field>
            <field name="res_model">hr.material</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_id" ref="hr_material_view_kanban"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new Engine.
                </p><p>
                    This application helps you to track all material allocated to employees. 
                    Create some laptop, printer or phone and link each material to an employee or departement.
                    You will manage allocations, issues and mainteannce of material.
                </p>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_hr_material_link">
            <field name="name">Materials </field>
            <field name="res_model">hr.material</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="context">{
                'search_default_category_id': [active_id], 
                'default_category_id': active_id,
            }</field>
            <field name="search_view_id" ref="hr_material_view_search"/>
            <field name="view_id" ref="hr_material_view_kanban"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new Engine.
                </p><p>
                    This application helps you to track all material allocated to employees. 
                    Create some laptop, printer or phone and link each material to an employee or departement.
                    You will manage allocations, issues and mainteannce of material.
                </p>
            </field>
        </record>

        <menuitem name="Materials" parent="menu_material_title" 
            groups="base.group_hr_manager,base.group_user" 
            id="menu_hr_material_form" 
            action="action_hr_material_form" sequence="2"/>

        <act_window
            id="act_hr_material_maintenance_request"
            name="Maintenance Request"
            res_model="hr.material.maintenance_request"
            src_model="hr.material"
            view_mode="kanban,form,tree"
            domain="[('material_id', '=', active_id)]"
            context="{'default_material_id': active_id}"
            view_type="form"/>

        <!--Material Category From View-->
        <record id="hr_material_category_view_form" model="ir.ui.view">
            <field name="name">hr.material.category.form</field>
            <field name="model">hr.material.category</field>
            <field name="arch" type="xml">
                <form string="Material Categories" version="7.0">
                    <sheet>
                    <div class="oe_title">
                        <label for="name" class="oe_edit_only" string="Category Name"/>
                        <h1>
                            <field name="name"/>
                        </h1>
                    </div>
                    <div class="oe_right oe_button_box" name="buttons">
                        <button name="%(action_hr_material_link)d" 
                            class="oe_stat_button"
                            icon="fa-laptop" 
                            type="action">
                            <field string="Material" name="material_count" widget="statinfo"/>
                        </button>
                        <button name="%(action_hr_material_maintenance_request_link)d" 
                            type="action"
                            class="oe_stat_button"
                            icon="fa-ticket">
                            <field string="Maintenance" name="maintenance_count" widget="statinfo"/>
                        </button>
                    </div>
                    <group>
                        <group col="4">
                            <field name="user_id"/>
                        </group>
                        <group name="group_alias" attrs="{'invisible': [('alias_domain', '=', False)]}">
                            <label for="alias_name" string="Email Alias"/>
                            <div name="alias_def">
                                <field name="alias_id" class="oe_read_only oe_inline"
                                        string="Email Alias" required="0"/>
                                <div class="oe_edit_only oe_inline" name="edit_alias" style="display: inline;" >
                                    <field name="alias_name" class="oe_inline"/>@<field name="alias_domain" class="oe_inline" readonly="1"/>
                                </div>
                            </div>
                        </group>
                    </group>
                    <group string="Comments">
                        <field name="note" nolabel="1"/>
                    </group>
                    </sheet>
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers"/>
                        <field name="message_ids" widget="mail_thread"/>
                    </div>
                </form>
            </field>
        </record> 

        <!--Material Category Tree View-->
        <record id="hr_material_category_view_tree" model="ir.ui.view">
            <field name="name">hr.material.category.tree</field>
            <field name="model">hr.material.category</field>
            <field name="arch" type="xml">
                <tree string="Assign To Employee" version="7.0">
                    <field name="name" string="Name"/>
                    <field name="user_id"/>
                </tree>
            </field>
        </record>

        <!--Material Category Kanban View-->
        <record model="ir.ui.view" id="hr_material_category_view_kanban">
            <field name="name">hr.material.category.kanban</field>
            <field name="model">hr.material.category</field>
            <field name="arch" type="xml">
                <kanban version="7.0" class="oe_background_grey">
                    <field name="name"/>
                    <field name="color"/>
                    <field name="material_ids"/>
                    <field name="maintenance_ids"/>
                    <field name="user_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div style="width: 220px;min-height: 160px;" t-attf-class="oe_kanban_color_#{kanban_getcolor(record.color.raw_value)} oe_kanban_card oe_kanban_project oe_kanban_global_click">
                                <div class="oe_dropdown_toggle oe_dropdown_kanban">
                                    <span class="oe_e">Ã­</span>
                                    <ul class="oe_dropdown_menu">
                                        <t t-if="widget.view.is_action_enabled('edit')"><li><a type="edit">Edit</a></li></t>
                                        <t t-if="widget.view.is_action_enabled('delete')"><li><a type="delete">Delete</a></li></t>
                                        <li><ul class="oe_kanban_colorpicker" data-field="color"/></li>
                                    </ul>
                                </div>
                                <div class="oe_kanban_content">
                                    <h4><field name="name"/></h4>
                                    <div class="oe_kanban_alias" t-if="record.alias_id.value">
                                        <span class="oe_e oe_e_alias">%%</span><small><field name="alias_id"/></small>
                                    </div>
                                    <div style="margin: 4px 0">
                                        <a t-if="record.material_ids.raw_value"  type="action" name ="%(action_hr_material_link)d" style="margin-right: 10px">
                                            <t t-raw="record.material_ids.raw_value.length"/> Materials
                                        </a>
                                        <a t-if="record.maintenance_ids.raw_value"  type="action" name="%(action_hr_material_maintenance_request_link)d" style="margin-right: 5px">
                                            <t t-raw="record.maintenance_ids.raw_value.length"/> Maintenance
                                        </a>
                                    </div>
                                    <div class="oe_kanban_bottom_right">
                                        <img t-att-src="kanban_image('res.users', 'image_small', record.user_id.raw_value)" t-att-title="record.user_id.value" width="30" height="30" class="oe_kanban_avatar" t-if="record.user_id.value"/>
                                    </div>
                                </div>
                                <div class="oe_clear"></div>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <!--Material Category Search View-->
        <record id="hr_material_category_view_search" model="ir.ui.view">
            <field name="name">hr.material.category.search</field>
            <field name="model">hr.material.category</field>
            <field name="arch" type="xml">
                <search string="Search" version="7.0">
                    <field name="name" string="Category Name" filter_domain="[('name','ilike',self)]"/>
                    <group  expand='0' string='Group by...'>
                        <filter string='Responsible' icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'user_id'}"/>
                    </group>
                </search>
            </field>
        </record>

         <record model="ir.actions.act_window" id="action_hr_material_category_form">
            <field name="name">Material Categories</field>
            <field name="res_model">hr.material.category</field>
            <field name="view_mode">kanban,tree,form</field>
            <field name="view_id" ref="hr_material_category_view_kanban"/>
            <field name="help" type="html">
                <p class="oe_view_nocontent_create">
                    Click to add a new material category.
                </p>
            </field>
        </record>

        <menuitem name="Material Categories"
            id="menu_material_cat"
            groups="base.group_hr_manager"
            action="action_hr_material_category_form"
            parent="menu_material_title" sequence="1"/>

        <!-- Maintenance Request Stages -->
        <record id="maintenance_request_stage_search" model="ir.ui.view">
            <field name="name">maintenance.request.stage.search</field>
            <field name="model">maintenance.request.stage</field>
            <field name="arch" type="xml">
                <search string="Maintenance Request Stages">
                   <field name="name" string="Maintenance Request Stages"/>
                </search>
            </field>
        </record>

        <record id="maintenance_request_stage_form" model="ir.ui.view">
            <field name="name">maintenance.request.stage.form</field>
            <field name="model">maintenance.request.stage</field>
            <field name="arch" type="xml">
                <form string="Maintenance Request Stage" version="7.0">
                    <group>
                        <field name="name"/>
                        <field name="sequence"/>
                        <field name="fold"/>
                    </group>
                </form>
            </field>
        </record>

        <record id="maintenance_request_stage_tree" model="ir.ui.view">
            <field name="name">maintenance.request.stage.tree</field>
            <field name="model">maintenance.request.stage</field>
            <field name="arch" type="xml">
                <tree string="Maintenance Request Stage">
                    <field name="sequence" widget="handle"/>
                    <field name="name"/>
                    <field name="fold"/>
                </tree>
            </field>
        </record>

        <record id="open_maintenance_request_stage" model="ir.actions.act_window">
            <field name="name">Stages</field>
            <field name="res_model">maintenance.request.stage</field>
            <field name="view_type">form</field>
            <field name="view_id" ref="maintenance_request_stage_tree"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to add a stage in the maintenance request.
              </p>
            </field>
        </record>

        <menuitem name="Stages"
            parent="menu_material_configuration"
            id="menu_material_stage_configuration"
            action="open_maintenance_request_stage"
            sequence="2"/>

    </data>
</openerp>
