<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">
        <!-- After installation of the module, open the related menu -->
        <record id="base.open_menu" model="ir.actions.todo">
            <field name="action_id" ref="hr.action_client_hr_menu"/>
            <field name="state">open</field>
        </record>
        <!-- notify all employees of module installation -->
        <record model="mail.message" id="module_install_notification">
            <field name="model">mail.group</field>
            <field name="res_id" ref="mail.group_all_employees"/>
            <field name="type">notification</field>
            <field name="subtype_id" ref="mail.mt_comment"/>
            <field name="subject">Employee Appraisals application installed!</field>
            <field name="body"><![CDATA[<p>Manage employee reviews: you can define an appraisal campaign with several steps, with specific appraisal surveys according to hierarchy levels. Appraisals filled by employees may be exported as pdf files.</p>]]></field>
        </record>


        <record forcecreate="True" id="ir_cron_scheduler_appraisal" model="ir.cron">
           <field name="name">Run Employee Appraisal</field>
           <field eval="True" name="active"/>
           <field name="user_id" ref="base.user_root"/>
           <field name="interval_number">1</field>
           <field name="interval_type">days</field>
           <field name="numbercall">-1</field>
           <field eval="'hr.employee'" name="model"/>
           <field eval="'run_employee_appraisal'" name="function" />
           <field eval="'(False,)'" name="args" />
        </record>

        <record id="send_appraisal_template" model="mail.template">
            <field name="name">Appraisal Survey - Send by Email</field>
            <field name="model_id" ref="hr_appraisal.model_hr_appraisal" />
            <field name="auto_delete" eval="True" />
            <field name="subject">Appraisal Regarding</field>
            <field name="email_to">${ctx['email']}</field>
            <field name="body_html">
                <![CDATA[
                <div style="font-family: 'Lucida Grande', Ubuntu, Arial, Verdana, sans-serif; font-size: 12px; color: rgb(34, 34, 34); ">
                    <p>Hello ${ctx['employee'].name},</p>
                    % if ctx['employee'].id == object.employee_id.id:
                        <p>We are conducting your Appraisal and your response would be appreciated.</p>
                    % else:
                        <p>We are conducting an Appraisal for ${object.employee_id.name}, and your response would be appreciated.</p>
                    % endif
                    <p><a href="__URL__">Please, click here to start Appraisal</a></p>
                    <p>Kindly post your response for the appraisal till : ${object.date_close}</p>
                    <p>Thanks for your participation!</p>
                </div>
                ]]>
            </field>
        </record>
        <record id="mt_appraisal_new" model="mail.message.subtype">
            <field name="name">Appraisal Created</field>
            <field name="res_model">hr.appraisal</field>
            <field name="default" eval="True"/>
            <field name="hidden" eval="False"/>
            <field name="description">Appraisal Created</field>
        </record>
        <record id="mt_appraisal_meeting" model="mail.message.subtype">
            <field name="name">Meeting Scheduled</field>
            <field name="res_model">hr.appraisal</field>
            <field name="default" eval="False"/>
            <field name="description">Meeting Scheduled</field>
        </record>
        <record id="mt_appraisal_sent" model="mail.message.subtype">
            <field name="name">Appraisal sent</field>
            <field name="res_model">hr.appraisal</field>
            <field name="default" eval="False"/>
            <field name="description">Appraisal Sent</field>
        </record>
    </data>
</odoo>
