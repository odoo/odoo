<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="event_event_view_form" model="ir.ui.view">
        <field name="name">event.event.view.form.inherit.website</field>
        <field name="model">event.event</field>
        <field name="priority" eval="5"/>
        <field name="inherit_id" ref="event.view_event_form"/>
        <field name="arch" type="xml">
            <xpath expr="//group[@name='right_event_details']/field[@name='company_id']" position="after">
                <field name="website_id" options="{'no_create': True}" domain="['|', ('company_id', '=', False), ('company_id', '=', company_id)]" groups="website.group_multi_website"/>
                <field name="publish_on" invisible="1"/> <!-- Needed for next fields and elements -->
                <field string="Published" name="website_published" widget="boolean_toggle" readonly="publish_on"></field>
                <label invisible="website_published" for="publish_on" string="Publish on"/>
                <div invisible="website_published" class="o_row">
                    <field name="publish_on" widget="datetime"/>
                    <button name="action_unschedule" type="object" invisible="not publish_on">Unschedule</button>
                </div>
                <label for="website_visibility" string="Visibility"/>
                <div class="d-flex row">
                    <div class="col-5 pe-0">
                        <field name="website_visibility"/>
                    </div>
                    <div class="col-7 ps-0">
                        <button name="website_publish_button" type="object" string="Publish"
                            invisible="website_published or website_visibility == 'public'" class="btn btn-sm btn-link h-100 ms-2"/>
                        <span invisible="not website_published or website_visibility == 'public'" class="ms-2">
                            <field name="event_register_url" widget="CopyClipboardButton"/>
                        </span>
                    </div>
                </div>
            </xpath>
            <xpath expr="//field[@name='tag_ids']" position="attributes">
                <attribute name="context">{'default_website_id': website_id}</attribute>
                <attribute name="groups">website.group_multi_website</attribute>
            </xpath>
            <xpath expr="//button[@name='%(event.event_registration_action_stats_from_event)d']" position="before">
                <field name="is_published" widget="website_redirect_button"/>
            </xpath>
            <xpath expr="//div[hasclass('oe_title')]" position="after">
                <div name="event_menu_configuration" groups="base.group_no_one">
                    <label for="website_menu" string="Website Submenu" class="me-1"/>
                    <field name="website_menu" class="me-3"/>
                    <!-- hidden sub-menus, they are triggered all at once based on "website_menu" -->
                    <label for="community_menu" string="Community" invisible="1" class="me-1"/>
                    <field name="community_menu" invisible="1" class="me-3"/>  <!-- The computation relies on `_origin` for an `onchange` context. Changed from a template that has no community menu to one that has a community menu. -->
                </div>
            </xpath>
            <field name="tag_ids" position="attributes">
                <attribute name="domain">['|', ('category_id.website_id', '=', website_id), ('category_id.website_id', '=', False)]</attribute>
                <attribute name="invisible">not website_id</attribute>
            </field>

            <field name="tag_ids" position="after">
                <field name="tag_ids" widget="many2many_tags" options="{'color_field': 'color', 'on_tag_click': 'edit_color', 'no_quick_create': True}" invisible="website_id"></field>
            </field>
        </field>
    </record>

    <record id="event_event_view_list" model="ir.ui.view">
        <field name="name">event.event.view.list.inherit.website</field>
        <field name="model">event.event</field>
        <field name="inherit_id" ref="event.view_event_tree"/>
        <field name="arch" type="xml">
            <field name="company_id" position="after">
                <field name="website_id" groups="website.group_multi_website" domain="['|', ('company_id', '=', company_id), ('company_id', '=', False)]" optional="show"/>
            </field>
        </field>
    </record>

    <record id="event_event_view_search" model="ir.ui.view">
        <field name="name">event.event.search.inherit.website</field>
        <field name="model">event.event</field>
        <field name="inherit_id" ref="event.view_event_search"/>
        <field name="arch" type="xml">
            <xpath expr="//filter[@name='upcoming']" position="after">
                <separator/>
                <filter string="Published" name="filter_published" domain="[('website_published', '=', True)]"/>
            </xpath>
        </field>
    </record>
</odoo>
