<?xml version="1.0" ?>
<odoo><data>

<!-- Slide template for the fullscreen mode -->
<template id="slide_fullscreen" name="Fullscreen">
    <t t-call="website.layout">
        <div class="o_wslides_fs_main d-flex flex-column"
            t-att-data-user-id="user.id"
            t-att-data-course-name="slide.channel_id.name"
            t-att-data-course-id="slide.channel_id.id"
            t-att-data-course-slug="slug(slide.channel_id)"
            t-att-data-slide-id="slide.id">
            <div class="o_wslides_slide_fs_header d-flex w-100">
                <a class="p-3 h-100 d-inline-block o_wslides_fs_toggle_sidebar active text-uppercase" href="#">
                    <i class="fa fa-bars"/> Lessons
                </a>
                <a class="p-3 h-100 d-inline-block text-uppercase" t-attf-href="/slides/slide/#{slug(slide)}" target="new">
                    <i class="fa fa-pencil"/> Write a review
                </a>
                <div class="p-3 h-100 d-inline-block o_wslides_fs_slide_title font-weight-bold">
                    <t>
                        <t t-call="website_slides.slide_icon">
                            <t t-set="icon_class" t-value="'mr-2 text'"/>
                        </t>
                        <span class="o_wslides_fs_slide_title_span" t-esc="slide.name"/>
                    </t>
                </div>
                <div class="ml-auto p-3 text-uppercase">
                    <a t-attf-href="/slides/">Back to courses</a>
                </div>
            </div>
            <div class="o_wslides_fs_container d-flex flex-wrap">
                <div class="col-2 o_wslides_fs_sidebar p-0">
                    <div class="o_wslides_fs_sidebar_header mt-2 p-2">
                        <a t-attf-href="/slides/#{slug(slide.channel_id)}">
                            <span class="h3" t-field="slide.channel_id.name"/>
                        </a>
                        <div class="mt-2">
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" t-attf-style="width: #{slide.channel_id.completion}%" t-att-aria-valuenow="slide.channel_id.completion" aria-valuemin="0" aria-valuemax="100"></div>
                            </div>
                            <span class="o_wslides_progress_percentage" t-esc="slide.channel_id.completion"/> %
                        </div>
                    </div>
                    <div class="o_wslides_fs_category mt-4">
                        <t t-if="uncategorized_slides" t-call="website_slides.slide_fullscreen_sidebar_category">
                            <t t-set="slides" t-value="uncategorized_slides"/>
                            <t t-set="current_slide" t-value="slide"/>
                        </t>
                        <t t-foreach="slide.channel_id.category_ids" t-as="category">
                            <t t-call="website_slides.slide_fullscreen_sidebar_category">
                                <t t-set="slides" t-value="category.slide_ids"/>
                                <t t-set="current_slide" t-value="slide"/>
                            </t>
                        </t>
                    </div>
                </div>
                <div class="col-10 o_wslides_fs_content p-0"></div>
            </div>
        </div>
    </t>
</template>

<template id="slide_fullscreen_sidebar_category" name="Slides category template for fullscreen view side bar">
    <div class="card o_wslides_fs_sidebar_section mb-3" t-attf-id="category-collapse-#{category.id if category else 0}">
        <div class="card-header" t-attf-id="#category-title-#{category.id if category else 0}" data-toggle="collapse" t-attf-data-target="#category-#{category.id if category else 0}" aria-expanded="true" t-attf-aria-controls="category-#{category.id if category else 0}">
            <t t-if="category">
                <span class="h6 text-uppercase" t-field="category.name"/>
            </t>
            <t t-else="">
                <span class="h6 text-uppercase">Uncategorized</span>
            </t>
        </div>
        <div t-attf-id="category-#{category.id if category else 0}" class="collapse show" t-attf-aria-labelledby="#category-title-#{category.id if category else 0}" t-attf-data-parent="#category-collapse-#{category.id if category else 0}">
          <div class="card-body p-0" style="background-color: transparent !important;"><!-- inline style as boostrap used !important property to force color on .card-body -->
            <ul class="o_wslides_fs_sidebar_list list-group list-unstyled collapse show p-0 m-0" t-att-id="('collapse-%s') % (category.id if category else 0)" >
                <t t-foreach="slides" t-as="slide">
                    <t t-set="slide_completed" t-value="channel_progress[slide.id].get('completed')"/>
                    <li t-attf-class="o_wslides_fs_sidebar_list_item d-flex p-1 font-weight-bold #{'active' if slide.id == current_slide.id else ''}"
                        t-att-data-id="slide.id"
                        t-att-data-name="slide.name"
                        t-att-data-type="slide.slide_type"
                        t-att-data-has-question="1 if slide.question_ids else 0"
                        t-att-data-is-quiz="0"
                        t-att-data-completed="1 if slide_completed else 0"
                        t-att-data-embed-code="slide.embed_code if slide.slide_type in ['video', 'document', 'presentation', 'infographic'] else False"
                        t-att-data-readonly="not channel_progress[slide.id]"
                        >
                        <div class="mr-2 ml-2 flex-grow">
                            <i t-if="not slide_completed" class="fa fa-circle-thin" t-att-data-slide-id="slide.id"/>
                            <i t-if="slide_completed" class="fa fa-check-circle text-success" t-att-data-slide-id="slide.id"/>
                        </div>
                        <div class="">
                            <t t-call="website_slides.slide_icon">
                                <t t-set="icon_class" t-value="'mr-2'"/>
                                <t t-set="slide" t-value="slide"/>
                            </t>
                            <t t-esc="slide.name"/>

                            <ul t-if="slide.link_ids" class="list-group list-unstyled">
                                <li t-foreach="slide.link_ids" t-as="link">
                                    <a class="btn btn-link" t-att-href="link.link" target="new"><i class="fa fa-link"/> <span t-esc="link.name"/></a>
                                </li>
                            </ul>
                        </div>
                    </li>
                    <li t-if="slide.question_ids" class="o_wslides_fs_sidebar_list_item"
                        t-att-data-id="slide.id"
                        t-att-data-name="slide.name"
                        t-att-data-type="slide.slide_type"
                        t-att-data-has-question="1 if slide.question_ids else 0"
                        t-att-data-is-quiz="1">
                        <span class="ml-4">
                            <i class="fa fa-flag-checkered"/> Quizz: <t t-esc="slide.name"/>
                        </span>
                    </li>
                </t>
            </ul>

          </div>
        </div>
    </div>
</template>

</data></odoo>
