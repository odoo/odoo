<?xml version="1.0" ?>
<odoo>

    <!-- Mail template are declared in a NOUPDATE block
         so users can freely customize/delete them -->
    <data noupdate="1">
        <!--Email template -->
        <record id="email_template_edi_invoice" model="mail.template">
            <field name="name">Invoice: Sending</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="email_from">{{ (object.invoice_user_id.email_formatted or object.company_id.email_formatted or user.email_formatted) }}</field>
            <field name="partner_to" eval="False"/>
            <field name="use_default_to" eval="True"/>
            <field name="subject">{{ object.company_id.name }} Invoice (Ref {{ object.name or 'n/a' }})</field>
            <field name="description">Sent to customers with their invoices in attachment</field>
            <field name="body_view_id" ref="email_body_edi_invoice"/>
            <field name="body_html"></field>
            <field name="report_template_ids" eval="[]"/>
            <field name="auto_delete" eval="True"/>
        </record>

        <record id="mail_template_data_payment_receipt" model="mail.template">
            <field name="name">Payment: Payment Receipt</field>
            <field name="model_id" ref="account.model_account_payment"/>
            <field name="subject">{{ object.company_id.name }} Payment Receipt (Ref {{ object.name or 'n/a' }})</field>
            <field name="partner_to" eval="False"/>
            <field name="use_default_to" eval="True"/>
            <field name="description">Sent manually to customer when clicking on 'Send receipt by email' in payment action</field>
            <field name="body_view_id" ref="email_body_payment_receipt"/>
            <field name="body_html"></field>
            <field name="report_template_ids" eval="[(4, ref('account.action_report_payment_receipt'))]"/>
            <field name="auto_delete" eval="True"/>
        </record>
        <!-- Credit note template -->
        <record id="email_template_edi_credit_note" model="mail.template">
            <field name="name">Credit Note: Sending</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="email_from">{{ (object.invoice_user_id.email_formatted or object.company_id.email_formatted or user.email_formatted) }}</field>
            <field name="partner_to" eval="False"/>
            <field name="use_default_to" eval="True"/>
            <field name="subject">{{ object.company_id.name }} Credit Note (Ref {{ object.name or 'n/a' }})</field>
            <field name="description">Sent to customers with the credit note in attachment</field>
            <field name="body_view_id" ref="email_body_edi_credit_note"/>
            <field name="body_html"></field>
            <field name="report_template_ids" eval="[]"/>
            <field name="auto_delete" eval="True"/>
        </record>

        <!-- Self billing invoice template -->
        <record id="email_template_edi_self_billing_invoice" model="mail.template">
            <field name="name">Self-billing invoice: Sending</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="email_from">{{ (object.invoice_user_id.email_formatted or object.company_id.email_formatted or user.email_formatted) }}</field>
            <field name="partner_to" eval="False"/>
            <field name="use_default_to" eval="True"/>
            <field name="subject">{{ object.company_id.name }} Self-billing invoice (Ref {{ object.name or 'n/a' }})</field>
            <field name="description">Sent to customers with their self-billing invoices in attachment</field>
            <field name="body_view_id" ref="email_body_edi_self_billing_invoice"/>
            <field name="body_html"></field>
            <field name="report_template_ids" eval="[]"/>
            <field name="auto_delete" eval="True"/>
        </record>

        <!-- Self billing credit note template -->
        <record id="email_template_edi_self_billing_credit_note" model="mail.template">
            <field name="name">Self-billing credit note: Sending</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="email_from">{{ (object.invoice_user_id.email_formatted or object.company_id.email_formatted or user.email_formatted) }}</field>
            <field name="partner_to" eval="False"/>
            <field name="use_default_to" eval="True"/>
            <field name="subject">{{ object.company_id.name }} Self-billing credit note (Ref {{ object.name or 'n/a' }})</field>
            <field name="description">Sent to customers with the self-billing credit note in attachment</field>
            <field name="body_view_id" ref="email_body_edi_self_billing_credit_note"/>
            <field name="body_html"></field>
            <field name="report_template_ids" eval="[]"/>
            <field name="auto_delete" eval="True"/>
        </record>

        <!-- Invoice mail gateway failed -->
        <template id="email_template_mail_gateway_failed">
<p>
    Hi,
    <br/><br/>
    Your email has been discarded. the e-mail address you have used only accepts new invoices:
    <ul>
        <li>For new invoices, please ensure a PDF or electronic invoice file is attached</li>
        <li>To add information to a previously sent invoice, reply to your "sent" email</li>
    </ul>
    For any other question, write to <t t-esc="company_email"/>.
    <br/>
    --
    <br/>
    <t t-esc="company_name"/>
</p>
        </template>
       <record id="mail_template_einvoice_notification" model="mail.template">
            <field name="name">New eInvoices Notification</field>
            <field name="subject">New Electronic Invoices Received</field>
            <field name="email_from">{{ object.company_id.email_formatted }}</field>
            <field name="email_to">{{ object.incoming_einvoice_notification_email }}</field>
            <field name="use_default_to" eval="False"/>
            <field name="model_id" ref="account.model_account_journal"/>
            <field name="auto_delete" eval="True"/>
            <field name="description">Notification email for newly received eInvoices</field>
            <field name="body_view_id" ref="email_body_einvoice_notification"/>
            <field name="body_html"></field>
        </record>
        <record id="mail_template_invoice_subscriber" model="mail.template" forcecreate="1">
            <field name="name">Journal Notification</field>
            <field name="model_id" ref="account.model_account_move"/>
            <field name="subject">{{ object.company_id.name }} - New invoice in {{ object.journal_id.display_name or 'Invoices' }} journal</field>
            <field name="email_from">{{ object.invoice_user_id.email_formatted or object.company_id.email_formatted or user.email_formatted }}</field>
            <field name="use_default_to" eval="False"/>
            <field name="auto_delete" eval="True"/>
            <field name="body_view_id" ref="email_body_invoice_subscriber"/>
            <field name="body_html"></field>
        </record>
    </data>
</odoo>
