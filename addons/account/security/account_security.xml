<odoo>
<data noupdate="0">
    <!--
        There are 5 groups
        The way the groups work is different depending on whether `account`, `account_accountant` or `accountant` are installed.

        Invoicing only (account):
        ```
         group_account_invoice &#8680; group_account_manager   (only those two should be used)
                               &#11010;
                                 group_account_basic &#11010;   (those are only visible through a server action)
                              group_account_readonly &#8680; group_account_user
        ```

        Invoicing Enterprise (account_accountant):
        ```
        group_account_invoice &#8680; group_account_basic &#8680; group_account_manager (basic accounting group activated)
                                                    &#11010;
                             group_account_readonly &#8680; group_account_user    (these are still not visible)
        ```

        Invoicing + Accounting (accountant):
        ```
           group_account_invoice &#8680; group_account_basic &#11010;
                                group_account_readonly &#8680; group_account_user &#8680; group_account_manager
        ```
        `group_account_user` is almost (a bit more than) the sum of `group_account_invoice` and `group_account_readonly`
        `group_account_manager` is the king (except when Consolidation is installed, then there is a super-king)

        `group_account_invoice` can create/edit invoices, refunds, payments, etc but cannot see accounting related stuff (journal entries, reports, reconciliation,...)
        `group_account_basic` can do additional accounting features (eg. basic bank recon) but not journal entries
        `group_account_readonly` can see (and only see) everything, including the journal entries, advanced configuration, reports
        `group_account_user`  is the accountant: he can do everything except advanced config (accounting periods for instance)
        `group_account_manager` can edit some config that `group_account_user` cannot do

        When you have only Invoicing installed, only `group_account_invoice` and `group_account_manager` should be used. The others are giving a shallow access to Accounting features, but we want to remove that.
    -->

    <record model="ir.module.category" id="base.module_category_accounting_accounting">
        <field name="description">Helps you handle your invoices and accounting actions.

        Invoicing: Invoices, payments and basic invoice reporting.
        Administrator: full access including configuration rights.
        </field>
        <field name="sequence">7</field>
    </record>

    <record id="group_delivery_invoice_address" model="res.groups">
        <field name="name">Delivery Address</field>
        <field name="category_id" ref="base.module_category_hidden"/>
    </record>

    <record id="group_account_readonly" model="res.groups">
        <field name="name">Show Accounting Features - Readonly</field>
        <field name="category_id" ref="base.module_category_hidden"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_account_invoice" model="res.groups">
        <field name="name">Invoicing</field>
        <field name="sequence">20</field>
        <field name="category_id" ref="base.module_category_accounting_accounting"/>
        <field name="implied_ids" eval="[(4, ref('base.group_user'))]"/>
    </record>

    <record id="group_account_basic" model="res.groups">
        <field name="name">Basic</field>
        <field name="category_id" ref="base.module_category_hidden"/>
        <field name="implied_ids" eval="[(4, ref('group_account_invoice'))]"/>
    </record>

    <record id="group_account_user" model="res.groups">
        <field name="name">Show Full Accounting Features</field>
        <field name="category_id" ref="base.module_category_hidden"/>
        <field name="implied_ids" eval="[(4, ref('group_account_basic')), (4, ref('group_account_readonly'))]"/>
    </record>

    <record id="group_account_manager" model="res.groups">
        <field name="name">Administrator</field>
        <field name="sequence">50</field>
        <field name="category_id" ref="base.module_category_accounting_accounting"/>
        <field name="implied_ids" eval="[(4, ref('group_account_invoice'))]"/>
        <field name="user_ids" eval="[(4, ref('base.user_root')), (4, ref('base.user_admin'))]"/>
    </record>

    <record id="group_account_secured" model="res.groups">
        <field name="name">Show Inalterability Features</field>
        <field name="category_id" ref="base.module_category_usability"/>
    </record>

    <record id="group_warning_account" model="res.groups">
        <field name="name">A warning can be set on a partner (Account)</field>
        <field name="category_id" ref="base.module_category_hidden"/>
    </record>

    <record id="group_cash_rounding" model="res.groups">
        <field name="name">Allow the cash rounding management</field>
        <field name="category_id" ref="base.module_category_hidden"/>
    </record>

    <record id="group_sale_receipts" model="res.groups">
        <field name="name">Sale Receipt</field>
        <field name="category_id" ref="base.module_category_hidden"/>
    </record>
    <record id="group_purchase_receipts" model="res.groups">
        <field name="name">Purchase Receipt</field>
        <field name="category_id" ref="base.module_category_hidden"/>
    </record>

    <!-- Add a new setting that can be enabled to allow the user to "trust" a partner bank account -->
    <record model="ir.module.category" id="account.module_category_accounting_bank">
        <field name="name">Bank</field>
        <field name="parent_id" ref="base.module_category_accounting"/>
        <field name="sequence">50</field>
    </record>

    <record id="group_validate_bank_account" model="res.groups">
        <field name="name">Validate bank account</field>
        <field name="category_id" ref="account.module_category_accounting_bank"/>
        <field name="implied_by_ids" eval="[Command.link(ref('base.group_system'))]"/>
    </record>

</data>

<data noupdate="1">

    <!-- Billing record rules for account.move -->

    <!-- Portal for invoice move and invoice move lines -->
    <!-- Some modules (i.e. sale) restrict the access for some users
    We want the readonly group to still have the read access on all moves.-->
    <!-- Some modules (i.e. sale) restrict the access for some users
    We want the invoice group to still have all access on all moves.-->
    <!--
        Allow billing officers from accessing res.partner.bank
        This right is restricted in HR to prevent accessing
        employees bank account for non HR people.
    -->
    </data>
</odoo>
