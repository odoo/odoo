<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="point_of_sale.input">
        <div t-attf-class="{{this.props.class}} {{ this.state.isOpen ? 'flex-grow-1' : '' }} d-flex">
            <button t-if="this.props.isSmall"
                class="btn btn-light btn-lg lh-lg"
                t-on-click="() => {
                    this.state.isOpen = !this.state.isOpen;
                    this.props.isOpenCallback?.(this.state.isOpen);
                }">
                <i t-if="this.state.isOpen" class="fa fa-arrow-right"/>
                <t t-else="props.iconOnLeftSide" t-call="point_of_sale.inputIcon" />
            </button>
            <div t-if="!this.props.isSmall || this.state.isOpen"
                class="input-group">
                <div class="form-control form-control-lg input-container d-flex align-items-center bg-view"
                    t-att-class="{'is-invalid': !this.props.isValid(this.getValue())}">
                    <t t-if="this.props.iconOnLeftSide" t-call="point_of_sale.inputIcon" />
                    <input class="o_input border-0 mx-2 text-body" type="text" style="min-width: 60px;"
                        t-on-focus="ev=>ev.target.select()"
                        t-att-placeholder="this.props.placeholder"
                        t-ref="input"
                        t-att-value="this.getValue()"
                        t-on-input="(event) => this.setValue(event.target.value)"
                        t-att-readonly="this.props.readonly" />
                    <t t-if="!this.props.iconOnLeftSide" t-call="point_of_sale.inputIcon" />
                    <i t-att-class="{ 'invisible': !this.getValue() }" class="fa fa-times mx-2" t-on-click="() => this.setValue('')"/>
                </div>
            </div>
        </div>
    </t>
    <t t-name="point_of_sale.inputIcon">
        <i t-if="this.props.icon.type === 'fa'" t-attf-class="fa {{this.props.icon.value}} {{this.margin}}"/>
        <span t-if="this.props.icon.type === 'string'" t-attf-class="{{this.margin}}" t-esc="this.props.icon.value"/>
    </t>

</templates>
