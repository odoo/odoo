<?xml version="1.0" encoding="UTF-8" ?>
<templates id="template" xml:space="preserve">

    <t t-name="HomeCategoryBreadcrumb" owl="1">
        <span class="breadcrumb">
            <span class="breadcrumb-button breadcrumb-home"
                  t-on-click="trigger('switch-category', 0)">
                <i class="fa fa-home" role="img" aria-label="Home" title="Home"></i>
            </span>
        </span>
    </t>

    <t t-name="CategoryBreadcrumb" owl="1">
        <span class="breadcrumb">
            <img src="/point_of_sale/static/src/img/bc-arrow-big.png" class="breadcrumb-arrow"
                 alt="Slash" />
            <span class="breadcrumb-button"
                  t-on-click="trigger('switch-category', props.category.id)">
                <t t-esc="props.category.name"></t>
            </span>
        </span>
    </t>

    <t t-name="CategorySimpleButton" owl="1">
        <span class="category-simple-button"
              t-on-click="trigger('switch-category', props.category.id)">
            <t t-esc="props.category.name" />
        </span>
    </t>

    <t t-name="CategoryButton" owl="1">
        <span class="category-button" t-on-click="trigger('switch-category', props.category.id)">
            <div class="category-img">
                <img t-att-src="imageUrl" alt="Category" />
            </div>
            <div class="category-name">
                <t t-esc="props.category.name" />
            </div>
        </span>
    </t>

    <t t-name="ProductsWidgetControl" owl="1">
        <div>
            <header class="rightpane-header">
                <!-- Breadcrumbs -->
                <div class="breadcrumbs">
                    <HomeCategoryBreadcrumb />
                    <t t-foreach="props.breadcrumbs" t-as="category" t-key="category.id">
                        <CategoryBreadcrumb category="category" />
                    </t>
                </div>
                <!-- Searchbox -->
                <div class="searchbox">
                    <input t-ref="search-word-input" placeholder="Search Products"
                           t-on-keyup="updateSearch" />
                    <span class="search-clear left">
                        <i class="fa fa-search" />
                    </span>
                    <span class="search-clear right" t-on-click="clearSearch">
                        <i class="fa fa-remove" />
                    </span>
                </div>
            </header>
            <!-- Subcategories -->
            <t t-if="props.subcategories.length > 0">
                <div class="categories">
                    <div class="category-list-scroller touch-scrollable">
                        <div class="category-list"
                             t-att-class="{simple: !props.pos.config.iface_display_categ_images}">
                            <t t-foreach="props.subcategories" t-as="category" t-key="category.id">
                                <t t-if="props.pos.config.iface_display_categ_images">
                                    <CategoryButton category="category" />
                                </t>
                                <t t-else="">
                                    <CategorySimpleButton category="category" />
                                </t>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
        </div>
    </t>

    <t t-name="ProductDisplay" owl="1">
        <article class="product" tabindex="0" t-on-keypress="spaceClickProduct"
                 t-on-click="trigger('click-product', props.product)"
                 t-att-data-product-id="props.product.id"
                 t-attf-aria-labelledby="article_product_{{props.product.id}}">
            <div class="product-img">
                <img t-att-src="imageUrl" t-att-alt="props.product.display_name" />
                <span class="price-tag">
                    <t t-esc="price" />
                </span>
            </div>
            <div class="product-name" t-attf-id="article_product_{{props.product.id}}">
                <t t-esc="props.product.display_name" />
            </div>
        </article>
    </t>

    <t t-name="ProductsList" owl="1">
        <div class="product-list-container">
            <div class="product-list-scroller touch-scrollable">
                <div t-if="props.products.length != 0" class="product-list">
                    <t t-foreach="props.products" t-as="product" t-key="product.id">
                        <ProductDisplay product="product" pos="props.pos" />
                    </t>
                </div>
                <div t-else="" class="product-list-empty">
                    <div class="product-list-empty">
                        <t t-if="props.searchWord !== ''">
                            <p>
                                No results found for "
                                <b t-esc="props.searchWord"></b>
                                ".
                            </p>
                        </t>
                        <t t-else="">
                            <p>There are no products in this category.</p>
                        </t>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="ProductsWidget" owl="1">
        <table class="layout-table">
            <tbody>
                <tr class="header-row">
                    <td class="header-cell">
                        <ProductsWidgetControl pos="pos" breadcrumbs="breadcrumbs"
                                               subcategories="subcategories"
                                               t-on-switch-category="switchCategory"
                                               t-on-update-search="updateSearch"
                                               t-on-clear-search="clearSearch" />
                    </td>
                </tr>

                <tr class="content-row">
                    <td class="content-cell">
                        <div class="content-container">
                            <ProductsList pos="pos" products="productsToDisplay"
                                          searchWord="searchWord"
                                          t-on-click-product="clickProduct" />
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </t>

</templates>
