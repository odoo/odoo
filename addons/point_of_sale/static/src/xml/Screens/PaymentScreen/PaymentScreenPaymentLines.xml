<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="PaymentScreenPaymentLines" owl="1">
        <div t-if="props.paymentLines.length === 0" class="paymentlines-empty">
            <div class="total">
                <t t-esc="totalDueText" />
            </div>
            <div class="message">
                Please select a payment method.
            </div>
        </div>

        <div t-else="">
            <div class="payment-status-container">
                <div>
                    <div class="payment-status-remaining">
                        <span class="label">Remaining</span>
                        <span class="amount"
                              t-att-class="{ highlight: currentOrder.get_due() > 0 }">
                            <t t-esc="remainingText" />
                        </span>
                    </div>
                    <div class="payment-status-total-due">
                        <span class="label">Total Due</span>
                        <span>
                            <t t-esc="totalDueText" />
                        </span>
                    </div>
                </div>
                <div>
                    <div class="payment-status-change">
                        <span class="label">Change</span>
                        <span class="amount"
                              t-att-class="{ highlight: currentOrder.get_change() > 0 }">
                            <t t-esc="changeText" />
                        </span>
                    </div>
                </div>
            </div>
            <hr />
            <div class="paymentlines">
                <div class="paymentline heading">
                    <div>Tendered</div>
                    <div>Method</div>
                    <div></div>
                </div>
                <div class="body">
                    <t t-foreach="props.paymentLines" t-as="line" t-key="line.cid">
                        <t t-if="line.selected">
                            <div class="paymentline selected"
                                 t-att-class="selectedLineClass(line)"
                                 t-on-click="trigger('select-payment-line', { cid: line.cid })">
                                <t
                                   t-if="line and line.payment_status and ['done', 'waitingCard', 'waiting', 'reversing', 'reversed'].includes(line.payment_status)">
                                    <div class="col-tendered">
                                        <t
                                           t-esc="env.pos.format_currency_no_symbol(line.get_amount())" />
                                    </div>
                                </t>
                                <t t-else="">
                                    <div class="col-tendered edit">
                                        <t t-esc="formatLineAmount(line)" />
                                    </div>
                                </t>
                                <div class="col-name">
                                    <t t-esc="line.payment_method.name" />
                                </div>
                                <t
                                   t-if="line and line.payment_status and ['done', 'reversed', 'reversing'].includes(line.payment_status)">
                                    <div />
                                </t>
                                <t t-else="">
                                    <div class="delete-button"
                                         t-on-click="trigger('delete-payment-line', { cid: line.cid })"
                                         aria-label="Delete" title="Delete">
                                        <i class="fa fa-times-circle" />
                                    </div>
                                </t>
                            </div>
                            <t t-if="line and line.payment_status">
                                <PaymentScreenElectronicPayment line="line" />
                            </t>
                        </t>
                        <t t-else="">
                            <div class="paymentline"
                                 t-att-class="unselectedLineClass(line)"
                                 t-on-click="trigger('select-payment-line', { cid: line.cid })">
                                <div class="col-tendered">
                                    <t
                                       t-esc="env.pos.format_currency_no_symbol(line.get_amount())" />
                                </div>
                                <div class="col-name">
                                    <t t-esc="line.payment_method.name" />
                                </div>
                                <t
                                   t-if="line and line.payment_status and ['done', 'reversed', 'reversing'].includes(line.payment_status)">
                                    <div />
                                </t>
                                <t t-else="">
                                    <div class="delete-button"
                                         t-on-click="trigger('delete-payment-line', { cid: line.cid })"
                                         aria-label="Delete" title="Delete">
                                        <i class="fa fa-times-circle" />
                                    </div>
                                </t>
                            </div>
                        </t>
                    </t>
                </div>
            </div>
        </div>
    </t>

</templates>
