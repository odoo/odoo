<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_restaurant.ControlButtons" t-inherit="point_of_sale.ControlButtons" t-inherit-mode="extension">
       <xpath
            expr="//button[hasclass('more-btn')]"
            position="before">
           <button class="course-btn btn btn-lg btn-secondary lh-lg" t-if="pos.config.module_pos_restaurant and !props.showRemainingButtons and !pos.getOrder()?.isRefund" t-on-click="()=>this.pos.addCourse()">
                <span>Course</span>
           </button>
       </xpath>
        <xpath
            expr="//t[@t-if='props.showRemainingButtons']/div/t[@name='o_pricelist_button']"
            position="before">
            <!-- All these buttons will only be displayed in a dialog -->
            <t t-if="pos.config.module_pos_restaurant">
                <t t-call="point_of_sale.controlButton">
                    <t t-set="pictogram">
                        <span t-esc="currentOrder?.getCustomerCount() || 0" t-attf-class="o_guests_number rounded-5 text-bg-500 d-md-block me-2 m-md-auto my-md-1 px-1 px-md-2"/>
                    </t>
                    <t t-set="btnText">
                        <t t-if="currentOrder?.getCustomerCount() === 1">Guest</t>
                        <t t-else="">Guests</t>
                    </t>
                    <t t-set="btnClasses" t-value="'o_guests_button btn-secondary '"/>
                    <t t-set="onClick" t-value="clickTableGuests"/>
                </t>
                <!-- Split Button -->
                <t t-call="point_of_sale.controlButton">
                    <t t-set="iconClasses" t-value="'fa fa-files-o'"/>
                    <t t-set="btnText">Split</t>
                    <t t-set="btnClasses" t-value="'btn-secondary '"/>
                    <t t-set="onClick" t-value="openSplitPage"/>
                    <t t-set="disabled" t-value="pos.getOrder()?.getOrderlines()?.reduce((sum, line) => sum + line.qty, 0) lt 2"/>
                </t>
                <!-- Transfer / Merge Button -->
                 <t t-call="point_of_sale.controlButton">
                    <t t-set="iconClasses" t-value="'oi oi-arrow-right'"/>
                    <t t-set="btnText">Transfer / Merge</t>
                    <t t-set="btnClasses" t-value="'btn-secondary '"/>
                    <t t-set="onClick" t-value="() => this.clickTransferOrder()"/>
                </t>
                 <!-- Transfer Course Button -->
                 <t t-call="point_of_sale.controlButton">
                    <t t-set="iconClasses" t-value="'oi oi-arrow-down'"/>
                    <t t-set="btnText">Transfer Course</t>
                    <t t-set="btnClasses" t-value="'btn-secondary '"/>
                    <t t-set="onClick" t-value="() => this.clickTransferCourse()"/>
                    <t t-set="disabled" t-value="!this.showTransferCourse()"/>
                </t>
                <!-- Edit Order Name Button -->
                <t t-if="!pos.getOrder()?.table_id" t-call="point_of_sale.controlButton">
                    <t t-set="iconClasses" t-value="'fa fa-pencil-square-o'"/>
                    <t t-set="btnText">Edit Order Name</t>
                    <t t-set="btnClasses" t-value="'btn-secondary '"/>
                    <t t-set="onClick" t-value="() => this.pos.editFloatingOrderName(this.pos.getOrder())"/>
                </t>
            </t>
        </xpath>
    </t>
</templates>
