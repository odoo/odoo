<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <t t-name="pos_restaurant.SplitOrderline" owl="1">
        <t t-set="_orderlinePrices" t-value="env.model.getOrderlinePrices(props.line)" />
        <t t-set="_otherOrderlinePrices" t-value="props.otherLines.map(line => env.model.getOrderlinePrices(line))" />
        <t t-set="_isSelected" t-value="props.split.quantity !== 0" />
        <li class="orderline" t-att-class="{ selected: _isSelected, partially: env.model.floatCompare(props.split.quantity, props.line.qty) !== 0 }">
            <span class="product-name">
                <t t-esc="env.model.getFullProductName(props.line)" />
            </span>
            <span class="price">
                <t t-esc="env.model.formatCurrency(getDisplayPrice(_orderlinePrices, ..._otherOrderlinePrices))" />
            </span>
            <ul class="info-list">
                <t t-set="_quantityStr" t-value="getQuantityStrOfLines(props.line, ...props.otherLines)" />
                <t t-set="_unit" t-value="env.model.getOrderlineUnit(props.line)" />
                <t t-if="_quantityStr !== '1'">
                    <li class="info">
                        <t t-if="_isSelected and _unit.is_pos_groupable">
                            <em class="big">
                                <t t-esc="props.split.quantity" />
                            </em>
                            /
                            <t t-esc="_quantityStr" />
                        </t>
                        <t t-if="!(_isSelected and _unit.is_pos_groupable)">
                            <em>
                                <t t-esc="_quantityStr" />
                            </em>
                        </t>
                        <t t-esc="_unit.name" />
                        at
                        <t t-esc="env.model.formatCurrency(_orderlinePrices.unitPrice)" />
                        /
                        <t t-esc="_unit.name" />
                    </li>
                </t>
                <t t-if="!env.model.getIsZeroDiscount(props.line)">
                    <li class="info">
                        <span>With a </span>
                        <em>
                            <t t-esc="props.line.discount" />
                            <span>%</span>
                        </em>
                        <span> discount</span>
                    </li>
                </t>
            </ul>
        </li>
    </t>

</templates>
