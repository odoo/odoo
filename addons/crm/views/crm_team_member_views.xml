<?xml version="1.0" encoding="utf-8"?>
<odoo><data>

    <record id="crm_team_member_view_tree" model="ir.ui.view">
        <field name="name">crm.team.member.view.list</field>
        <field name="model">crm.team.member</field>
        <field name="inherit_id" ref="sales_team.crm_team_member_view_tree"/>
        <field name="arch" type="xml">
            <field name="user_id" position="after">
                <field name="assignment_enabled" column_invisible="True"/>
                <field name="assignment_max" width="250px"/>
                <field name="lead_month_count" width="150px"/>
            </field>
        </field>
    </record>

    <record id="crm_team_member_view_kanban" model="ir.ui.view">
        <field name="name">crm.team.member.view.kanban.inherit.crm</field>
        <field name="model">crm.team.member</field>
        <field name="inherit_id" ref="sales_team.crm_team_member_view_kanban"/>
        <field name="arch" type="xml">
            <field name="active" position="after">
                <field name="assignment_enabled"/>
                <field name="assignment_max"/>
            </field>
            <xpath expr="//main" position="after">
                <div class="o_member_assignment" invisible="assignment_rules == 'opt-out'">
                    <field name="lead_month_count" widget="gauge" options="{'max_field': 'assignment_max'}" invisible="assignment_rules != 'limited'"/>
                    <field name="lead_month_count" widget="gauge" options="{'max_tooltip': 'Unlimited'}" invisible="assignment_rules != 'unlimited'"/>
                </div>
            </xpath>
        </field>
    </record>

    <record id="crm_team_member_view_form" model="ir.ui.view">
        <field name="name">crm.team.member.view.form.inherit.crm</field>
        <field name="model">crm.team.member</field>
        <field name="inherit_id" ref="sales_team.crm_team_member_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="inside">
                <notebook>
                    <page string="Lead Assignment" name="lead_assign">
                        <group>
                            <label for="assignment_rules" class="o_form_label text-nowrap text-900"/>
                            <span>
                                <field name="assignment_rules" class="oe_inline o_field_highlight" nolabel="1"/>
                                <span invisible="assignment_rules != 'limited'" class="ms-1">
                                    <span class="me-1"> of </span>
                                    <field name="assignment_max" class="oe_inline o_field_highlight o_input_4ch"/>
                                    <span> leads per 30 days </span>
                                    <span invisible="lead_month_count == 0">
                                        (<field name="lead_month_count" class="oe_inline"/> assigned)
                                    </span>
                                </span>
                            </span>
                            <field name="assignment_domain_preferred" string="Give priority if" widget="domain"
                                options="{'model': 'crm.lead', 'foldable': True}"
                                invisible="assignment_rules == 'opt-out'"/>
                            <field name="assignment_domain" string="Only assign if" widget="domain"
                                options="{'model': 'crm.lead', 'foldable': True}"
                                invisible="assignment_rules == 'opt-out'"/>
                        </group>
                    </page>
                </notebook>
            </xpath>
        </field>
    </record>

    <record id="sales_team.crm_team_member_action" model="ir.actions.act_window">
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Add a Team Member
            </p><p>
                Team Members are salespersons assigned to specific teams.
            </p>
        </field>
    </record>

</data></odoo>
