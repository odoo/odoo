<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-inherit="point_of_sale.ReceiptHeader" t-inherit-mode="extension">
        <xpath expr="//img[hasclass('pos-receipt-logo')]" position="after">
            <t t-if="order.isSACompany() and !order.isSettlement()">
                <t t-set="asQrCode" t-value="order.generateQrcode()"/>
                <img t-if="asQrCode" id="qrcode" t-att-src="asQrCode" class="pos-receipt-qrcode"/>
                <br/>
            </t>
        </xpath>
        <t t-set="show_title" position="after">
            <t t-set="show_title" t-if="order.isSACompany()" t-value="order.state !== 'draft'"/>
        </t>
        <t t-set="show_simplified_title" position="after">
            <t t-set="show_simplified_title" t-if="order.isSACompany()" t-value="!order.isSettlement() and order.isSimplified"/>
        </t>
    </t>
    <t t-inherit="point_of_sale.OrderReceipt" t-inherit-mode="extension">
        <span name="subtotal_span_dual" position="before">
            <span name="subtotal_span_dual_sa" t-elif="order.isSACompany() and order.config_id.l10n_gcc_dual_language_receipt" class="text-nowrap mw-100" t-translation="off">
                Subtotal / المبلغ الخاضع للضريبة
                <br/>
                (غير شامل ضريبة القيمة المضافة)
            </span>
        </span>
        <span name="total_span_dual" position="before">
            <span name="total_span_dual_sa" t-elif="order.isSACompany() and order.config_id.l10n_gcc_dual_language_receipt" class="label-total" t-translation="off">
                Total / إجمالي قيمة الفاتورة 
                <br/>
                (شامل ضريبة القيمة المضافة)
            </span>
        </span>
        <xpath expr="//div[@t-if='qrCode']//div[hasclass('w-100')]" position="inside">
            <div name="order_reference" t-if="order.isSACompany()">
                <t t-if="!order.config_id.l10n_gcc_dual_language_receipt">
                    <span>Reference:</span><t t-out="order.pos_reference"/>
                </t>
                <t t-else="">
                    <t t-out="order.pos_reference"/><span t-translation="off"> :المرجع</span><br/>
                    <span t-translation="off">Reference: </span><t t-out="order.pos_reference"/>
                </t>
            </div>
            <div name="order_reason" t-if="order.isSACompany() and order.isRefund and order.l10n_sa_reason_value">
                <t t-if="!order.config_id.l10n_gcc_dual_language_receipt">
                    <span>Reason:</span><br/>
                </t>
                <t t-else="">
                    <span t-translation="off"> :سبب إصدار الإشعار من الأسباب التالية</span><br/>
                    <span t-translation="off">Reason: </span><br/>
                </t>
                <span t-out="order.l10n_sa_reason_value"/>
            </div>
        </xpath>
        <xpath expr="//t[@t-if='company.street']/.." position="attributes">
            <attribute name="t-if">!order.isSACompany()</attribute>
        </xpath>
        <xpath expr="//t[@t-if='company.street']/.." position="after">
            <div name="custom_address_block" t-else="">
                <t t-if="company.street" t-out="company.street"/>
                <t t-if="company.street2" t-out="', ' + company.street2"/>
                <t t-if="company.street or company.street2"><br/></t>

                <t t-if="company.city" t-out="company.city"/>
                <t t-if="company.state_id?.code" t-out="', ' + company.state_id.code"/>
                <t t-if="company.zip" t-out="', ' +  company.zip"/>
                <t t-if="company.city or company.state_id?.code or company.zip"><br/></t>

                <t t-if="company.country_id" t-out="company.country_id?.name"/>
            </div>
        </xpath>
    </t>
</templates>
