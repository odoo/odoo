<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mail.PollVotesPanel">
        <Dialog size="'md'" bodyClass="'d-flex flex-column'" header="true" footer="false" contentClass="contentClass">
            <t t-set-slot="header">
                <div class="d-flex flex-column fs-4">
                    <span class="fw-bold" t-out="props.poll.poll_question"/>
                    <span class="text-muted smaller" t-out="props.poll.voteCountText(props.poll.numberOfVotes)"/>
                </div>
            </t>
            <Tabs initialTabId="props.poll.option_ids[0]?.id" direction="store.useMobileView ? 'h' : 'v'" ref="tabsRef">
                <t t-set-slot="headers">
                    <TabHeader t-foreach="props.poll.option_ids" t-as="option" t-key="option.id" id="option.id">
                        <div class="p-2 d-flex justify-content-between w-100">
                            <span class="me-2" t-out="option.option_label"/>
                            <span t-out="option.number_of_votes"/>
                        </div>
                    </TabHeader>
                </t>
                <t t-set-slot="panels">
                    <TabPanel t-foreach="props.poll.option_ids" t-as="option" t-key="option.id" id="option.id" onBecameVisible="() => this.onTabPanelVisible(option)">
                        <div t-foreach="option.vote_ids" t-as="vote" t-key="vote.id" class="d-flex p-1 align-items-center" t-att-class="{'o-isDeviceSmall': ui.isSmall}">
                            <t t-set="persona" t-value="vote.user_id?.partner_id or vote.guest_id"/>
                            <img class="rounded o-mail-PollVotesPanel-avatar o_avatar" t-att-src="persona.avatarUrl"/>
                            <span class="mx-2 text-truncate fs-6" t-out="props.poll.start_message_id.getPersonaName(persona)"/>
                        </div>
                    </TabPanel>
                </t>
            </Tabs>
        </Dialog>
    </t>
</templates>
