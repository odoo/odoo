<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.Attachment">
        <t t-set="type" t-value="attachment.mimetype.split('/').shift()"/>
        <div t-attf-class="o_attachment #{attachment.upload ? 'o_attachment_uploading' : ''}" t-att-title="attachment.name">
            <t t-if="type == 'image'">
                <div class="o_image_box">
                    <img t-attf-src="/web/image/#{attachment.id}/200x200/?crop=True"/>
                    <div t-attf-class="o_image_overlay o_attachment_view"  t-att-data-id="attachment.id">
                        <a class="o_attachment_download" t-att-href='attachment.url' target="_blank">
                            <i t-attf-class="fa fa-2x fa-arrow-circle-o-down" title="Download this attachment" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </t>
            <t t-elif="type == 'video'">
                <div class="o_image_box o_image_preview">
                    <img class="o_image" t-att-data-mimetype="attachment.mimetype"/>
                    <div t-attf-class="o_image_overlay o_attachment_view"  t-att-data-id="attachment.id">
                        <a class="o_attachment_play">
                            <i t-attf-class="fa fa-2x fa-play-circle" title="Play this video" aria-hidden="true"></i>
                        </a>
                        <a class="o_attachment_download" t-att-href='attachment.url' target="_blank">
                            <i t-attf-class="fa fa-2x fa-arrow-circle-o-down" title="Download this attachment" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </t>
            <t t-elif="attachment.mimetype == 'application/pdf'">
                <div class="o_image_box">
                    <div class="o_image_box">
                        <img src="/web/static/src/img/mimetypes/pdf.png"/>
                        <div class="o_image_overlay o_attachment_view"  t-att-data-id="attachment.id">
                            <a class="o_attachment_download" t-att-href='attachment.url' target="_blank">
                                <i t-attf-class="fa fa-2x fa-arrow-circle-o-down" title="Download this PDF" aria-hidden="true"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </t>
            <t t-else="">
                <div class="o_image_box">
                    <img class="o_image" t-att-data-mimetype="attachment.mimetype"/>
                    <div t-attf-class="o_image_overlay">
                        <a class="o_overlay_download" t-att-href='attachment.url' target="_blank"/>
                        <a class="o_attachment_download" t-att-href='attachment.url' target="_blank">
                            <i t-attf-class="fa fa-2x fa-arrow-circle-o-down" title="Download this attachment" aria-hidden="true"></i>
                        </a>
                    </div>
                </div>
            </t>
            <div class="caption">
                <a t-att-href='attachment.url' target="_blank">
                    <t t-esc='attachment.name'/>
                </a>
            </div>
            <t t-if="editable">
                <div class="o_attachment_delete">
                    <i class='fa fa-times-circle' title="Delete this attachment" t-att-data-id="attachment.id"/>
                </div>
                <div class="o_attachment_progress_bar">
                    Uploading
                </div>
            </t>
        </div>
    </t>
</templates>
