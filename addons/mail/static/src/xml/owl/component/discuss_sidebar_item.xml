<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <div
        class="o_DiscussSidebarItem"
        owl="1"
        t-att-data-thread-local-id="props.threadLocalId"
        t-att-odoo-id="id"
        t-att-class="{
            'o-active': props.isActive,
            'o-starred-box': props.threadLocalId === 'mail.box_starred',
            'o-unread': storeProps.thread.message_unread_counter > 0,
        }"
        t-att-data-thread-name="storeProps.threadName"
        t-name="mail.component.DiscussSidebarItem"
        t-on-click="_onClick">
        <div
            class="
                o_DiscussSidebarItem_activeIndicator
                o_DiscussSidebarItem_item"
            t-att-class="{
                'o-item-active': props.isActive,
            }"/>
        <Icon
            class="o_DiscussSidebarItem_item"
            threadLocalId="props.threadLocalId"/>
        <div
            class="
                o_DiscussSidebarItem_item
                o_DiscussSidebarItem_name
                o-editable"
            t-if="
                storeProps.thread.channel_type === 'chat' and
                state.renaming">
            <EditableText
               class="o_DiscussSidebarItem_nameInput"
               placeholder="storeProps.directPartner.name"
               t-on-o-cancel="_onCancelRenaming"
               t-on-o-clicked="_onClickedEditableText"
               t-on-o-validate.stop="_onRename"
               value="storeProps.threadName"/>
        </div>
        <div
            class="
                o_DiscussSidebarItem_item
                o_DiscussSidebarItem_name"
            t-att-class="{
                'o-item-unread': storeProps.thread.message_unread_counter > 0,
            }"
            t-else="">
            <t t-esc="storeProps.threadName"/>
        </div>
        <div class="
            o-autogrow
            o_DiscussSidebarItem_item"/>
        <div
            class="
                o_DiscussSidebarItem_commands
                o_DiscussSidebarItem_item"
            t-if="storeProps.thread._model !== 'mail.box'">
            <t t-if="storeProps.thread.channel_type === 'channel'">
                <div
                    aria-label="Channel settings"
                    class="
                        fa
                        fa-cog
                        o_DiscussSidebarItem_command
                        o_DiscussSidebarItem_commandSettings"
                    role="img"
                    title="Channel settings"
                    t-on-click.stop="_onClickSettings"/>
                <div
                    aria-label="Leave this channel"
                    class="
                        fa
                        fa-times
                        o_DiscussSidebarItem_command
                        o_DiscussSidebarItem_commandLeave"
                    role="img"
                    title="Leave this channel"
                    t-if="
                        !storeProps.thread.message_needaction_counter and
                        !storeProps.thread.group_based_subscription"
                    t-on-click.stop="_onClickLeave"/>
            </t>
            <t t-elif="storeProps.thread.channel_type === 'chat'">
                <div
                    aria-label="Rename conversation"
                    class="
                        fa
                        fa-cog
                        o_DiscussSidebarItem_command
                        o_DiscussSidebarItem_commandRename"
                    role="img"
                    title="Rename conversation"
                    t-on-click.stop="_onClickRename"/>
                <div
                    aria-label="Unpin conversation"
                    class="
                        fa
                        fa-times
                        o_DiscussSidebarItem_command
                        o_DiscussSidebarItem_commandUnpin"
                    role="img"
                    title="Unpin conversation"
                    t-if="!storeProps.thread.message_unread_counter"
                    t-on-click.stop="_onClickUnpin"/>
            </t>
        </div>
        <div
            class="
                badge
                badge-pill
                o_DiscussSidebarItem_counter
                o_DiscussSidebarItem_item"
            t-if="counter > 0">
            <t t-esc="counter"/>
        </div>
    </div>

</templates>
