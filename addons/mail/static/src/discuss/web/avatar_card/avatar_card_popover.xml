<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mail.AvatarCardPopover">
        <div class="o_avatar_card card border-0 rounded">
            <div class="card-body bg-inherit rounded">
                <div class="d-flex align-items-start gap-2 bg-inherit">
                    <span class="o_avatar pt-1 position-relative o_card_avatar bg-inherit">
                        <img t-if="this.props.id"
                            t-attf-src="/web/image/{{this.props.model}}/{{this.props.id}}/avatar_128"
                            class="rounded"
                        />
                        <span t-if="this.partner?.im_status and this.partner.im_status !== 'im_partner'" name="icon" class="o_card_avatar_im_status position-absolute d-flex align-items-center justify-content-center bg-inherit">
                            <ImStatus persona="this.partner" />
                        </span>
                    </span>
                    <div class="d-flex flex-column o_card_user_infos overflow-hidden">
                        <div class="o-mail-avatar-card-name-actions d-flex align-items-center justify-content-center">
                            <span class="o-mail-avatar-card-name fw-bold" t-if="this.name" t-esc="this.name"/>
                            <div class="flex-grow-1"/>
                            <Dropdown t-if="this.canOpenSettingMenu" position="'right-start'">
                                <button class="btn btn-sm">
                                    <i class="oi oi-ellipsis-v"/>
                                </button>
                                <t t-set-slot="content">
                                    <ActionList actions="this.chanelMemberActions.actions" dropdown="true"/>
                                </t>
                            </Dropdown>
                        </div>
                        <t t-if="this.userInfoTemplate" t-call="{{this.userInfoTemplate}}"/>
                        <a t-if="this.email" t-att-href="'mailto:'+this.email" t-att-title="this.email" class="text-truncate">
                            <i class="fa fa-fw fa-envelope me-1"/><t t-esc="this.email"/>
                        </a>
                        <a t-if="this.phone" class="o-mail-avatar-card-tel text-truncate" t-att-title="this.phone" t-att-href="'tel:'+this.phone">
                            <i class="fa fa-fw fa-phone me-1"/><t t-esc="this.phone"/>
                        </a>
                        <div t-if="this.state.partnerLocalDateTimeFormatted" class="o-mail-avatar-card-localtime text-muted">
                            <i class="fa fa-fw fa-clock-o me-1"/><t t-out="this.state.partnerLocalDateTimeFormatted"/>
                        </div>
                        <div class="o_avatar_card_buttons d-flex gap-2 mt-2">
                            <button t-if="(this.user?.share ?? this.partner?.partner_share) === false" class="btn btn-secondary btn-sm" t-on-click.stop="this.onSendClick">Send message</button>
                            <button t-if="this.showViewProfileBtn" class="btn btn-secondary btn-sm" t-custom-click.stop="(ev, isMiddleClick) => this.onClickViewProfile(isMiddleClick)" t-ref="viewProfileBtn">View Profile</button>
                        </div>
                    </div>
                </div>
            </div>
            <div t-if="this.hasFooter" class="o_avatar_card_details card-footer d-flex flex-column gap-3 rounded-bottom bg-100"/>
        </div>
    </t>
</templates>
