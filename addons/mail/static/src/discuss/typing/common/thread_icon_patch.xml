<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-inherit="mail.ThreadIcon" t-inherit-mode="extension">
        <xpath expr="//*[@name='group']" position="replace">
            <t t-if="props.thread.channel.hasOtherMembersTyping" t-call="mail.ThreadIcon.typing"/>
            <t t-else="">$0</t>
        </xpath>
        <xpath expr="//t[@name='chat']" position="replace">
            <t t-if="props.thread.channel.hasOtherMembersTyping" t-call="mail.ThreadIcon.typing"/>
            <t t-else="">$0</t>
        </xpath>
    </t>
    <t t-name="mail.ThreadIcon.typing">
        <div t-if="props.thread.channel.hasOtherMembersTyping" class="rounded-pill" style="padding: 1px;" t-att-class="{ 'bg-300': env.inChatBubble, 'bg-inherit': !env.inChatBubble }"> 
            <div class="bg-success rounded-pill" style="padding: 3px;">
                <Typing channel="props.thread.channel" size="['sm', 'smaller'].includes(props.size) ? 'sm' : 'md'" displayText="false" />
            </div>
        </div>
    </t>
</templates>
