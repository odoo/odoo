<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mail.MessageSeenIndicator">
        <a role="button" t-on-click="openDialog" class="d-flex justify-content-end">
            <small t-if="props.message.channelMemberHaveSeen.length gt 5" class="text-muted opacity-75 o-smaller">
                +<t t-out="props.message.channelMemberHaveSeen.length - 5" />
            </small>
            <t t-foreach="props.message.channelMemberHaveSeen.slice(0, 5)" t-as="member" t-key="member.id">
                <span t-if="props.message.id gte member.seen_message_id.id" class="o_avatar_seen_indicator ms-1" style="width:15px;height:15px;">
                    <img t-att-src="member.persona.avatarUrl" class="w-100 h-100 rounded" t-att-title="'Saw by ' + member.name" />
                </span>
            </t>
        </a>
    </t>

    <t t-name="mail.MessageSeenIndicatorPopover.card">
        <div class="o-mail-MessageSeenIndicatorPopover-card d-flex align-items-center gap-2">
            <span class="o_avatar position-relative o_card_avatar" style="width: 30px;height:30px;">
                <img t-att-src="member.persona.avatarUrl" class="w-100 h-100 rounded o_object_fit_cover" />
            </span>
            <span class="fw-bold" t-esc="member.name"/>
            <span t-if="member.lastSeenDt" class="ms-auto text-muted small" t-out="member.lastSeenDt"/>
        </div>
    </t>

    <t t-name="mail.MessageSeenIndicatorDialog">
        <Dialog size="'sm'" title.translate="Seen by:" footer="false" withBodyPadding="false">
            <ul class="list-group list-group-flush list-unstyled py-1" t-ref="content">
                <li class="list-group-item py-2" t-foreach="props.message.channelMemberHaveSeen" t-as="member" t-key="member.id">
                    <t t-call="mail.MessageSeenIndicatorPopover.card"/>
                </li>
            </ul>
        </Dialog>
    </t>

</templates>
