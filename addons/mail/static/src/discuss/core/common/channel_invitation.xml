<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="discuss.ChannelInvitation">
        <ActionPanel t-if="props.channel" title.translate="Invite people" resizable="!!env.inMeetingView" minWidth="env.inMeetingView ? 300 : undefined" initialWidth="env.inMeetingView ? 400 : undefined" icon="'oi oi-user-plus'">
            <t t-call="discuss.ChannelInvitation.main"/>
        </ActionPanel>
        <t t-else="" t-call="discuss.ChannelInvitation.main"/>
    </t>

    <t t-name="discuss.ChannelInvitation.main">
        <div class="d-flex flex-column flex-grow-1 bg-inherit o-min-height-0" t-att-class="{ 'o-mail-Discuss-threadActionPopover w-100': props.hasSizeConstraints, 'px-1': !props.channel }">
            <div class="d-flex flex-column flex-grow-1 overflow-hidden o-min-height-0">
                <t t-call="discuss.SelectableList">
                    <t t-set="beforeOptionsTemplate" t-value="'discuss.ChannelInvitation-beforeOptions'"/>
                    <t t-set="additionalItemContentTemplate" t-value="'discuss.ChannelInvitation-additionalItemContent'"/>
                </t>
            </div>
            <div class="flex-shrink-0 bg-inherit">
                <div class="o-discuss-ChannelInvitation-invitationBox pt-0 pb-1 bg-inherit">
                    <t t-if="store.self_user">
                        <button t-if="props.channel and selectedOptions.length" class="btn btn-primary w-100 my-2" t-att-title="invitationButtonText" t-on-click="onClickInvite">
                            <t t-out="invitationButtonText"/>
                        </button>
                    </t>
                    <hr t-if="props.channel?.invitationLink" class="border-dark-subtle"/>
                    <div t-if="props.channel?.invitationLink" class="input-group">
                        <input class="border border-secondary form-control lh-1 rounded-start border-0 smaller" type="text" t-att-value="props.channel.invitationLink" readonly="" disabled="" t-on-focus="onFocusInvitationLinkInput"/>
                        <button class="btn btn-primary px-2 o-py-0_5" t-on-click="onClickCopy">
                            <i class="fa fa-copy"/>
                        </button>
                    </div>
                    <div t-if="props.channel?.accessRestrictedToGroupText" class="mt-2 text-muted smaller mx-1" t-out="props.channel.accessRestrictedToGroupText"/>
                </div>
            </div>
        </div>
    </t>
    <t t-name="discuss.ChannelInvitation-beforeOptions">
        <div t-if="state.searchResultCount > state.selectablePartners.length" class="smaller text-muted mx-1 mb-1 fst-italic" t-out="showingResultNarrowText"/>
    </t>
    <t t-name="discuss.ChannelInvitation-additionalItemContent">
        <span t-if="option.email and state.sentEmails.has(option.email)" class="text-truncate text-start smaller text-600 fw-normal lh-1 w-100">Invitation already sent to this address</span>
    </t>

</templates>
