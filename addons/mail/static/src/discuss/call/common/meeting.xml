<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mail.Meeting">
        <div class="o-mail-Meeting h-100 w-100 d-flex flex-column">
            <div class="flex-grow-1 position-relative">
                <div t-att-class="{'o-sidePanelOpened': state.isSidePanelOpened}" class="o-mail-Meeting-callContainer p-3 h-100 w-100" t-ref="callContainer">
                    <Call class="'h-100 w-100'" hasOverlay="false" />
                </div>
                <div class="o-mail-Meeting-sidePanelContainer h-100 p-3 ps-0  position-absolute top-0 end-0" t-att-class="{'o-opened': state.isSidePanelOpened}">
                    <div class="o-mail-Meeting-sidePanel border rounded-4 pt-1 overflow-hidden d-flex flex-column h-100">
                        <button title="Close Chat" class="o-mail-Meeting-closeSidePanel btn btn-link align-self-end opacity-100-hover p-1 m-1" t-on-click="() => state.isSidePanelOpened = false">
                            <i class="fa-lg oi fa-fw oi-close"/>
                        </button>
                        <t t-if="state.activeSidePanel === 'chat'" t-call="mail.Meeting-sidePanelChat"/>
                        <t t-if="state.activeSidePanel === 'invite'" t-call="mail.Metting-sidePanelInvite"/>
                    </div>
                </div>
            </div>
            <div class="d-flex justify-content-between p-3 pt-0">
                <div/>
                <CallActionList thread="channel"/>
                <div class="o-mail-Meeting-sidePanelActions d-flex">
                    <button class="btn btn-light rounded-circle smaller d-flex align-items-center m-1 p-0" t-att-class="{'text-success': state.isSidePanelOpened and state.activeSidePanel === 'invite'}" t-att-title="toggleInvitePanelTitle" t-on-click="() => this.toggleSidePanel('invite')">
                        <i class="fa fa-fw m-2 fa fa-lg fa-user-plus"/>
                    </button>
                    <button class="btn btn-light rounded-circle smaller d-flex align-items-center m-1 p-0" t-att-class="{'text-success': state.isSidePanelOpened and state.activeSidePanel === 'chat'}" t-att-title="toggleChatPanelTitle" t-on-click="() => this.toggleSidePanel('chat')">
                        <i class="fa fa-fw m-2 fa-lg fa-comments"/>
                    </button>
                    <button class="btn btn-light rounded-circle smaller d-flex align-items-center m-1 p-0" title="Exit Fullscreen" t-on-click="() => rtc.exitFullscreen()">
                        <i class="fa fa-fw m-2 fa-lg fa-compress"/>
                    </button>
                </div>
            </div>
        </div>
    </t>
    <t t-name="mail.Meeting-sidePanelChat">
        <Thread thread="channel" jumpPresent="state.jumpPresent"/>
        <Composer
            composer="channel.composer"
            className="'o-mail-Meeting-composer'"
            autofocus="true"
            onDiscardCallback="() => (channel.composer.replyToMessage = undefined)"
            onPostCallback.bind="() => this.state.jumpPresent++"
            dropzoneRef="channelRef"
        />
    </t>
    <t t-name="mail.Metting-sidePanelInvite">
        <ChannelInvitation thread="channel" state="channelInvitationState"/>
    </t>
</templates>
