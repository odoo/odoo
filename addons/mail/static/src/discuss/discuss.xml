<?xml version="1.0" encoding="UTF-8" ?>
<templates xml:space="preserve">

<t t-name="mail.discuss" owl="1">
    <div class="d-flex h-100 flex-grow-1">
        <t t-set="thread" t-value="currentThread()"/>
        <Sidebar />
        <div class="o-mail-discuss-content d-flex flex-column h-100 w-100" t-att-class="{'o-mail-with-composer':thread.type !== 'mailbox'}">
            <!-- top bar -->
            <div class="px-3 bg-100 border-bottom d-flex flex-shrink-0" style="height:42px;">
                <ThreadIcon className="'me-2 align-self-center'" thread="thread"/>
                <div class="d-flex flex-grow-1 align-self-center align-items-center">
                    <div class="lead flex-shrink-0 px-1 border text-truncate fw-bold border-light" t-att-title="thread.name" >
                        <t t-esc="thread.name"/>
                    </div>
                    <t t-if="thread.description">
                        <div class="flex-shrink-0 mx-2 py-2 border-start"/>
                        <div class="px-1 border text-truncate border-light" t-att-title="thread.description">
                            <t t-esc="thread.description"/>
                        </div>
                    </t>
                </div>
                <div class="o-mail-discuss-actions d-flex align-items-center ms-1">
                    <t t-set="isEmpty" t-value="thread.messages.length === 0"/>
                    <t t-if="thread.id === 'inbox'">
                        <button class="btn btn-secondary" t-att-disabled="isEmpty" t-on-click="markAllAsRead">Mark all read</button>
                    </t>
                    <t t-if="thread.id === 'starred'">
                        <button class="btn btn-secondary" t-att-disabled="isEmpty" t-on-click="unstarAll">Unstar all</button>
                    </t>
                    <t t-if="thread.type !== 'mailbox' and !thread.inCall">
                        <button class="btn" title="Start a Call" t-on-click="startCall">
                            <i class="fa fa-lg fa-phone text-700"/>
                        </button>
                    </t>
                </div>
            </div>
            <t t-if="thread.inCall">
                <CallUI thread="thread"/>
            </t>
            <Thread id="thread.id" t-key="thread.id"/>
            <t t-if="thread.type !== 'mailbox'">
                <Composer t-key="thread.id" threadId="thread.id" autofocus="true"/>
            </t>
        </div>
    </div>
</t>

</templates>