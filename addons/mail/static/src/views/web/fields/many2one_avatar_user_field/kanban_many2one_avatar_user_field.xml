<?xml version="1.0" encoding="UTF-8"?>
<templates>

    <t t-name="mail.KanbanMany2OneAvatarUserField">
        <t t-set="relation" t-value="props.record.fields[props.name].relation"/>
        <KanbanMany2One t-props="m2oProps">
            <t t-set-slot="avatar">
                <Avatar t-if="value" cssClass="'o_m2o_avatar'" resModel="relation" resId="value[0]" noSpacing="true" displayName="displayName"/>
            </t>
            <t t-set-slot="autoCompleteItem" t-slot-scope="autoCompleteItemScope">
                <span class="o_avatar_many2x_autocomplete o_avatar d-flex align-items-center position-relative" t-att-data-tooltip="getTooltipText(autoCompleteItemScope.record?.__formatted_display_name)">
                    <span class="position-relative flex-shrink-0 me-1">
                        <img class="rounded" t-attf-src="/web/image/{{relation}}/{{autoCompleteItemScope.record.id}}/avatar_128"/>
                        <t t-if="autoCompleteItemScope.record?.im_status">
                            <span class="o_avatar_im_status position-absolute d-flex align-items-center justify-content-center">
                                <ImStatus persona="autoCompleteItemScope.record" size="'sm'"/>
                            </span>
                        </t>
                    </span>
                    <span class="text-truncate flex-grow-1 min-w-0" t-out="autoCompleteItemScope.label"/>
                </span>
            </t>
        </KanbanMany2One>
    </t>

</templates>
