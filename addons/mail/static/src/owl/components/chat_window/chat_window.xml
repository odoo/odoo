<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.component.ChatWindow" owl="1">
        <div class="o_ChatWindow" tabindex="0"
            t-att-class="{
                'o-focused': state.isFocused,
                'o-folded': isFolded(),
                'o-fullscreen': props.isFullscreen,
                'o-mobile': storeProps.isMobile,
                'o-new-message': props.chatWindowLocalId === 'new_message',
            }" t-on-click.stop="_onClick" t-on-keydown="_onKeydown" t-on-focusout="_focusout" t-att-data-chat-window-local-id="props.chatWindowLocalId" t-att-data-thread-local-id="storeProps.thread ? storeProps.thread.localId : ''"
        >
            <Header
                class="o_ChatWindow_header"
                chatWindowLocalId="props.chatWindowLocalId"
                hasCloseAsBackButton="props.hasCloseAsBackButton"
                hasShiftLeft="props.hasShiftLeft"
                hasShiftRight="props.hasShiftRight"
                isExpandable="props.isExpandable"
                t-on-o-clicked.stop="_onClickedHeader"
            />
            <t t-if="storeProps.thread">
                <Thread
                    class="o_ChatWindow_thread"
                    composerAttachmentsDetailsMode="'card'"
                    domain="[]"
                    hasComposer="storeProps.thread._model !== 'mail.box'"
                    hasComposerCurrentPartnerAvatar="false"
                    hasComposerSendButton="storeProps.isMobile"
                    hasSquashCloseMessages="storeProps.thread._model !== 'mail.box'"
                    haveMessagesAuthorRedirect="storeProps.thread.channel_type !== 'chat'"
                    messageListInitialScrollTop="props.threadInitialScrollTop"
                    threadLocalId="props.chatWindowLocalId"
                    t-on-focusin.stop="_onFocusinThread"
                    t-ref="thread"
                />
            </t>
            <t t-else="">
                <div class="o_ChatWindow_newMessageForm">
                    <span class="o_ChatWindow_newMessageFormLabel">
                        To:
                    </span>
                    <AutocompleteInput
                        class="o_ChatWindow_newMessageFormInput"
                        isHtml="true"
                        placeholder="newMessageFormInputPlaceholder"
                        select="_onAutocompleteSelect"
                        source="_onAutocompleteSource"
                        t-ref="input"
                    />
                </div>
            </t>
        </div>
    </t>

</templates>
