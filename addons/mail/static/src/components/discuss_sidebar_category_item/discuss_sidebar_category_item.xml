<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="mail.DiscussSidebarCategoryItem" owl="1">
        <div class="o_DiscussSidebarCategoryItem"
            t-att-class="{
                'o-active': categoryItem.isActive,
                'o-unread': categoryItem.isUnread,
            }" t-on-click="categoryItem.onClick" t-att-data-thread-local-id="categoryItem.channel.localId" t-att-data-thread-name="categoryItem.channel.displayName"
        >
            <div class="o_DiscussSidebarCategoryItem_item o_DiscussSidebarCategoryItem_avatar">
                <div class="o_DiscussSidebarCategoryItem_imageContainer">
                    <img class="o_DiscussSidebarCategoryItem_image rounded-circle" t-att-src="categoryItem.avatarUrl" alt="Thread Image"/>
                    <t t-if="categoryItem.hasThreadIcon">
                        <ThreadIcon class="o_DiscussSidebarCategoryItem_threadIcon" threadLocalId="categoryItem.channel.localId"/>
                    </t>
                </div>
            </div>
            <t t-if="categoryItem.isRenaming">
                <span class="o_DiscussSidebarCategoryItem_item o_DiscussSidebarCategoryItem_name o-editable">
                    <EditableText
                        class="o_DiscussSidebarCategoryItem_nameInput"
                        placeholder="categoryItem.channel.correspondent ? categoryItem.channel.correspondent.name : categoryItem.channel.name"
                        value="categoryItem.channel.displayName"
                        t-on-o-cancel="categoryItem.onCancelRenaming"
                        t-on-o-clicked="categoryItem.onClickedEditableText"
                        t-on-o-validate="categoryItem.onValidateEditableText"
                    />
                </span>
            </t>
            <t t-else="">
                <span class="o_DiscussSidebarCategoryItem_item o_DiscussSidebarCategoryItem_name" t-att-class="{ 'o-item-unread': categoryItem.isUnread }">
                    <t t-esc="categoryItem.channel.displayName"/>
                </span>
            </t>
            <div class="o-autogrow o_DiscussSidebarCategoryItem_item"/>
            <div class="o_DiscussSidebarCategoryItem_item o_DiscussSidebarCategoryItem_commands">
                <t t-if="categoryItem.hasSettingsCommand">
                    <div class="o_DiscussSidebarCategoryItem_command o_DiscussSidebarCategoryItem_commandSettings fa fa-cog" t-on-click="categoryItem.onClickCommandSettings" title="Channel settings" role="img"/>
                </t>
                <t t-if="categoryItem.hasLeaveCommand">
                    <div class="o_DiscussSidebarCategoryItem_command o_DiscussSidebarCategoryItem_commandLeave fa fa-times" t-on-click="categoryItem.onClickCommandLeave" title="Leave this channel" role="img"/>
                </t>
                <t t-if="categoryItem.hasRenameCommand">
                    <div class="o_DiscussSidebarCategoryItem_command o_DiscussSidebarCategoryItem_commandRename fa fa-cog" t-on-click="categoryItem.onClickCommandRename" title="Rename conversation" role="img"/>
                </t>
                <t t-if="categoryItem.hasUnpinCommand">
                    <div class="o_DiscussSidebarCategoryItem_command o_DiscussSidebarCategoryItem_commandUnpin fa fa-times" t-on-click="categoryItem.onClickCommandUnpin" title="Unpin Conversation" role="img"/>
                </t>
            </div>
            <t t-if="categoryItem.counter > 0">
                <div class="o_DiscussSidebarCategoryItem_counter o_DiscussSidebarCategoryItem_item badge badge-pill">
                    <t t-esc="categoryItem.counter"/>
                </div>
            </t>
        </div>
    </t>
</templates>
