<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.ChatterTopbar" owl="1">
        <div class="o_ChatterTopbar">
            <t t-if="chatter">
                <div class="o_ChatterTopbar_actions" t-att-class="{'o-has-active-button': chatter.__mfield_isComposerVisible(mself) }">
                    <t t-if="chatter.__mfield_threadView(mself)">
                        <button class="btn btn-link o_ChatterTopbar_button o_ChatterTopbar_buttonSendMessage"
                            type="button"
                            t-att-class="{
                                'o-active': chatter.__mfield_isComposerVisible(mself) and chatter.__mfield_composer(mself) and !chatter.__mfield_composer(mself).__mfield_isLog(mself),
                                'o-bordered': chatter.__mfield_hasExternalBorder(mself),
                            }"
                            t-att-disabled="chatter.__mfield_isDisabled(mself)"
                            t-on-click="_onClickSendMessage"
                        >
                            Send message
                        </button>
                        <button class="btn btn-link o_ChatterTopbar_button o_ChatterTopbar_buttonLogNote"
                            type="button"
                            t-att-class="{
                                'o-active': chatter.__mfield_isComposerVisible(mself) and chatter.__mfield_composer(mself) and chatter.__mfield_composer(mself).__mfield_isLog(mself),
                                'o-bordered': chatter.__mfield_hasExternalBorder(mself),
                            }"
                            t-att-disabled="chatter.__mfield_isDisabled(mself)"
                            t-on-click="_onClickLogNote"
                        >
                            Log note
                        </button>
                    </t>
                    <t t-if="chatter.__mfield_hasActivities(mself)">
                        <button class="btn btn-link o_ChatterTopbar_button o_ChatterTopbar_buttonScheduleActivity" type="button" t-att-disabled="chatter.__mfield_isDisabled(mself)" t-on-click="_onClickScheduleActivity">
                            <i class="fa fa-clock-o"/>
                            Schedule activity
                        </button>
                    </t>
                    <div class="o-autogrow"/>
                        <div class="o_ChatterTopbar_rightSection">
                            <button class="btn btn-link o_ChatterTopbar_button o_ChatterTopbar_buttonAttachments" type="button" t-att-disabled="chatter.__mfield_isDisabled(mself)" t-on-click="_onClickAttachments">
                                <i class="fa fa-paperclip"/>
                                <t t-if="chatter.__mfield_isDisabled(mself) or !chatter.__mfield_isShowingAttachmentsLoading(mself)">
                                    <span class="o_ChatterTopbar_buttonCount o_ChatterTopbar_buttonAttachmentsCount" t-esc="chatter.__mfield_thread(mself) ? chatter.__mfield_thread(mself).__mfield_allAttachments(mself).length : 0"/>
                                </t>
                                <t t-else="">
                                    <i class="o_ChatterTopbar_buttonAttachmentsCountLoader fa fa-spinner fa-spin" aria-label="Attachment counter loading..."/>
                                </t>
                            </button>
                            <t t-if="chatter.__mfield_hasFollowers(mself) and chatter.__mfield_thread(mself)">
                                <FollowButton
                                    class="o_ChatterTopbar_button o_ChatterTopbar_followButton"
                                    isDisabled="chatter.__mfield_isDisabled(mself)"
                                    threadLocalId="chatter.__mfield_thread(mself).localId"
                                />
                                <FollowerListMenu
                                    class="o_ChatterTopbar_button o_ChatterTopbar_followerListMenu"
                                    isDisabled="chatter.__mfield_isDisabled(mself)"
                                    threadLocalId="chatter.__mfield_thread(mself).localId"
                                />
                            </t>
                        </div>
                </div>
                <t t-if="chatter.__mfield_hasTopbarCloseButton(mself)">
                    <div class="o_ChatterTopbar_buttonClose" title="Close" t-on-click="_onClickClose">
                        <i class="fa fa-times"/>
                    </div>
                </t>
            </t>
        </div>
    </t>

</templates>
