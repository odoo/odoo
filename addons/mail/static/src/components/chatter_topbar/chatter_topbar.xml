<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="mail.ChatterTopbar" owl="1">
        <div class="o_ChatterTopbar justify-content-between d-flex" t-attf-class="{{ className }}" t-ref="root">
            <div class="o_ChatterTopbar_actions flex-fill d-flex border-transparent">
                <div class="o_ChatterTopbar_controllers d-flex pe-2" t-if="chatter.threadView">
                    <button class="o_ChatterTopbar_button o_ChatterTopbar_buttonSendMessage btn text-nowrap me-2"
                        type="button"
                        t-att-class="{
                            'o-active btn-odoo': chatter.composerView and !chatter.composerView.composer.isLog,
                            'btn-odoo': !chatter.composerView,
                            'btn-light': chatter.composerView and chatter.composerView.composer.isLog,
                        }"
                        t-att-disabled="!chatter.hasWriteAccess"
                        data-hotkey="m"
                        t-on-click="chatter.onClickSendMessage"
                    >
                        Send message
                    </button>
                    <button class="o_ChatterTopbar_button o_ChatterTopbar_buttonLogNote btn text-nowrap"
                        type="button"
                        t-att-class="{
                            'o-active btn-odoo': chatter.composerView and chatter.composerView.composer.isLog,
                            'btn-light': chatter.composerView and !chatter.composerView.composer.isLog or !chatter.composerView,
                        }"
                        t-att-disabled="!chatter.hasWriteAccess"
                        t-on-click="chatter.onClickLogNote"
                        data-hotkey="shift+m"
                    >
                        Log note
                    </button>
                </div>
                <div class="o_ChatterTopbar_tools position-relative d-flex flex-grow-1 border-bottom"
                    t-att-class="{
                        'border-start ps-2': chatter.hasActivities,
                    }"
                >
                    <button t-if="chatter.hasActivities" class="o_ChatterTopbar_button o_ChatterTopbar_buttonScheduleActivity btn btn-light text-nowrap" type="button" t-att-disabled="!chatter.hasWriteAccess" t-on-click="chatter.onClickScheduleActivity" data-hotkey="shift+a">
                        <i class="fa fa-clock-o me-1"/>
                        <span>Activities</span>
                    </button>
                    <div class="flex-grow-1 border-start pe-2"
                        t-att-class="{
                            'ms-2': chatter.hasActivities,
                        }"
                    />
                    <div class="o_ChatterTopbar_rightSection flex-grow-1 flex-shrink-0 justify-content-end d-flex">
                        <button t-if="chatter.thread.allAttachments.length === 0" class="o_ChatterTopbar_button o_ChatterTopbar_buttonAddAttachments btn btn-light btn-primary" type="button" t-att-disabled="!chatter.hasWriteAccess" t-on-click="chatter.onClickButtonAddAttachments" >
                            <i class="fa fa-paperclip fa-lg me-1" role="img" aria-label="Attachments"/>
                            <i t-if="chatter.isShowingAttachmentsLoading" class="o_ChatterTopbar_buttonAttachmentsCountLoader fa fa-circle-o-notch fa-spin" aria-label="Attachment counter loading..."/>
                        </button>
                        <button t-if="chatter.thread.allAttachments.length > 0" class="o_ChatterTopbar_button o_ChatterTopbar_buttonToggleAttachments btn btn-light btn-primary" type="button" t-att-disabled="!chatter.hasReadAccess" t-att-aria-expanded="chatter.attachmentBoxView ? 'true' : 'false'" t-on-click="chatter.onClickButtonToggleAttachments">
                            <i class="fa fa-paperclip fa-lg me-1" role="img" aria-label="Attachments"/>
                            <span t-if="!chatter.isShowingAttachmentsLoading" class="o_ChatterTopbar_buttonCount o_ChatterTopbar_buttonAttachmentsCount" t-esc="attachmentButtonText"/>
                            <i t-if="chatter.isShowingAttachmentsLoading" class="o_ChatterTopbar_buttonAttachmentsCountLoader fa fa-circle-o-notch fa-spin" aria-label="Attachment counter loading..."/>
                        </button>
                        <t t-if="chatter.hasFollowers and chatter.thread">
                            <FollowerListMenuView
                                className="'o_ChatterTopbar_followerListMenu'"
                                record="chatter.followerListMenuView"
                            />
                            <FollowButtonView t-if="chatter.followButtonView"
                                className="'o_ChatterTopbar_followButton'"
                                record="chatter.followButtonView"
                            />
                        </t>
                    </div>
                </div>
            </div>
            <button t-if="chatter.hasTopbarCloseButton" class="o_ChatterTopbar_buttonClose btn btn-dark flex-shrink-0 rounded-bottom-3" aria-label="Close" t-on-click="chatter.onClickChatterTopbarClose">
                <i class="oi oi-large oi-close"/>
            </button>
        </div>
    </t>

</templates>
