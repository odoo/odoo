<?xml version="1.0" encoding="utf-8"?>
<odoo><data>
    <!-- Sub nav -->
    <template id="user_profile_sub_nav" name="User profile subnav">
        <div class="o_wprofile_all_users_nav d-flex align-items-center justify-content-between mb-4">
            <div class="d-md-flex align-items-center gap-4">
                <ul class="breadcrumb m-0 p-0">
                    <li t-attf-class="breadcrumb-item #{'active' if not view_user else ''}">
                        <a href="/profile/users">Users</a>
                    </li>
                    <li t-if="view_user" class="breadcrumb-item active">
                        <a><t t-esc="view_user"/></a>
                    </li>
                </ul>
            </div>
            <!-- Mobile Search -->
            <a data-bs-target="#o_wprofile_search_modal"
               data-bs-toggle="modal"
               role="button"
               title="Search Products"
               href="#"
               class="btn btn-light d-sm-none"
            >
                <i class="oi oi-search" role="img"/>
            </a>
            <div
                id="o_wprofile_search_modal"
                class="modal fade css_editable_mode_hidden"
                aria-hidden="true"
                tabindex="-1"
                >
                <div class="modal-dialog modal-lg pt-5">
                    <div class="modal-content mt-5 bg-transparent border-0">
                        <div class="o_container_small">
                            <t t-call="website.website_search_box_input">
                                <t t-set="action" t-valuef="/profile/users"/>
                                <t t-set="placeholder">Search users</t>
                                <input type="hidden" name="group_by" t-att-value="group_by"/>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Search -->
            <t t-call="website.website_search_box_input">
                <t t-set="_form_classes" t-value="'d-none d-sm-block'"/>
                <t t-set="action" t-valuef="/profile/users"/>
                <t t-set="placeholder">Search users</t>
                <input type="hidden" name="group_by" t-att-value="group_by"/>
            </t>
        </div>
    </template>

    <!--
    Single User Profile Page
    -->

    <!-- Edit Profile Page -->
    <template id="user_profile_edit_main" name="Edit Profile">
        <t t-set="body_classname" t-value="'o_wprofile_body'"/>
        <t t-call="website.layout">
            <div id="wrap" class="o_wprofile_wrap">
                <div class="container pt-4 pb-5">
                    <t t-call="website_profile.user_profile_edit_content"/>
                </div>
            </div>
        </t>
    </template>

        <template id="user_profile_edit_content" name="Edit Profile">
        <h1 class="h3 mb-0">Edit Profile</h1>
        <p class="text-muted">Manage your profile details.</p>
        <div>
            <form t-attf-action="/profile/user/save" method="post" role="form" class="o_wprofile_editor_form js_website_submit_form row" enctype="multipart/form-data">
                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <input type="file" class="d-none o_forum_file_upload" name="ufile" accept="image/*"/>
                <input type="hidden" name="url_param" t-att-value="request.params.get('url_param')"/>
                <div class="col-lg-8">
                    <div class="d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-3 gap-md-0 my-4">
                        <div class="d-flex">
                            <img class="o_wforum_avatar_img rounded-circle me-3" t-att-src="website.image_url(user, 'avatar_128')" style="width: 90px; height: 90px;"/>
                            <div>
                                <h2 class="h4 mb-0" t-field="user.name"/>
                                <p class="mb-1 text-muted" t-field="user.partner_id.email"/>
                                <div class="form-check">
                                    <label class="form-check-label" for="user_website_published" t-if="user.id == uid">Public profile</label>
                                    <input type="checkbox" class="form-check-input" name="website_published" id="user_website_published" value="True" t-if="not user.website_published"/>
                                    <input type="checkbox" class="form-check-input" name="website_published" id="user_website_published" value="True" checked="checked" t-if="user.website_published"/>
                                </div>
                            </div>
                        </div>
                        <div>
                            <a href="#" class="o_forum_profile_pic_edit btn border" aria-label="Edit">
                                Edit profile image
                            </a>
                            <a href="#" title="Clear" aria-label="Clear" class="btn btn-light o_forum_profile_pic_clear">
                                <i class="fa fa-trash-o"/>
                            </a>
                        </div>
                    </div>
                    <div class="row gy-3">
                        <input name="user_id" t-att-value="user.id" type="hidden"/>
                        <div class="ol-12">
                            <label class="form-label" for="user_name">Name</label>
                            <input type="text" class="form-control" name="name" id="user_name" required="True" t-attf-value="#{user.name}"/>
                        </div>
                        <div class="col-6">
                            <label class="form-label" for="user_website">Website</label>
                            <input type="text" class="form-control" name="website" id="user_website" t-attf-value="#{user.partner_id.website or ''}"/>
                        </div>
                        <div class="col-6">
                            <div t-if="email_required" class="alert alert-danger alert-dismissable oe_email_required" role="alert">
                                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                                <p>Please enter a valid email address in order to receive notifications from answers or comments.</p>
                            </div>
                            <label class="form-label" for="user_email">Email</label>
                            <input type="text" class="form-control" name="email" id="user_email" required="True" t-attf-value="#{user.partner_id.email}"/>
                        </div>
                        <div class="col-6">
                            <label class="form-label" for="user_city">City</label>
                            <input type="text" class="form-control" name="city" id="user_city" t-attf-value="#{user.partner_id.city or ''}"/>
                        </div>
                        <div class="col-6">
                            <label class="form-label">Country</label>
                            <select class="form-select" name="country">
                                <option value="">Country...</option>
                                <t t-foreach="countries or []" t-as="country">
                                    <option t-att-value="country.id" t-att-selected="country.id == user.partner_id.country_id.id"><t t-esc="country.name"/></option>
                                </t>
                            </select>
                        </div>
                        <div class="col-12">
                            <label class="form-label" for="description">Biography</label>
                            <textarea name="description" id="description" style="min-height: 120px"
                                class="form-control o_wysiwyg_loader" placeholder="Write a few words about yourself..." t-att-content="user.partner_id.website_description"><t t-out="user.partner_id.website_description"/></textarea>
                        </div>
                        <div class="col">
                            <button type="submit" class="btn btn-primary o_wprofile_submit_btn">Save changes</button>
                        </div>
                    </div>
                </div>
            </form>
        </div>
    </template>

    <!-- Profile Page -->
    <template id="user_profile_main" name="Profile Page">
        <t t-set="body_classname" t-value="'o_wprofile_body'"/>
        <t t-call="website.layout">
            <div id="wrap" class="o_wprofile_wrap mt-0">
                <div class="container mt-4">
                    <t t-call="website_profile.user_profile_sub_nav">
                        <t t-set="view_user"><t t-esc="user.name"/></t>
                    </t>
                    <t t-call="website_profile.user_profile_content"/>
                </div>
            </div>
        </t>
    </template>

    <template id="user_profile_content" name="Profile Page Content">
        <div class="row">
            <!-- ========== PROFILE CONTENT ========== -->
            <div class="col-12 col-xl-9 position-relative">
                <div class="d-flex flex-column flex-lg-row align-items-center align-items-lg-start gap-4 mb-5">
                    <img class="o_wprofile_pict o_avatar rounded-circle align-self-lg-start" t-attf-src="#{website.image_url(user, 'avatar_1024')}"/>
                    <div class="d-flex flex-column flex-lg-row align-items-center align-items-lg-start flex-grow-1 gap-3">
                        <div class="flex-grow-1">
                            <h1 class="o_card_people_name h4">
                                <span t-field="user.name"/><small t-if="user.karma == 0"> (not verified)</small>
                            </h1>
                        </div>
                        <a class="btn btn-light" t-if="request.env.user == user and user.karma != 0 or request.env.user._is_admin()" t-attf-href="/profile/edit?url_param=#{edit_button_url_param}&amp;user_id=#{user.id}">
                            Edit profile
                        </a>
                        <div class="d-flex flex-column align-items-center gap-1 d-lg-none small text-center">
                            <div t-if="user.partner_id.company_name">
                                <i class="fa fa-building-o fa-fw me-1" role="img"/>
                                <span t-field="user.partner_id.company_name"/>
                            </div>
                            <div>
                                <i class="fa fa-users" role="img"/>
                                <span>Joined on <span t-field="user.create_date" t-options='{"format": "d MMM Y"}'/></span>
                            </div>
                            <div t-if="user.website">
                                <i class="fa fa-globe fa-fw me-1" role="img"/>
                                <span t-field="user.website"/>
                            </div>
                            <div t-if="user.city or user.country_id">
                                <i class="fa fa-map-marker fa-fw me-1" role="img"/>
                                <span t-field="user.city"/><span class="ms-1" t-if="user.country_id">(<span t-field="user.country_id"/>)</span>
                            </div>
                        </div>
                    </div>

                </div>
                <ul class="nav nav-underline o_wprofile_nav_tabs flex-nowrap overflow-x-auto" role="tablist" id="profile_extra_info_tablist">
                    <li class="nav-item text-nowrap">
                        <a role="tab" aria-controls="about" href="#profile_tab_content_about" t-attf-class="nav-link #{'active' if not active_tab or active_tab == 'about' else ''}" data-bs-toggle="tab">About</a>
                    </li>
                </ul>
                <div class="tab-content py-4 o_wprofile_tabs_content mb-4" id="profile_extra_info_tabcontent">
                    <div role="tabpanel" t-attf-class="tab-pane #{ 'show active' if not active_tab or active_tab == 'about' else '' }" id="profile_tab_content_about">
                        <div class="o_wprofile_email_validation_container">
                            <t t-call="website_profile.email_validation_banner">
                                <t t-set="redirect_url" t-value="'/profile/user/%s' % user.id"/>
                                <t t-set="additional_validation_email_message"/>
                            </t>
                        </div>
                        <div t-if="user.partner_id.website_description or (request.env.user == user and user.karma != 0) or request.env.user._is_admin()" class="o_wprofile_editor_form mb-5">
                            <h5 class="mb-3">Biography</h5>
                            <div t-if="(not user.partner_id.website_description)" class="alert alert-light mb-0">
                                <a t-attf-href="/profile/edit?url_param=#{edit_button_url_param}&amp;user_id=#{user.id}" class="alert-link text-decoration-underline fw-normal">Add a bio</a>
                                to share your skills and interests, and connect with the community.
                            </div>
                            <span class="o_forum_profile_bio text-break" t-field="user.partner_id.website_description"/>
                            <t t-call="website_profile.user_biography_editor"/>
                        </div>
                        <div id="profile_about_badge" class="mb-5">
                            <h5 class="mb-3">Badges</h5>
                            <t t-call="website_profile.user_badges"></t>
                        </div>
                    </div>
                </div>
            </div>
            <!-- ========== SIDEBAR ========== -->
            <div class="col-12 col-md-4 col-xl-3 mt-3 mt-md-0 d-none d-lg-block">
                <div class="o_wprofile_sidebar bg-100 rounded p-3 d-flex flex-column gap-3">
                    <div t-if="user.rank_id" t-call="website_profile.profile_next_rank_card" class="d-flex flex-column gap-3"/>
                    <hr/>
                    <div t-if="user.partner_id.company_name">
                        <i class="fa fa-building-o fa-fw me-1" role="img"/>
                        <span t-field="user.partner_id.company_name"/>
                    </div>
                    <div>
                        <i class="fa fa-users" role="img"/>
                        <span>Joined on <span t-field="user.create_date" t-options='{"format": "d MMM Y"}'/></span>
                    </div>
                    <div t-if="user.website">
                        <i class="fa fa-globe fa-fw me-1" role="img"/>
                        <span t-field="user.website"/>
                    </div>
                    <div t-if="user.city or user.country_id">
                        <i class="fa fa-map-marker fa-fw me-1" role="img"/>
                        <span t-field="user.city"/><span class="text-nowrap ms-1" t-if="user.country_id">(<span t-field="user.country_id"/>)</span>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="user_biography_editor" name="Edit User Biography">
        <form t-attf-action="/profile/user/save" method="post" role="form" class="o_forum_profile_bio_form js_website_submit_form row d-none">
            <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
            <input name="user_id" t-att-value="user.id" type="hidden"/>
            <input name="name" t-att-value="user.name" type="hidden"/>
            <input name="website" t-att-value="user.partner_id.website" type="hidden"/>
            <input name="email" t-att-value="user.partner_id.email" type="hidden"/>
            <input name="city" t-att-value="user.partner_id.city" type="hidden"/>
            <input name="country" t-att-value="user.partner_id.country_id.id" type="hidden"/>
            <div class="row">
                <div class="mb-1 col-12">
                    <textarea name="description" id="description" style="min-height: 120px"
                        class="form-control o_wysiwyg_loader" placeholder="Write a few words about yourself..."
                        t-att-content="user.partner_id.website_description">
                        <t t-out="user.partner_id.website_description"/>
                    </textarea>
                </div>
                <div class="col">
                    <button type="submit" class="btn btn-primary o_wprofile_submit_btn">Update</button>
                </div>
            </div>
        </form>
    </template>

    <template id="profile_next_rank_card" name="Profile Next Rank Card">
        <div class="o_wprofile_progress_circle">
            <t t-set="next_rank_id" t-value="next_rank_id or user._get_next_rank()"/>
            <a href="/profile/ranks_badges" t-field="user.rank_id"/>
            <t t-if="next_rank_id and user.rank_id">
                <t t-if="(next_rank_id.karma_min - user.rank_id.karma_min) > 0">
                    <t t-set="user_points" t-value="int(100*(user.karma - user.rank_id.karma_min)/(next_rank_id.karma_min - user.rank_id.karma_min))"/>
                </t>
                <t t-else="">
                    <t t-set="user_points" t-value="0"/>
                </t>
            </t>
            <t t-elif="user.rank_id">
                <t t-set="user_points" t-value="100"/>
            </t>
            <t t-else="">
                <t t-set="user_points" t-value="0"/>
            </t>
            <div class="d-flex align-items-center gap-2">
                <div class="progress flex-grow-1" role="progressbar" aria-label="Example 1px high" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100" style="height: .5rem;">
                    <div class="progress-bar" t-attf-style="width: #{user_points}%"></div>
                </div>
                <small><t t-out="user_points"/>%</small>
            </div>
        </div>
        <div t-if="next_rank_id and user.rank_id">
            <span class="fw-bold">Next rank:</span>
            <div class="d-flex gap-2">
                <t t-set="rank_id" t-value="next_rank_id if next_rank_id else user.rank_id"/>
                <div t-field="rank_id.image_1920"
                    t-attf-style="max-width: {{img_max_width or '50%'}};"
                    t-options="{'widget': 'image', 'preview_image': 'image_128', 'width': 24, 'height': 24}"/>
                    <a href="/profile/ranks_badges" t-field="rank_id.name"/>
            </div>
        </div>
    </template>

    <template id="user_badges" name="User Bagdes">
        <div t-if="user.badge_ids" class="row row-cols-2 row-cols-lg-3 gy-4">
            <t t-foreach="user.badge_ids" t-as="badge">
                <t t-if="badge.badge_id.website_published">
                    <div class="col d-flex align-items-center">
                        <div t-if="badge.badge_id.image_1920 and badge.badge_id.level" class="flex-shrink-0" t-field="badge.badge_id.image_1920"
                            t-options="{'widget': 'image', 'preview_image': 'image_128', 'class': 'o_object_fit_cover me-0', 'style': 'height: 48px; width: 48px;'}"/>
                        <img t-else=""
                            width="48" height="48"
                            t-attf-src="/website_profile/static/src/img/badge_#{badge.badge_id.level}.svg"
                            class="o_object_fit_cover me-0"
                            t-att-alt="badge.badge_id.name"/>
                        <div class="flex-grow-1 p-0 ms-2 small fw-bold text-truncate" t-field="badge.badge_id.name"/>
                    </div>
                </t>
            </t>
        </div>
         <div class="mb-3" t-elif="request.env.user == user">
            Badges are your collection of achievements. Wear them proudly! <br />
            <a t-if="not user.badge_ids and badge_category" t-attf-href="/profile/ranks_badges?badge_category=#{badge_category}&amp;url_origin=#{request.httprequest.path}&amp;name_origin=#{user.name}"
            class="btn-link"><i class="fa fa-arrow-right"/> Get Badges</a>
            <a t-else="" t-attf-href="/profile/ranks_badges?url_origin=#{request.httprequest.path}&amp;name_origin=#{user.name}"
            class="btn-link"><i class="fa fa-arrow-right"/> Get Badges</a>
        </div>
        <div t-else="" class="mb-3 d-inline-block">
            <p class="text-muted">No badges yet!</p>
        </div>
        <div t-if="request.env.user.id != user.id" class="text-end d-inline-block pull-right">
            <a t-if="not user.badge_ids and badge_category" t-attf-href="/profile/ranks_badges?badge_category=#{badge_category}&amp;url_origin=#{request.httprequest.path}&amp;name_origin=#{user.name}"
            class="btn-link btn-sm"><i class="oi oi-arrow-right"/> All Badges</a>
            <a t-else="" t-attf-href="/profile/ranks_badges?url_origin=#{request.httprequest.path}&amp;name_origin=#{user.name}"
            class="btn-link btn-sm"><i class="oi oi-arrow-right me-1"/>All Badges</a>
        </div>
    </template>

    <!-- About Ranks and badges Page -->
    <template id="rank_badge_main" name="Ranks Page">
        <t t-call="website.layout">
            <div class="container mb32 mt48">
                <nav t-if="request.params.get('url_origin') and request.params.get('name_origin')" aria-label="breadcrumb">
                    <ol class="breadcrumb p-0 bg-white">
                        <li class="breadcrumb-item">
                            <a t-att-href="(request.website.domain or '') + '/' + request.params.get('url_origin').lstrip('/')" t-esc="request.params.get('name_origin')"/>
                        </li>
                        <li class="breadcrumb-item">Badges</li>
                    </ol>
                </nav>
                <div class="row justify-content-between" t-if="ranks">
                    <div class="col-12 col-md-6 col-lg-5">
                        <h1>Ranks</h1>
                        <p class="lead mb-4">Keep learning with <t t-esc="website.company_id.name"/>. Collect points on the forum or on the eLearning platform. Those points will make you reach new ranks.</p>
                        <h5>How do I earn badges?</h5>
                        <p>When you finish a course or reach milestones, you're awarded badges.</p>
                        <h5>How do I score more points?</h5>
                        <p>You can score more points by answering quizzes at the end of each course content. Points can also be earned on the forum. Follow this link to the guidelines of the forum.</p>
                    </div>
                    <div class="col-12 col-md-5 col-lg-4">
                        <div class="card">
                            <div class="card-header border-bottom-0">Ranks</div>
                            <ul class="list-group list-group-flush">
                                <t t-foreach="ranks" t-as="rank">
                                    <li t-attf-class="list-group-item">
                                        <div class="d-flex align-items-center">
                                            <div t-field="rank.image_1920"
                                                t-options="{'widget': 'image', 'preview_image': 'image_128', 'class': 'me-2 o_image_40_cover'}"/>
                                            <div class="flex-grow-1">
                                                <h5 class="mt-0 mb-0" t-field="rank.name"/>
                                                <span class="badge text-bg-success"><span t-field="rank.karma_min"/></span> point<span t-if="rank.karma_min">s</span>
                                            </div>
                                        </div>
                                    </li>
                                </t>
                            </ul>
                        </div>
                    </div>
                </div>
                <t t-call="website_profile.badge_content"/>
            </div>
        </t>
    </template>

    <template id="badge_content" name="Badges Page content">
        <div id="website_profile_badges">
            <div class="row">
                <div class="col-12">
                    <h1 class="mt-4 mt-lg-2">Badges</h1>
                    <p class="lead">
                        Besides gaining reputation with your questions and answers,
                        you receive badges for being especially helpful.<br class="d-none d-lg-inline-block"/>Badges
                        appear on your profile page, and your posts.
                    </p>
                </div>
            </div>
            <div class="row col-12 align-items-center p-0" t-foreach="badges" t-as="badge">
                <div class="col-3 d-flex align-items-center">
                    <t t-call="website_profile.badge_header"/>
                </div>
                <div class="col-6">
                    <span t-field="badge.description"/>
                </div>
                <div class="col-3 text-end">
                    <b t-esc="badge.granted_users_count"/>
                    <i class="text-muted"> awarded users</i>
                </div>
            </div>
        </div>
    </template>

    <template id="badge_header">
        <img t-if="not badge.image_1920 and badge.level" t-attf-src="/website_profile/static/src/img/badge_#{badge.level}.svg"
                class="my-1 me-1 wprofile_badge_img" t-att-alt="badge.name"/>
        <div t-else="" t-field="badge.image_1920"
            t-options="{'widget': 'image', 'preview_image': 'image_1024', 'class': 'my-1 me-1 wprofile_badge_img'}"/>
        <a t-if="badge_url" t-att-href="badge_url">
            <h6 t-field="badge.name" class="d-inline my-0"/>
        </a>
        <h6 t-else="" t-field="badge.name" class="d-inline my-0"/>
    </template>

    <!--Access Denied - Profile Page-->
    <template id="profile_access_denied" name="Access Denied - Profile Page">
        <t t-call="website.layout">
            <div class="container mb32 mt48">
                <h1 class="mt32" t-out="denial_reason"/>
                <div id="profile_access_denied_return_link_container">
                    <p><a class="o_translate_inline" t-attf-href="/">Return to the website.</a></p>
                </div>
            </div>
        </t>
    </template>

    <!--
    All Users Page
    -->
    <template id="users_page_main" name="Users Page">
        <t t-set="body_classname" t-value="'o_wprofile_body'"/>
        <t t-call="website.layout">
            <div class="h-100 d-flex flex-column">
                <div id="wrap" class="o_wprofile_wrap mt-0 pb-5 ">
                    <t t-call="website_profile.users_page_header"/>
                    <t t-if="users">
                        <t t-call="website_profile.users_page_content"/>
                    </t>
                </div>
                <t t-if="not users">
                    <h2 class="text-black m-auto">No Leaderboard Yet :(</h2>
                </t>
            </div>
        </t>
    </template>

    <template id="users_page_header" name="Users Page Header">
        <div class="o_wprofile_all_users_header o_wprofile_gradient mb-n5 pb-5">
            <div class="container mt-4">
                <t t-call="website_profile.user_profile_sub_nav"/>
                <div class="d-flex align-items-center justify-content-between">
                    <h1 class="h4">All Users</h1>
                    <div class="mb-3 btn-group">
                        <a t-attf-class="btn btn-light #{ 'active' if group_by == 'week' else ''}"
                            t-att-href="'/profile/users?' + keep_query('search', group_by='week')">Week</a>
                        <a t-attf-class="btn btn-light #{ 'active' if group_by == 'month' else ''}"
                            t-att-href="'/profile/users?' + keep_query('search', group_by='month')">Month</a>
                        <a t-attf-class="btn btn-light #{ 'active' if group_by == 'all' else ''}"
                            t-att-href="'/profile/users?' + keep_query('search')">All time</a>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <template id="users_page_content">
        <div class="container mb32">
            <div class="row mb-3">
                <a class="col-md-4 d-flex flex-grow-1 text-reset text-decoration-none" t-foreach="top3_users" t-as="user" t-attf-href="/profile/user/#{user['id']}">
                    <t t-call="website_profile.top3_user_card"></t>
                </a>
            </div>
            <div class="table-responsive" t-if="users">
                <table class="table" t-if="users">
                    <thead>
                        <tr class="small">
                        <th scope="col" class="text-muted text-uppercase small">Rank</th>
                        <th scope="col" class="text-muted text-uppercase small">User</th>
                        <th scope="col" class="text-muted text-end text-uppercase small"><span t-if="user['karma_gain']">XP Progression</span></th>
                        <th scope="col" class="text-muted text-end text-uppercase small"/>
                        <th scope="col" class="text-muted text-end text-uppercase small">Total XP</th>
                        <th scope="col" class="text-muted text-end text-uppercase small">Badges</th>
                        <th scope="col" class="text-muted text-end text-uppercase small">Certifications</th>
                        </tr>
                    </thead>
                    <t t-foreach="users" t-as="user">
                        <tr t-attf-onclick="location.href='/profile/user/#{user['id']}';" t-attf-class="o_wprofile_pointer bg-white #{user['id'] == user_id.id and 'o_wprofile_border_focus'}">
                            <t t-call="website_profile.all_user_card"/>
                        </tr>
                    </t>
                    <t t-if="my_user">
                        <!-- keep same table to avoid missaligment -->
                        <tr>
                            <td colspan="7"></td>
                        </tr>
                        <t t-set='user' t-value='my_user'/>
                        <tr t-attf-onclick="location.href='/profile/user/#{user['id']}';" t-attf-class="o_wprofile_pointer bg-white o_wprofile_border_focus">
                            <t t-call="website_profile.all_user_card">
                            </t>
                        </tr>
                    </t>
                </table>
            </div>
            <t t-if='search and not users'>
                <div class='alert alert-warning'>No user found for <strong><t t-esc="search"/></strong>. Try another search.</div>
            </t>
            <div class="d-flex justify-content-center">
                <t t-call="website_profile.pager_nobox"/>
            </div>
        </div>
    </template>

    <template id="top3_user_card" name="Top 3 User Card">
        <div class="card w-100 mb-2 o_wprofile_pointer">
            <div class="card-body">
                <div class="d-flex">
                    <img class="rounded-circle img-fluid me-3"
                        style="width: 4rem; height: 4rem; object-fit: cover;"
                         t-att-src="'/profile/avatar/%s?field=avatar_256%s' % (user['id'], '&amp;res_model=%s&amp;res_id=%s' % (record._name, record.id) if record else '')"/>
                    <div>
                        <h2 class="h5 mt-2 mb-0" t-esc="user['name']"/>
                        <span class="badge text-bg-danger fw-normal" t-if="not user['website_published']">Unpublished</span>
                        <span class="text-muted" t-esc="user['rank']"/>
                        <div class="h3 my-2" t-if="user['karma_gain']">
                            <span t-attf-class="badge #{ 'text-bg-success' if user['karma_gain'] > 0 else 'text-bg-warning'}">
                                <t t-if="user['karma_gain'] > 0">+ </t><t t-esc="user['karma_gain']"/> XP
                            </span>
                        </div>
                    </div>
                    <img class="align-self-start ms-auto flex-shrink-0" t-attf-src="/website_profile/static/src/img/rank_#{user_index + 1}.svg" alt="User rank"/>
                </div>
            </div>
            <div class="row mx-0 o_wprofile_top3_card_footer text-nowrap small">
                <div class="col py-3 border-top border-end"><b t-esc="user['karma']"/> <span class="text-muted">XP</span></div>
                <div class="col py-3 border-top border-end"><b t-esc="user['badge_count']"/> <span class="text-muted">Badges</span></div>
            </div>
        </div>
    </template>

    <template id="all_user_card" name="All User Card">
        <td class="align-middle text-muted">
            <strong t-esc="user['position']"/>
        </td>
        <td class="align-middle d-flex">
            <img class="o_object_fit_cover rounded-circle o_wprofile_img_small me-2" width="40" height="40" t-att-src="'/profile/avatar/%s?field=avatar_128%s' % (user['id'], '&amp;res_model=%s&amp;res_id=%s' % (record._name, record.id) if record else '')"/>
            <div>
                <h3 class="h6 mb-0" t-esc="user['name']"/>
                <small class="text-muted" t-esc="user['rank']"/>
            </div>
        </td>
        <td class="align-middle text-nowrap text-end">
            <t t-if="user['karma_gain']">
                <small t-attf-class="fw-bold #{ 'text-success' if user['karma_gain'] > 0 else 'text-warning' }">
                    <t t-if="user['karma_gain'] > 0">+ </t><t t-esc="user['karma_gain']"/> XP
                </small>
                <span class="text-muted">
                    <t t-if="group_by == 'week'">this week</t>
                    <t t-elif="group_by == 'month'">this month</t>
                    <t t-else="">All time </t>
                </span>
            </t>
        </td>
        <td class="align-middle fw-bold text-end text-nowrap">
            <span t-if="not user['website_published']" class="badge text-bg-danger fw-normal m-1">Unpublished</span>
        </td>
        <td class="align-middle fw-bold text-end text-nowrap">
            <span t-esc="user['karma']"/>
        </td>
        <td class="align-middle fw-bold text-end pe-3 text-nowrap all_user_badge_count">
            <span t-esc="user['badge_count']"/>
        </td>
    </template>

    <!-- Custom Pager: lighter than existing one, no box around number, first / end displayed -->
    <template id="pager_nobox" name="Pager (not box display)">
        <ul t-if="pager['page_count'] > 1" t-attf-class="o_wprofile_pager fw-bold pagination m-0">
            <li t-attf-class="page-item o_wprofile_pager_arrow #{'disabled' if pager['page']['num'] == 1 else ''}">
                <a t-att-href=" pager['page_first']['url'] if pager['page']['num'] != 1 else None" class="page-link"><i class="fa fa-step-backward"/></a>
            </li>
            <li t-attf-class="page-item o_wprofile_pager_arrow #{'disabled' if pager['page']['num'] == 1 else ''}">
                <a t-att-href=" pager['page_previous']['url'] if pager['page']['num'] != 1 else None" class="page-link"><i class="fa fa-caret-left"/></a>
            </li>
            <t t-foreach="pager['pages']" t-as="page">
                <li t-attf-class="page-item #{'active disabled bg-primary rounded-circle' if page['num'] == pager['page']['num'] else ''}"> <a t-att-href="page['url']" class="page-link" t-out="page['num']"/></li>
            </t>
            <li t-attf-class="page-item o_wprofile_pager_arrow #{'disabled' if pager['page']['num'] == pager['page_count'] else ''}">
                <a t-att-href="pager['page_next']['url'] if pager['page']['num'] != pager['page_count'] else None" class="page-link"><i class="fa fa-caret-right"/></a>
            </li>
            <li t-attf-class="page-item o_wprofile_pager_arrow #{'disabled' if pager['page']['num'] == pager['page_count'] else ''}">
                <a t-att-href=" pager['page_last']['url'] if pager['page']['num'] != pager['page_count'] else None" class="page-link"><i class="fa fa-step-forward"/></a>
            </li>
        </ul>
    </template>

    <template id="email_validation_banner">
        <t t-set="send_alert_classes" t-value="send_alert_classes if send_alert_classes else 'alert alert-danger alert-dismissible fade show'"/>
        <t t-set="done_alert_classes" t-value="done_alert_classes if done_alert_classes else 'alert alert-success alert-dismissible fade show'"/>
        <t t-set="my_account_redirect" t-value="'/my/account?redirect='+redirect_url"/>

        <div t-if="not is_public_user and not user.email" t-att-class="send_alert_classes" role="alert">
            Your account does not have an email set up. Please set it up on <a class="alert-link" t-att-href="my_account_redirect">your account settings</a>.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <div t-elif="not validation_email_sent and not is_public_user and user.karma == 0" t-att-class="send_alert_classes" role="alert">
            Your Account has not yet been verified.<br/>
            Click <a class="send_validation_email alert-link" href="#" t-att-data-redirect_url="redirect_url"><u>here</u></a> to receive a verification email<t t-esc="additional_validation_email_message"/>!
            <button type="button" class="btn-close validation_email_close" data-bs-dismiss="alert" aria-label="Close"/>
        </div>
        <div t-elif="validation_email_sent and not validation_email_done" t-att-class="done_alert_classes">
            Verification Email sent to <t t-out="user.email"/>!<br/>
            Did not receive it? <a class="alert-link" t-att-href="my_account_redirect"><u>Correct your email address</u></a> 
            or <a class="send_validation_email alert-link" href="#" t-att-data-redirect_url="redirect_url"><u>Send Again</u></a>.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
        <div t-if="validation_email_done" t-att-class="done_alert_classes" role="status">
            <button type="button" class="btn-close validated_email_close" data-bs-dismiss="alert" aria-label="Close"/>
            <span id="email_validated_message">Congratulations! Your email has just been validated.</span>
            <span t-esc="additional_validated_email_message"/>
        </div>
    </template>

</data></odoo>
