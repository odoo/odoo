<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="product_wishlist" inherit_id="website_sale_wishlist.product_wishlist">
        <xpath expr="//button[hasclass('o_wish_rm')]" position="before">
            <small class="text-danger d-md-block"
                   t-if="not wish.product_id.allow_out_of_stock_order and wish.product_id._is_sold_out()">
                Temporarily out of stock
            </small>
        </xpath>
        <xpath expr="//button[hasclass('o_wish_rm')]" position="after">
            <t t-if="not wish.product_id.allow_out_of_stock_order and wish.product_id._is_sold_out()">
                <div id="add_stock_email_notification_wishlist_div" t-if="not wish.product_id.allow_out_of_stock_order"
                     class="small d-inline-block">
                    <div class="btn btn-link" t-if="not wish.stock_notification"
                         id="add_stock_email_notification_wishlist_button">
                        <small>
                            <i class="fa fa-envelope-o"/>
                            Get notified when back in stock
                        </small>
                    </div>
                    <div id="add_stock_email_notification_wishlist_form" class="d-none">
                        <div class="input-group">
                            <input class="input-group-append"
                                   name="email"
                                   type="text"
                                   placeholder="youremail@gmail.com"
                                   t-att-value="request.env.user.partner_id.email"/>
                            <div class="input-group-append">
                                <div id="add_stock_email_notification_wishlist_form_button"
                                     class="btn btn-secondary">
                                    <i class="fa fa-paper-plane"/>
                                </div>
                            </div>
                            <div class="input-group-append">
                                <div id="add_stock_email_notification_product_input_incorrect" class="btn d-none">
                                    <i class="fa fa-times text-danger"/>
                                     Invalid email
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="add_stock_email_notification_wishlist_success_message"
                         t-att-class="'' if wish.stock_notification else 'd-none'">
                        <i class="fa fa-bell"/>
                        We'll notify you once the product is back in stock.
                    </div>
                </div>
            </t>
        </xpath>
    </template>
</odoo>
