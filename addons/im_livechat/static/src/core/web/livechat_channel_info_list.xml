<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="im_livechat.LivechatChannelInfoList">
        <ActionPanel title.translate="Information" minWidth="200" initialWidth="env.inMeetingView ? 400 : 300" icon="'fa fa-info'">
            <a t-if="visitorProfileURL" class="btn btn-primary mt-1" t-on-click="openVisitorProfile" t-att-href="visitorProfileURL" title="View Contact">
                View Contact
            </a>
            <div t-if="!props.thread.livechat_end_dt" class="o-livechat-LivechatChannelInfoList d-flex flex-column bg-inherit gap-1">
                <h6 class="pt-3 mb-1">Status</h6>
                <t t-call="im_livechat.LivechatStatusSelection">
                    <t t-set="templateParams" t-value="{ livechatThread: props.thread }"/>
                </t>
            </div>
            <div t-if="props.thread.livechat_end_dt" class="o-livechat-LivechatChannelInfoList d-flex flex-column bg-inherit gap-1">
                <h6 class="pt-3 mb-1">Outcome</h6>
                <div class="d-flex text-truncate">
                    <t t-if="props.thread.livechat_outcome === 'no_answer'">Never Answered</t>
                    <t t-elif="props.thread.livechat_outcome === 'no_agent'">No one Available</t>
                    <t t-elif="props.thread.livechat_outcome === 'no_failure'">Success</t>
                    <t t-elif="props.thread.livechat_outcome === 'escalated'">Escalated</t>
                </div>
            </div>
            <div class="d-flex flex-column bg-inherit gap-1">
                <h6 class="pt-3 mb-0">Notes</h6>
                <textarea class="form-control" rows="3" placeholder="Add your notes here..." t-model="props.thread.livechatNoteText" t-on-blur="onBlurNote"></textarea>
            </div>
            <div class="d-flex flex-column bg-inherit gap-1" t-ref="tagsContainer">
                <h6 class="align-items-baseline pt-3 d-flex">
                    <span class="pt-3 mb-1">Tags</span>
                    <button class="btn btn-link text-dark opacity-75 opacity-100-hover p-0 ms-1" t-on-click="onClickEditTags"><i class="oi oi-plus"/></button>
                </h6>
                <div t-if="conversationTags.length" class="d-flex flex-wrap flex-grow-1 gap-1">
                    <t t-foreach="conversationTags" t-as="tag" t-key="tag.id">
                        <BadgeTag cssClass="'me-1 mb-1'" color="tag.color" text="tag.text"/>
                    </t>
                    <button t-if="this.store.has_access_livechat" class="btn btn-sm btn-link text-dark opacity-75 opacity-100 lh-1" t-on-click="onClickEditTags"><i class="fa fa-pencil"/></button>
                </div>
            </div>
            <div t-if="expectAnswerSteps.length" class="d-flex flex-column bg-inherit gap-1">
                <h6 class="pt-3 mb-0">Chatbot answers</h6>
                <t t-foreach="expectAnswerSteps" t-as="step" t-key="step.id">
                    <div class="d-flex align-items-center gap-1 bg-inherit rounded-3">
                        <i class="fa fa-comment-o me-1"/>
                        <span class="text-truncate" t-esc="step.answer"/>
                    </div>
                </t>
            </div>
            <div t-if="expertiseTags.length" class="d-flex flex-column bg-inherit gap-1">
                <h6 class="pt-3 mb-1">Expertise</h6>
                <div class="d-flex flex-wrap gap-1">
                    <t t-foreach="expertiseTags" t-as="tag" t-key="tag.id">
                        <BadgeTag cssClass="'me-1 mb-1'" text="tag.text"/>
                    </t>
                </div>
            </div>
            <t t-name="extra_infos"/>
            <div t-if="props.thread.livechat_end_dt" class="d-flex flex-column bg-inherit gap-1">
                <h6 class="pt-3 mb-0">Send conversation</h6>
                <TranscriptSender thread="props.thread"/>
            </div>
        </ActionPanel>
    </t>

    <t t-name="im_livechat.LivechatChannelInfoList.info_links">
        <div t-if="templateParams.info_records.length" class="d-flex flex-column bg-inherit gap-1">
            <h3 class="pt-3" t-out="templateParams.title"/>
            <t t-foreach="templateParams.info_records" t-as="record" t-key="record.localId">
                <a
                    class="btn btn-sm btn-secondary d-flex align-items-center justify-content-start gap-1 px-3 py-1 rounded-3"
                    t-att-href="record.href"
                    t-att-data-oe-id="record.id"
                    t-att-data-oe-model="templateParams.model"
                    contenteditable="false"
                    target="_blank"
                >
                    <i class="fa fa-external-link opacity-75"/>
                    <span class="ms-1 fw-bold" t-esc="record.name"/>
                </a>
            </t>
        </div>
    </t>
</templates>
