<?xml version="1.0"?>
<odoo>
    <data>
        <record id="im_livechat_expertise_view_list" model="ir.ui.view">
            <field name="name">im.livechat.expertise.list</field>
            <field name="model">im_livechat.expertise</field>
            <field name="arch" type="xml">
                <list editable="bottom">
                    <field name="name"/>
                    <field name="user_ids" widget="many2many_avatar_user" options="{'no_create': True}"/>
                </list>
            </field>
        </record>

        <record id="im_livechat_expertise_view_form" model="ir.ui.view">
            <field name="name">im.livechat.expertise.form</field>
            <field name="model">im_livechat.expertise</field>
            <field name="arch" type="xml">
                <form>
                    <sheet>
                        <group>
                            <field name="name"/>
                            <field name="user_ids" widget="many2many_avatar_user" options="{'no_create': True}"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <record id="im_livechat_expertise_view_kanban" model="ir.ui.view">
            <field name="name">im.livechat.expertise.kanban</field>
            <field name="model">im_livechat.expertise</field>
            <field name="arch" type="xml">
                <kanban>
                    <templates>
                        <t t-name="card">
                            <div class="d-flex">
                                <field class="fw-bolder flex-grow-1 me-2" name="name"/>
                                <field name="user_ids" widget="many2many_avatar_user" class="ms-auto"/>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="im_livechat_expertise_view_search" model="ir.ui.view">
            <field name="name">im.livechat.expertise.search</field>
            <field name="model">im_livechat.expertise</field>
            <field name="arch" type="xml">
                <search string="LiveChat Expertise Search">
                    <field name="name"/>
                    <field name="user_ids"/>
                    <filter string="My Expertises" name="my_experties" domain="[('user_ids', 'in', uid)]"/>
                    <filter string="Operators" name="operators" context="{'group_by': 'user_ids'}"/>
                </search>
            </field>
        </record>

        <record id="expertise_action" model="ir.actions.act_window">
            <field name="name">Operator Expertise</field>
            <field name="res_model">im_livechat.expertise</field>
            <field name="view_mode">list,form,kanban</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    No expertise found. Let's create one!
                </p>
                <p>
                    Forward live chat conversations to operators with the appropriate expertise using the chatbot.
                </p>
            </field>
        </record>

        <menuitem
            id="expertise_menu"
            name="Operator Expertise"
            parent="livechat_config"
            action="im_livechat.expertise_action"
            sequence="25"
        />
    </data>
</odoo>
