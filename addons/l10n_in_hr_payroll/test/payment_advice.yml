-
  In order to test Advice Line I create a new Advice Line Record  
-
  import datetime
-
  I create a new Payment Advice with IFSC Code
-
  !record {model: hr.payroll.advice, id: payment_advice_1}: 
    name: 'June'
    date: !eval "'%s-06-01' %(datetime.now().year)"
    bank_id: base.res_bank_1
    chaque_nos: '007667'
    line_ids:
      - employee_id: hr.employee_fp
        name: '90125452'
        ifsc_code: 'abn45215145'
        bysal: '25000.00'
      - employee_id: hr.employee_al
        name: '00014521111232'
        ifsc_code: 'sbi45452145'
        bysal: '20000.00'                
-
  I create a new Payment Advice without IFSC Code
-
  !record {model: hr.payroll.advice, id: payment_advice_2}: 
    name: 'July'
    date: !eval "'%s-07-01' %(datetime.now().year)"
    chaque_nos: '007568'
    bank_id: base.res_bank_1
    line_ids:
      - employee_id: hr.employee_fp
        name: '90125452'
        bysal: '25000.00'
      - employee_id: hr.employee_al
        name: '00014521111232'
        bysal: '20000.00'            
-
  I check that the Payment Advice is in draft
-
  !assert {model: hr.payroll.advice, id: payment_advice_1, string: Payment Advice is in draft state}:
    - state == 'draft'
-
  I check that payment advice is confirmed
-    
  !python {model: hr.payroll.advice}: |
    advice_line = self.confirm_sheet(cr, uid, [ref('payment_advice_1')])
-
  !python {model: hr.payroll.advice}: |
    advice_line = self.browse(cr, uid, ref("payment_advice_1"))
    assert (advice_line.state == 'confirm')
-
  In order to test the PDF reports defined on a Payment Advice,we will print a Payment Advice Detail Summary Report when NEFT is checked
-
  !python {model: hr.payroll.advice}: |
    import netsvc, tools, os
    (data, format) = netsvc.LocalService('report.payroll.advice').create(cr, uid, [ref('l10n_in_hr_payroll.payment_advice_1')], {})
    if tools.config['test_report_directory']:
        file(os.path.join(tools.config['test_report_directory'], 'l10n_in_hr_payroll_summary report'+format), 'wb+').write(data)
-
  In order to test the PDF reports defined on a Payment Advice,we will print a Payment Advice Detail Summary Report when NEFT is Not checked
-
  !python {model: hr.payroll.advice}: |
    import netsvc, tools, os
    (data, format) = netsvc.LocalService('report.payroll.advice').create(cr, uid, [ref('l10n_in_hr_payroll.payment_advice_2')], {})
    if tools.config['test_report_directory']:
        file(os.path.join(tools.config['test_report_directory'], 'l10n_in_hr_payroll_summary report'+format), 'wb+').write(data)    
