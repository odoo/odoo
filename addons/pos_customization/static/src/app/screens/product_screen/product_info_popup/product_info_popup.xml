<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_customization.ProductInfoPopup" t-inherit="point_of_sale.ProductInfoPopup" t-inherit-mode="extension">
        <!-- Pos Description -->
        <xpath expr="//div[hasclass('section-inventory')]" position="after">
             <div t-if="props.product.available_in_pos" class="section-pos-description mt-3 mb-4 pb-4 border-bottom text-start">
                 <h3 class="section-title">POS Description</h3>
                 <div class="section-pos-description-body">
                     <span t-out="props.product.pos_description || 'N/A'" />
                 </div>
             </div>
         </xpath>
        <!-- Add POS Alternative Products section below Financials and above footer -->
        <xpath expr="//div[hasclass('financials-order')]" position="after">
            <div t-if="props.product.available_in_pos and props.product.pos_alternative_product_ids.length > 0" class="section-pos-alternatives mt-3 mb-4 pb-4 border-bottom text-start">
                <h3 class="section-title">Alternative Products</h3>
                <div class="product-list pos.productListViewMode d-flex d-flex-wrap overflow-x-auto gap-1 px-2 pt-0 pb-2">
                    <ProductCard
                        t-foreach="props.product.pos_alternative_product_ids.filter(p => p.available_in_pos)" t-as="altProduct" t-key="altProduct.id"
                        productId="altProduct.id"
                        product="altProduct"
                        class="pos.productViewMode"
                        name="altProduct.alternative_name || altProduct.display_name"
                        color="altProduct.pos_categ_ids?.at(-1)?.color"
                        productInfo="true"
                        imageUrl="this.getProductImage(altProduct)"
                        onClick.bind="() => this.addProductToOrder(altProduct)"
                        onProductInfoClick.bind="() => this.onProductInfoClick(altProduct)" />
                </div>
            </div>
        </xpath>
    </t>
</templates>
