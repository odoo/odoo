<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_stock_stock_form_pt" model="ir.ui.view">
        <field name="name">stock.picking.form.view.inherit.pt</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
            <xpath expr="//sheet" position="before">
                <div class="alert alert-warning oe_edit_only" role="alert" name="warning_at_series" invisible="l10n_pt_at_series_id or l10n_pt_stock_atcud">
                  The selected Operation Type (<field name="picking_type_id"/>) does not have an AT Series associated to it. This stock picking will not be hashed.
                </div>
            </xpath>
            <xpath expr="//group[@name='other_infos']" position="after">
                <field name="country_code" invisible="1"/>
                <group name="other_infos_portugal" string="Portugal" invisible="country_code != 'PT'">
                    <field name="l10n_pt_stock_inalterable_hash"/>
                    <field name="l10n_pt_stock_atcud"/>
                </group>
            </xpath>
        </field>
    </record>

    <record id="action_l10n_pt_stock_report_hash_integrity" model="ir.actions.report">
        <field name="name">Portuguese stock hash integrity result PDF</field>
        <field name="model">res.company</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">l10n_pt_stock.report_hash_integrity</field>
        <field name="report_file">l10n_pt_stock.report_hash_integrity</field>
    </record>

    <record model="ir.actions.server" id="action_l10n_pt_stock_check_hash_integrity">
        <field name="name">Portuguese Stock Inalterability Check</field>
        <field name="model_id" ref="l10n_pt_stock.model_res_company"/>
        <field name="state">code</field>
        <field name="code">
            action = env.company._l10n_pt_stock_action_check_hash_integrity()
        </field>
    </record>
</odoo>
