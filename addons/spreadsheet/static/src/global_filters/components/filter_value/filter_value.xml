<?xml version="1.0" encoding="utf-8"?>
<templates>
    <t t-name="spreadsheet_edition.FilterValue"
       >
        <div class="mt-3 text-end">
            <div class="d-flex align-items-center justify-content-between mb-1">
                <div class="fw-bold" t-esc="filter.label"/>
                <button t-if="getters.isGlobalFilterActive(filter.id)"
                        class="btn btn-link p-0"
                        t-on-click="() => this.clear(filter.id)">
                    Clear
                </button>
            </div>
            <div class="o-filter-value d-flex align-items-start w-100 " t-att-class="layout-actions ? '' : 'position-relative p-2 border rounded-3'">
                <div t-if="filter.type === 'text'" class="w-100">
                    <TextFilterValue
                        value="filterValue"
                        label="filter.label"
                        options="textAllowedValues"
                        onValueChanged="(value) => this.onTextInput(filter.id, value)"
                    />
                </div>
                <span t-if="filter.type === 'relation'" class="w-100">
                    <MultiRecordSelector
                        placeholder="' ' + translate(filter.label)"
                        resModel="filter.modelName"
                        resIds="filterValue || []"
                        update="(resIds) => this.onTagSelected(filter.id, resIds)" />
                </span>
                <div t-if="filter.type === 'date'" class="w-100">
                    <select t-if="filter.rangeType === 'relative'"
                        t-on-change="(e) => this.onDateInput(filter.id, e.target.value || undefined)"
                        class="date_filter_values o_input me-3"
                        required="true">
                        <option value="">Select period...</option>
                        <t t-foreach="relativeDateRangesTypes"
                            t-as="range"
                            t-key="range.type">
                            <option t-att-selected="range.type === filterValue"
                                t-att-value="range.type">
                                <t t-esc="range.description"/>
                            </option>
                        </t>
                    </select>
                    <DateFromToValue t-elif="filter.rangeType === 'from_to'"
                        from="filterValue?.from"
                        to="filterValue?.to"
                        onFromToChanged="(value) => this.onDateInput(filter.id, value)"/>

                    <DateFilterValue t-else=""
                        period="filterValue?.period"
                        yearOffset="filterValue?.yearOffset"
                        onTimeRangeChanged="(value) => this.onDateInput(filter.id, value)"/>
                </div>
            </div>
        </div>
    </t>
</templates>
