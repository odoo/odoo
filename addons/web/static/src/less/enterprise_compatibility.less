// ------------------------------------------------------------------
// Odoo
// ------------------------------------------------------------------

// This file is necessary to make the community edition of the Odoo web
// client compatible with the enterprise edition.  

// The problem is that we have two web clients in parallel, and every
// addons should behave properly with both.

@odoo-brand-optional-disabled: #6ED0BC; // Specifically used for status bar status arrows
@odoo-brand-primary: #337ab7;
@odoo-brand-optional: @odoo-brand-primary;
@odoo-brand-secondary: #8f8f8f;
@odoo-form-group-cols: 12;
@odoo-horizontal-padding: 16px;
@odoo-list-grey: #e2e2e0;  // FIXME: listview thead background color
@odoo-main-color-muted: #a8a8a8;
@odoo-main-text-color: #555555;
@odoo-webclient-background-color: #F0EEEE;
@odoo-view-background-color: white;
@odoo-shadow-color: #303030;
@brand-primary: @odoo-brand-primary;

.oe-view-manager {
    background-color: @odoo-webclient-background-color !important;
}

.o_kanban_view {
    background-color: @odoo-webclient-background-color;

    .o_kanban_config i, .o_kanban_quick_add i {
        color: @odoo-main-text-color !important;
        &:hover {
            background-color: darken(@odoo-webclient-background-color, 10%) !important;
        }
    }
    .o_column_title, .o_kanban_title, .o_kanban_add_column, .o_column_unfold {
        color: @odoo-main-text-color !important;
    }

    .o_column_folded {
        background-color: darken(@odoo-webclient-background-color, 5%) !important;
        border-color: darken(@odoo-webclient-background-color, 10%) !important;
    }

    .o_column_quick_create {
        background-color: darken(@odoo-webclient-background-color, 10%) !important;
    }

    &.o_kanban_grouped .o_kanban_group .o_kanban_header {
        margin-bottom: 2px; // For the buttons not to overlap first record's box shaddow on hover
    }
}

.oe_list {
    background-color: white !important;
}

.btn-icon {
    .btn-default;
}

.openerp .oe_avatar {
    float: left;
}

.openerp .oe_button_box {
    float: right;
}

@grid-gutter-width: 0;

.oe-control-panel .row {
    margin-left: 15px;
    margin-right: 15px;
}

// Pager input (to edit pager values)
.o_pager_value > input {
    width: 60px;
    text-align: right;
    &:focus {
        outline: none;
    }
}

.oe_form_field_one2many, .oe_form_field_many2many {
    .oe-view-manager {
        background-color: white;

        .o_kanban_view {
            background-color: white;

            .o_kanban_record {
                box-shadow: none;
            }
        }
    }
}

// Buttons containing only an icon
.o_icon_button {
    background-color: transparent;
    border: 0;
    padding: 0;
    outline: none;
}

// Stars
.o_priority {
    display: inline-block;
    padding: 0;
    margin: 0;
    vertical-align: middle;
    > .o_priority_star {
        display: inline-block;
        font-size: 1.35em;
        &:hover, &:focus {
            text-decoration: none;
            outline: none;
        }

        + .o_priority_star {
            padding-left: 5px;
        }

        &.fa-star-o {
            color: @odoo-main-color-muted;
        }
        &.fa-star {
            color: gold;
        }
    }
}

.oe_title {
    .o_priority > .o_priority_star {
        font-size: inherit;
    }
}

.o_text_overflow {
    display: block;
    max-width: 100%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    vertical-align: top; // To update display context changed by overflow:hidden
}

.oe-x2m-control-panel {
    background-color: white;
}

div.o_checkbox {
    display: inline-block;
    vertical-align: sub;
    > input + span {
        display: none;
    }
}

.openerp .oe_formview {
   .oe_button_box {
        .oe_stat_button {
            text-align: left;

            .o_button_icon {
                width: 30%;
                display: inline-block;
                vertical-align: middle;
            }

            .o_stat_info { // contains the value and text
                display: inline-block;
                vertical-align: middle;
                max-width: 70%;
                line-height: 1.2;

                .o_stat_value {
                    .o_text_overflow;
                    font-weight: 700;
                    color: @odoo-brand-primary;
                }
                .o_stat_text {
                    .o_text_overflow;
                    font-size: small;

                    .o_stat_value {
                        display: inline;
                    }
                }
            }

            // Some buttons only display text and directly use the WidgetButton template instead of StatInfo
            > span {
                .o_stat_info; // layout
                font-size: small;
                white-space: normal; // text on several lines if needed
            }
        }

        + .oe_title {
            width: 400px;
        }

        + .oe_avatar {
            > img {
                max-width: 90px;
                max-height: 90px;
            }

            + .oe_title {
                width: 400px;
                padding-left: 95px;
            }
        }
    }

    .o_row > * {
        width: auto!important; // oe_inline
    }

    .oe_form label {
        font-size: 13px;
    }

    .oe_form_group td:last-child {
        .oe_form_label_help, .oe_form_label {
            font-weight: normal;
        }
    }

    .o_form_field_many2manytags {
        .o-inline-flex-display();
        .o-flex-flow(row, wrap);
        .o-align-items(flex-start);

        .badge {
            .o-flex(0, 0, auto);
            margin: 0 3px 3px 0;
            .o_delete {
                cursor: pointer;
            }
        }

        padding: 0;
        > .oe_form_field_many2one {
            padding: 0;
        }
    }

    &.oe_form_editable .o_form_field_many2manytags {
        border: 1px solid #CCC;
        border-radius: 3px;

        &.o_form_field_empty {
            display: none;
        }

        > .oe_form_field {
            .o-flex(1, 0, 100px);

            input {
                border: none;
            }
        }
    }

    .o_address_format {
        width: 100%;

        > .oe_form_field {
            width: auto;
            display: block;
        }

        > .o_address_street, > .o_address_country {
            clear: left;
            width: 100%;
        }
        > .o_address_city, > .o_address_state, > .o_address_zip {
            float: left;
            margin-right: 2%;
        }
        > .o_address_zip {
            margin-right: 0;
        }
    }
    &.oe_form_editable .o_address_format {
        > .o_address_city {
            width: 38%;
        }
        > .o_address_state {
            width: 33%;
        }
        > .o_address_zip {
            width: 25%;
        }
    }
}

// Search options dropdowns
.o-search-options-dropdown-custom-li() {
    margin: 3px 25px;
    width: auto;
    max-width: 250px;

}
// Open and closed carets in dropdowns
.o_closed_menu {
    position: relative;
    a:before {
        .o-caret-right;
        .o-position-absolute(@top: 50%, @left: 12px);
        margin-top: (-@caret-width-base);
    }
}
.o_open_menu {
    position: relative;
    a:before {
        .o-caret-down;
        .o-position-absolute(@top: 50%, @left: 9px);
        margin-top: (-@caret-width-base);
    }
}

// Favorites Menu -> Add to my dashboard
.o_favorites_menu {
    .o_add_to_dashboard_input {
        .form-control();
    }
    .o_add_to_dashboard_button {
        .btn();
        .btn-default();
    }
}

// Because the `web_planner` module has to work with Odoo community and enterprise without
// code duplication, fine-tune the display of it in the community webclient here
#PlannerDialog {
    top: 35px;
    -webkit-box-shadow: 0 3px 9px #666666;
    box-shadow: 0 3px 9px #666666;
}

