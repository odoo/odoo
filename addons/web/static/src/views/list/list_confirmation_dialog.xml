<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="web.ListView.ConfirmationModal">
        <Dialog size="'md'" title="this.props.title">
            <main role="alert">
                <p>
                    <t t-if="this.props.isDomainSelected">This update will only consider the records of the current page.<br/><br/></t>
                    <t t-if="this.props.nbRecords != this.props.nbValidRecords">
                        <t t-esc="this.validRecordsText"/>
                        <br/>
                    </t>
                    <t t-esc="this.updateConfirmationText"/>
                </p>
                <div class="table-responsive">
                    <table class="o_modal_changes">
                        <tbody>
                            <t t-foreach="this.props.fields" t-as="field" t-key="field_index">
                                <tr>
                                    <td>Field:</td>
                                    <td><t t-esc="field.label"/></td>
                                </tr>
                                <t t-if="field.fieldNode?.type === 'many2many'">
                                    <tr t-if="this.props.changes[field.name].add.length">
                                        <td><span>Add</span>: </td>
                                        <td>
                                            <div class="o_field_many2many_tags">
                                                <t t-foreach="this.getTagProps(this.props.changes[field.name].add, field)" t-as="tag" t-key="tag.id">
                                                    <BadgeTag color="tag.color" text="tag.text"/>
                                                </t>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr t-if="this.props.changes[field.name].remove.length">
                                        <td><span>Remove</span>: </td>
                                        <td>
                                            <div class="o_field_many2many_tags">
                                                <t t-foreach="this.getTagProps(this.props.changes[field.name].remove, field)" t-as="tag" t-key="tag.id">
                                                    <BadgeTag color="tag.color" text="tag.text"/>
                                                </t>
                                            </div>
                                        </td>
                                    </tr>
                                </t>
                                <tr t-else="">
                                    <td>Update to:</td>
                                    <td style="pointer-events: none;">
                                        <span t-if="this.isValueEmpty(field)">None</span>
                                        <span t-elif="this.isValueOperation(field)" t-att-name="field.name">
                                            <t t-out="field.label"></t> <t t-esc="this.props.changes[field.name]"></t>
                                        </span>
                                        <Field t-else="" name="field.name" record="this.props.record" type="field.widget" readonly="true" fieldInfo="field.fieldNode"/>
                                    </td>
                                </tr>
                            </t>
                        </tbody>
                    </table>
                    <div t-if="this.showTip" class="alert alert-info d-flex align-items-center mt-3">
                        <i class="fa fa-lightbulb-o fa-lg me-4"></i>
                        <div class="text-muted">
                            <t t-if="this.showNumberTip">
                                <div>Use the operators "+=", "-=", "*=" and "/=" to update the current value.</div>
                                <div>For example, if the value is "1" and you enter "+=2", it will be updated to "3".</div>
                            </t>
                            <t t-elif="this.showDateTip">
                                <div t-esc="this.dateTip"/>
                                <div t-esc="this.dateTipExample"/>
                            </t>
                        </div>
                    </div>
                </div>
            </main>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="this._confirm" t-ref="autofocus">
                Update
                </button>
                <button t-if="this.props.cancel" class="btn btn-secondary" t-on-click="this._cancel">
                Discard
                </button>
            </t>
        </Dialog>
    </t>

</templates>
