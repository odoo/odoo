<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="web.Many2OneField.CreateConfirmationDialog" owl="1">
        <Dialog title="title" size="'md'">
            <div>
                Create <strong t-esc="props.value"/> as a new <t t-esc="props.name"/>?
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="onCreate">Create</button>
                <button class="btn" t-on-click="() => props.close()">Discard</button>
            </t>
        </Dialog>
    </t>

    <t t-name="web.Many2OneField" owl="1">
        <t t-if="props.readonly">
            <t t-if="!props.canOpen">
                <span>
                    <span t-esc="displayName" />
                    <t t-foreach="extraLines" t-as="extraLine" t-key="extraLine_index">
                        <br />
                        <span t-esc="extraLine" />
                    </t>
                </span>
            </t>
            <t t-else="">
                <a
                    class="o_form_uri"
                    t-att-href="props.value ? `#id=${props.value[0]}&amp;model=${props.relation}` : '#'"
                    t-on-click.prevent="onClick"
                >
                    <span t-esc="displayName" />
                    <t t-foreach="extraLines" t-as="extraLine" t-key="extraLine_index">
                        <br />
                        <span t-esc="extraLine" />
                    </t>
                </a>
            </t>
        </t>
        <t t-else="">
            <div class="o_field_many2one_selection">
                <Many2XAutocomplete
                    value="displayName"
                    id="props.id"
                    placeholder="props.placeholder"
                    resModel="props.relation"
                    autoSelect="true"
                    fieldString="props.string"
                    activeActions="state.activeActions"
                    update="update"
                    quickCreate="quickCreate"
                    context="props.getContext()"
                    getDomain.bind="getDomain"
                    nameCreateField="props.nameCreateField"
                    setInputFloats="setFloating"
                    autocomplete_container="autocompleteContainerRef"
                />
                <t t-if="hasExternalButton">
                    <button
                        type="button"
                        class="btn btn-secondary fa fa-external-link o_external_button"
                        tabindex="-1"
                        draggable="false"
                        aria-label="External link"
                        data-tooltip="External link"
                        t-on-click="onExternalBtnClick"
                    />
                </t>
            </div>
            <div class="o_field_many2one_extra">
                <t t-foreach="extraLines" t-as="extraLine" t-key="extraLine_index">
                    <br t-if="!extraLine_first" />
                    <span t-esc="extraLine" />
                </t>
            </div>
        </t>
    </t>

</templates>
