<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="web.ReportingViews.MeasureMenu" owl="1">
        <Dropdown togglerClass="'btn btn-primary'" t-on-dropdown-item-selected="onMeasureSelected">
            <t t-set-slot="toggler">
                Measures <i class="fa fa-caret-down ml-1"/>
            </t>
            <t t-foreach="sortedMeasures" t-as="measure" t-key="measure">
                <div t-if="!measure_first and measure == '__count'" role="separator" class="dropdown-divider"/>
                <DropdownItem class="o_menu_item dropdown-item"
                    t-att-class="{ active: activeMeasures.includes(measure) }"
                    payload="{ measure: measure }"
                    parentClosingMode="'none'"
                    >
                    <t t-esc="measures[measure].string"/>
                </DropdownItem>
            </t>
        </Dropdown>
    </t>

    <t t-name="web.PivotView.Buttons" owl="1">
        <div class="btn-group" role="toolbar" aria-label="Main actions">
            <t t-call="web.ReportingViews.MeasureMenu">
                <t t-set="activeMeasures" t-value="model.meta.activeMeasures"/>
                <t t-set="measures" t-value="model.meta.measures"/>
            </t>
        </div>
        <div class="btn-group" role="toolbar" aria-label="Pivot settings">
            <t t-set="noDataDisplayed" t-value="!model.hasData() || !model.meta.activeMeasures.length"/>
            <button class="btn btn-secondary fa fa-exchange o_pivot_flip_button" t-on-click="onFlipButtonClicked" data-tooltip="Flip axis" aria-label="Flip axis" t-attf-disabled="{{noDataDisplayed ? 'disabled' : false}}"/>
            <button class="btn btn-secondary fa fa-arrows o_pivot_expand_button" t-on-click="onExpandButtonClicked" data-tooltip="Expand all" aria-label="Expand all" t-attf-disabled="{{noDataDisplayed ? 'disabled' : false}}"/>
            <button class="btn btn-secondary fa fa-download o_pivot_download" t-on-click="onDownloadButtonClicked" data-tooltip="Download xlsx" aria-label="Download xlsx" t-attf-disabled="{{noDataDisplayed ? 'disabled' : false}}"/>
        </div>
    </t>

    <t t-name="web.PivotView" owl="1">
        <div class="o_pivot_view" t-att-class="{o_view_sample_data: model.meta.useSampleModel }">
            <t t-component="constructor.ControlPanel" t-props="controlPanelProps" t-if="props.display.controlPanel !== false">
                <t t-set-slot="control-panel-bottom-left">
                    <t t-call="{{ constructor.buttonTemplate }}"/>
                </t>
            </t>
            <div class="o_content">
                    <t t-if="!(model.hasData() and model.meta.activeMeasures.length) or model.meta.useSampleModel">
                        <t t-if="props.info.noContentHelp" t-call="web.ActionHelper">
                            <t t-set="noContentHelp" t-value="props.info.noContentHelp"/>
                        </t>
                        <t t-else="" t-call="web.NoContentHelper"/>
                    </t>
                    <t t-if="model.hasData() and model.meta.activeMeasures.length">
                        <t t-component="constructor.Renderer" model="model" onCellClicked="onOpenView"/>
                    </t>
            </div>
        </div>
    </t>

</templates>
