<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <t t-name="web.CalendarYearPopover">
        <t t-if="this.env.isSmall">
            <Dialog title="this.dialogTitle">
                <t t-call="{{ this.constructor.subTemplates.body }}" />
                <t t-set-slot="footer">
                    <t t-call="{{ this.constructor.subTemplates.footer }}" />
                </t>
            </Dialog>
        </t>
        <t t-else="">
            <t t-call="{{ this.constructor.subTemplates.popover }}" />
        </t>
    </t>

    <t t-name="web.CalendarYearPopover.popover">
        <div class="position-absolute" style="top: .75rem; right: 1rem;">
            <span class="o_cw_popover_close" t-on-click.stop="() => this.props.close()">
                <i class="fc-close fc-icon fc-icon-x" />
            </span>
        </div>
        <div class="o_cw_body popover-body d-flex flex-column gap-2">
            <t t-call="{{ this.constructor.subTemplates.body }}" />
            <t t-if="this.props.model.canCreate">
                <t t-call="{{ this.constructor.subTemplates.footer }}" />
            </t>
        </div>
    </t>

    <t t-name="web.CalendarYearPopover.body">
        <div t-foreach="this.recordGroups" t-as="recordGroup" t-key="this.recordGroup.title">
            <h5 t-out="this.recordGroup.title" />
            <t t-foreach="this.recordGroup.records" t-as="record" t-key="this.record.id">
                <t t-call="{{ this.constructor.subTemplates.record }}" />
            </t>
        </div>
    </t>

    <t t-name="web.CalendarYearPopover.footer">
        <t t-if="this.props.model.canCreate">
            <a href="#" class="btn-link o_cw_popover_create" t-on-click.prevent="this.onCreateButtonClick">
                <i class="fa fa-plus" />
                Create
            </a>
        </t>
        <t t-else="">
            <button class="btn btn-primary o-default-button" t-on-click="this.props.close">
                <t>Ok</t>
            </button>
        </t>
    </t>

    <t t-name="web.CalendarYearPopover.record">
        <a
            href="#"
            t-on-click.prevent="() => this.onRecordClick(this.record)"
            t-attf-style="{{ this.getRecordStyle(this.record) }}"
            t-attf-class="o_cw_popover_link d-flex align-items-center gap-1 {{ this.getRecordClass(this.record) }} {{this.record.startHour ? 'o_event_dot' : 'o_event_allday'}}"
            t-att-data-id="this.record.id"
            t-att-data-title="this.record.title"
        >
            <span t-if="this.record.startHour"><t t-out="this.record.startHour" /></span>
            <span>
                <i area-hidden="true" t-if="this.record.titleIcon" t-attf-class="me-2 {{this.record.titleIcon}}"/>
                <t t-esc="this.record.title"/>
            </span>
        </a>
    </t>

</templates>
