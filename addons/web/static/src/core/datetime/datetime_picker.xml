<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <t t-name="web.DateTimePicker.Days">
        <div class="d-flex gap-3">
            <t t-foreach="this.items" t-as="month" t-key="this.month.id">
                <div
                    class="o_date_picker d-grid flex-grow-1 rounded overflow-auto"
                    t-on-pointerleave="() => (this.state.hoveredDate = null)"
                >
                    <t t-foreach="this.month.daysOfWeek" t-as="dayOfWeek" t-key="this.dayOfWeek[0]">
                        <div
                            class="o_day_of_week_cell fw-bolder d-flex align-items-center justify-content-center"
                            t-att-title="dayOfWeek[1]"
                        >
                            <div class="text-nowrap overflow-hidden" t-esc="this.props.daysOfWeekFormat === 'narrow' ? this.dayOfWeek[2] : this.dayOfWeek[0]"/>
                        </div>
                    </t>
                    <t t-foreach="this.month.weeks" t-as="week" t-key="this.week.number">
                        <t t-if="this.props.showWeekNumbers">
                            <div
                                class="o_week_number_cell d-flex justify-content-center align-items-center fw-bolder"
                                t-esc="this.week.number"
                            />
                        </t>
                        <t t-foreach="this.week.days" t-as="itemInfo" t-key="this.itemInfo.id">
                            <t t-set="arInfo" t-value="this.getActiveRangeInfo(this.itemInfo)" />
                            <div
                                class="o_date_item_cell o_datetime_button o_center"
                                t-att-class="{
                                    'o_out_of_range text-muted': itemInfo.isOutOfRange,
                                    o_selected: arInfo.isSelected,
                                    o_select_start: arInfo.isSelectStart,
                                    o_select_end: arInfo.isSelectEnd,
                                    o_highlighted: arInfo.isHighlighted,
                                    'o_today fw-bolder': itemInfo.includesToday,
                                    [itemInfo.extraClass]: true,
                                    'opacity-50': !itemInfo.isValid,
                                    'cursor-pointer': itemInfo.isValid,
                                }"
                                t-att-disabled="!itemInfo.isValid"
                                t-on-pointerenter="() => (this.state.hoveredDate = itemInfo.range[0])"
                                t-on-click="() => this.zoomOrSelect(itemInfo)"
                            >
                                <div t-att-class="{'w-75 align-content-center text-center rounded-circle': itemInfo.includesToday}">
                                    <t t-esc="this.itemInfo.label" />
                                </div>
                            </div>
                        </t>
                    </t>
                </div>
            </t>
        </div>
        <div t-if="this.props.type === 'datetime'" class="d-flex gap-3 justify-content-between">
            <div class="d-flex gap-1 align-items-center">
                <TimePicker
                    t-if="this.state.timeValues[0]"
                    value="this.state.timeValues[0]"
                    onChange="(newTime) => this.onTimeChange(0, newTime)"
                    minutesRounding="this.props.rounding"
                    showSeconds="this.props.rounding === 0"
                    inputCssClass="'o_input'"
                />
                <i t-if="this.state.timeValues[0] and this.state.timeValues[1]" class="fa fa-long-arrow-right"/>
                <TimePicker
                    t-if="this.state.timeValues[1]"
                    value="this.state.timeValues[1]"
                    onChange="(newTime) => this.onTimeChange(1, newTime)"
                    minutesRounding="this.props.rounding"
                    showSeconds="this.props.rounding === 0"
                    inputCssClass="'o_input'"
                />
            </div>
            <t t-slot="buttons" />
        </div>
    </t>

    <t t-name="web.DateTimePicker.Grid">
        <div class="o_date_item_picker d-grid">
            <t t-foreach="this.items" t-as="itemInfo" t-key="this.itemInfo.id">
                <t t-set="arInfo" t-value="this.getActiveRangeInfo(this.itemInfo)" />
                <div
                    class="o_date_item_cell o_datetime_button o_center cursor-pointer"
                    t-att-class="{
                        o_selected: arInfo.isSelected,
                        o_select_start: arInfo.isSelectStart,
                        o_select_end: arInfo.isSelectEnd,
                        o_highlighted: arInfo.isHighlighted,
                        o_today: itemInfo.includesToday,
                        'opacity-50': !itemInfo.isValid,
                    }"
                    t-att-disabled="!itemInfo.isValid"
                    t-on-click="() => this.zoomOrSelect(itemInfo)"
                >
                    <t t-esc="this.itemInfo.label" />
                </div>
            </t>
        </div>
    </t>

    <t t-name="web.DateTimePicker">
        <div
            t-att-class="{'o_datetime_picker_reduced': !this.props.showWeekNumbers}"
            class="o_datetime_picker d-flex flex-column gap-2 user-select-none p-2"
            t-attf-style="--DateTimePicker__Day-template-columns: {{ this.props.showWeekNumbers ? 8 : 7 }}"
        >
            <nav class="o_datetime_picker_header d-flex">
                <button
                    class="o_previous btn btn-sm opacity-75 opacity-100-hover"
                    t-on-click="this.previous"
                    tabindex="-1"
                >
                    <i class="oi oi-chevron-left" t-att-title="this.activePrecisionLevel.prevTitle" />
                </button>
                <button
                    class="o_next btn btn-sm opacity-75 opacity-100-hover"
                    t-on-click="this.next"
                    tabindex="-1"
                >
                    <i class="oi oi-chevron-right" t-att-title="this.activePrecisionLevel.nextTitle" />
                </button>
                <button
                    class="o_zoom_out o_datetime_button btn opacity-75 opacity-100-hover text-truncate"
                    tabindex="-1"
                    t-att-class="{ 'disabled': this.isLastPrecisionLevel }"
                    t-att-title="!this.isLastPrecisionLevel and this.activePrecisionLevel.mainTitle"
                    t-on-click="this.zoomOut"
                >
                    <t t-foreach="this.titles" t-as="title" t-key="this.title">
                        <strong
                            class="o_header_part"
                            t-esc="this.title"
                        />
                    </t>
                </button>
                <div t-if="this.props.showRangeToggler" class="btn-group ms-auto">
                    <button
                        class="o_toggle_range btn btn-secondary btn-sm"
                        tabindex="-1"
                        title="Single date"
                        t-on-click="this.props.onToggleRange"
                        t-att-class="{'active': !this.props.range}"
                    >
                        Date
                    </button>
                    <button
                        class="o_toggle_range btn btn-secondary btn-sm"
                        tabindex="-1"
                        title="Date range"
                        t-on-click="this.props.onToggleRange"
                        t-att-class="{'active': this.props.range}"
                    >
                        Range
                    </button>
                </div>

            </nav>
            <t t-if="this.state.precision === 'days'">
                <t t-call="web.DateTimePicker.Days" />
            </t>
            <t t-else="">
                <t t-call="web.DateTimePicker.Grid" />
            </t>
        </div>
    </t>
</templates>
