<templates xml:space="preserve">
<t t-name="web.ColorPickerCustomTab">
    <div class="d-flex flex-column align-items-start p-2 pb-0" t-on-keydown="this.props.colorPickerNavigation">
        <div class="o_colorpicker_section" t-on-click="this.props.onColorClick"
            t-on-mouseover="this.props.onColorPointerOver" t-on-mouseout="this.props.onColorPointerOut"
            t-on-focusin="this.props.onFocusin" t-on-focusout="this.props.onColorPointerOut">
            <t t-foreach="this.usedCustomColors" t-as="color" t-key="color_index">
                <button t-if="color.toLowerCase() !== this.props.currentCustomColor?.toLowerCase()"
                    class="o_color_button o_color_picker_button btn p-0" t-att-data-color="color"
                    t-attf-style="background-color: {{color}}"/>
            </t>
            <button t-if="!this.props.defaultColorSet and this.isValidCustomColor(this.props.currentCustomColor)"
                class="o_color_button o_color_picker_button btn p-0"
                t-att-class="{'selected': this.props.defaultColorSet === false and !this.props.currentColorPreview}"
                t-attf-style="background-color: {{this.props.currentCustomColor}}"
                t-att-data-color="this.props.currentCustomColor"/>
            <button t-if="!!this.props.currentColorPreview" class="o_color_button o_color_picker_button btn p-0"
                t-att-class="{ 'selected': !!this.props.currentColorPreview }"
                t-attf-style="background-color: {{this.props.currentColorPreview}}"
                t-att-data-color="this.props.currentColorPreview"/>
        </div>
        <t t-foreach="Object.values(this.props.grayscales)" t-as="grayscaleColors" t-key="grayscaleColors">
            <div class="o_colorpicker_section" t-on-click="this.props.onColorClick"
                t-on-mouseover="this.props.onColorPointerOver"
                t-on-mouseout="this.props.onColorPointerOut"
                t-on-focusin="this.props.onFocusin"
                t-on-focusout="this.props.onColorPointerOut">
                <t t-foreach="grayscaleColors" t-as="color" t-key="color">
                    <button t-att-data-color="color" class="o_color_button o_color_picker_button btn p-0"
                        t-att-class="{'selected': color === this.props.defaultColorSet and !this.props.currentColorPreview}"
                        t-attf-style="background-color: var(--{{this.props.cssVarColorPrefix+color}})"/>
                </t>
            </div>
        </t>
        <CustomColorPicker
            selectedColor="this.props.currentCustomColor"
            setOnCloseCallback.bind="this.props.setOnCloseCallback"
            setOperationCallbacks.bind="this.props.setOperationCallbacks"
            onColorSelect.bind="(color) => this.props.applyColor(color.hex)"
            onColorPreview.bind="this.props.onColorPreview"
            noTransparency="this.props.noTransparency"
            defaultOpacity="this.props.defaultOpacity"/>
    </div>
</t>
</templates>
