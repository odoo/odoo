<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="config_speedscope_index">
        <link rel="stylesheet" href="/web/assets/any/web.assets_web.min.css" />
        <script src="/web/assets/any/web.assets_web.min.js" type="text/javascript"/>
        
        <div class="container-md p-0">
            <div class="o_form_view" style="align-items: center;">
                <div class="o_form_sheet">
                    <!-- Single Form -->
                    <form id="dynamicForm" method="get" t-attf-action="/web/speedscope/{{profile.id}}">
                        <h4>Options</h4>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="constant_time" name="constant_time" value="True" />
                            <label class="form-check-label" for="constant_time">Constant Time</label>
                        </div>
                        <!-- add more variable here -->
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="aggregate_sql" name="aggregate_sql" value="True" />
                            <label class="form-check-label" for="aggregate_sql">Aggregate SQL</label>
                        </div>
                        <div class="form-check">
                            <input type="checkbox" class="form-check-input" id="use_execution_context" name="use_execution_context" value="True" checked="1"/>
                            <label class="form-check-label" for="use_execution_context">Use execution context</label>
                        </div>

                        <h4>Profiles to display</h4>
                        
                        <div class="form-check" t-if="profile.sql and profile.traces_async">
                            <input type="checkbox" class="form-check-input" id="combined_profile" name="combined_profile" value="True" checked="checked"/>
                            <label class="form-check-label" for="combined_profile">Frames + sql (Combined)</label>
                        </div>
                        <div class="form-check" t-if="profile.sql">
                            <input type="checkbox" class="form-check-input" id="sql_no_gap_profile" name="sql_no_gap_profile" value="True" checked="checked"/>
                            <label class="form-check-label" for="sql_no_gap_profile">SQL no gap</label>
                        </div>
                        <div class="form-check" t-if="profile.sql">
                            <input type="checkbox" class="form-check-input" id="sql_density_profile" name="sql_density_profile" value="True"/>
                            <label class="form-check-label" for="sql_density_profile">SQL density</label>
                        </div>
                        <div class="form-check" t-if="profile.traces_async">
                            <input type="checkbox" class="form-check-input" id="frames_profile" name="frames_profile" value="True"/>
                            <label class="form-check-label" for="frames_profile">Frames</label>
                        </div>

                        <input type="hidden" name="profile_id" t-att-value="profile.id" />
                        
                        <div class="mt-3">
                            <button type="submit" class="btn btn-secondary" name="action" value="download_json"><i class="fa fa-download"/> (json)</button>
                            <button type="submit" class="btn btn-primary" name="action" value="open">Open</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </template>
</odoo>
