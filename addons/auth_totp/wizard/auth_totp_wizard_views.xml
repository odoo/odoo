<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record model="ir.ui.view" id="view_totp_wizard">
        <field name="name">auth_totp wizard</field>
        <field name="model">auth_totp.wizard</field>
        <field name="arch" type="xml">
            <form>
                <sheet>
                    <div class="o_auth_totp_enable_2FA ps-0">
                        <!-- Step 1 -->
                        <div class="d-flex align-items-start gap-3 mb-3">
                            <span class="d-inline-flex align-items-center justify-content-center flex-shrink-0 p-0 border border-dark rounded-circle" style="width:1.8em; aspect-ratio:1">
                                <span class="position-absolute">1</span>
                            </span>
                            <div>
                                <span class="h6 mb-2">Download an authenticator app</span>
                                <p class="small text-muted">Download and install Authy or Google Authenticator in your phone.</p>
                            </div>
                        </div>

                        <!-- Step 2 -->
                        <div class="d-flex align-items-start gap-3 mb-4">
                            <span class="d-inline-flex align-items-center justify-content-center flex-shrink-0 p-0 border border-dark rounded-circle" style="width:1.8em; aspect-ratio:1">
                                <span class="position-absolute">2</span>
                            </span>
                            <div>
                                <!-- Mobile Version -->
                                <span class="d-lg-none h6 m-0">Enter the code</span>
                                <p class="small text-muted d-lg-none">Add this key in your Authenticator app</p>

                                <!-- Desktop version -->
                                <span class="d-none d-lg-block h6 m-0">Scan the QR code</span>
                                <p class="d-none d-lg-block small text-muted">Open the authenticator app and scan the QR code using your phone's camera.
                                </p>
                                <div class="d-none d-lg-flex justify-content-start mb-4">
                                    <div class="shadow" style="max-width: 9rem">
                                        <field name="qrcode" readonly="True" widget="image" options="{'reload': false }"/>
                                    </div>
                                </div>
                                <p class="d-none d-lg-block small mb-2">
                                    <b>Or</b> <span class="text-muted">enter this secret key into your authenticator app.</span>
                                </p>

                                <!-- Both Mobile/Desktop versions -->
                                <field name="secret" widget="CopyClipboardChar" readonly="1"/>
                            </div>
                        </div>

                        <!-- Step 3 -->
                        <div class="d-flex align-items-start gap-3">
                            <span class="d-inline-flex align-items-center justify-content-center flex-shrink-0 p-0 border border-dark rounded-circle" style="width:1.8em; aspect-ratio:1">
                                <span class="position-absolute">3</span>
                            </span>
                            <div>
                                <span class="h6 m-0">Add the code from the app</span>
                                <p class="small text-muted mb-3">Enter the code provided by your authenticator app.</p>
                                <field required="True" name="code" autocomplete="off" class="o_field_highlight w-50 w-sm-25" placeholder="Verification code"/>
                            </div>
                        </div>
                    </div>
                </sheet>
                <footer>
                    <button type="object" name="enable" class="btn btn-primary" context="{'code': code}"
                            string="Enable Two-Factor Authentication" data-hotkey="q"/>
                    <button special="cancel" data-hotkey="x"/>
                </footer>
            </form>
        </field>
    </record>
</odoo>
