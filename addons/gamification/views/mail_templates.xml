<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <record id="mail_template_data_new_rank_reached" model="mail.template">
            <field name="name">User: New rank reached</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="subject">New rank: ${object.rank_id.name}</field>
            <field name="email_to"></field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="body_html" type="html">
<div style="background:#F0F0F0;color:#515166;padding:10px 0px;font-family:Arial,Helvetica,sans-serif;font-size:14px;">
<table style="width:600px;margin:0px auto;background:white;border:1px solid #e1e1e1;">
    <tbody>
        <tr>
            <td style="padding:15px 20px 10px 20px;">
                <p>
                    <h1>Congratulations!</h1>
                </p>
                <p>
                    <h3>You just reached a new rank : <strong>${object.rank_id.name}</strong></h3>
                </p>
                <p>Keep up the good work and become a <strong>${object.next_rank_id.name}</strong> !</p>
                <div style="margin: 16px 0px 16px 0px;">
                    % set gamification_redirection_data = object.get_gamification_redirection_data()
                    % for data in gamification_redirection_data
                        % set url = data['url']
                        % set label = data['label']
                        <a href="${url}" style="display: block;margin-left: auto;margin-right: auto;width: fit-content;background-color: #875A7B;padding: 8px 16px 8px 16px;text-decoration: none;color: #fff;border-radius: 5px;font-size:13px;">${label}</a>
                    % endfor
                </div>
            </td>
            <td style="padding:15px 20px 10px 20px;">
                <p style="text-align: center;">
                    <img src="/web/image/gamification.karma.rank/${object.rank_id.id}/image_128"/>
                </p>
            </td>
        </tr>
    </tbody>
 </table>
</div></field>
            <field name="lang">${object.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="user_signature" eval="True"/>
        </record>


        <record id="mail_template_data_new_user" model="mail.template">
            <field name="name">User: New rank reached</field>
            <field name="model_id" ref="base.model_res_users"/>
            <field name="subject">Welcome to eLearning!</field>
            <field name="email_to"></field>
            <field name="partner_to">${object.partner_id.id}</field>
            <field name="body_html" type="html">
<div style="background:#F0F0F0;color:#515166;padding:10px 0px;font-family:Arial,Helvetica,sans-serif;font-size:14px;">
<table style="width:600px;margin:0px auto;background:white;border:1px solid #e1e1e1;">
    <tbody>
        <tr>
            <td style="padding:15px 20px 10px 20px;">
                <p>
                    <h1>Welcome to eLearning!</h1>
                </p>
                <p>
                    % set hightest_rank = object.get_highest_rank().name
                    <h3>Start now and become a ${hightest_rank} just like  <a href="/profile/users">them</a>.</h3>
                </p>
                <div style="margin: 16px 0px 16px 0px;">
                    % set gamification_redirection_data = object.get_gamification_redirection_data()
                    % for data in gamification_redirection_data
                        % set url = data['url']
                        % set label = data['label']
                        <a href="${url}" style="display: block;margin-left: auto;margin-right: auto;width: fit-content;background-color: #875A7B;padding: 8px 16px 8px 16px;text-decoration: none;color: #fff;border-radius: 5px;font-size:13px;">${label}</a>
                    % endfor
                </div>
            </td>
        </tr>
    </tbody>
 </table>
</div></field>
            <field name="lang">${object.lang}</field>
            <field name="auto_delete" eval="True"/>
            <field name="user_signature" eval="True"/>
        </record>
    </data>
</odoo>
