<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- ======   Template: Posts Loop    ==========================================
Loop through post and call sub-templates (tags, cover..) in different position
according to the enabled options.
============================================================================ -->
<template id="posts_loop" name="Posts List">
    <div id="o_wblog_posts_loop" t-attf-class="pb-5 #{opt_blog_list_view and 'o_wblog_list_view' or ''}">

        <!-- Allow to filter post by published state. Visible only in edit-mode
             and if both published/unpublished number is > 0 -->
        <t t-if="state_info" t-set="state" t-value="state_info['state']"/>

        <!-- Check for active options -->
        <t t-set="opt_posts_loop_show_cover" t-value="is_view_active('website_blog.opt_posts_loop_show_cover')"/>
        <t t-set="opt_posts_loop_show_author" t-value="is_view_active('website_blog.opt_posts_loop_show_author')"/>
        <t t-set="opt_posts_loop_show_stats" t-value="is_view_active('website_blog.opt_posts_loop_show_stats')"/>
        <t t-set="opt_posts_loop_show_teaser" t-value="is_view_active('website_blog.opt_posts_loop_show_teaser')"/>
        <t t-set="opt_posts_loop_show_tags" t-value="is_view_active('website_blog.opt_posts_loop_show_tags')"/>
        <t t-set="opt_blog_compact_list_view_tags" t-value="is_view_active('website_blog.opt_blog_compact_list_view_tags')"/>

        <div t-attf-class="row #{(opt_blog_split_grid_view or opt_blog_bordered_grid_view) and 'gx-0' or 'gx-3 gx-lg-4'} #{(opt_blog_simple_list_view or opt_blog_list_view or opt_blog_large_list_view) and 'gy-3' or ''} #{opt_blog_grid_view and (opt_blog_bordered_grid_view and 'gy-0' or not opt_blog_cards_design and 'gy-5' or 'gy-4') or ''} #{opt_blog_bordered_grid_view and 'border-start' or ''}" t-attf-style="#{opt_blog_grid_view and '--lines-clamp: 3;' or ''}">
            <!-- Filters -->
            <div t-if="tag or date_begin or search" class="col-12 mb-3">
                <div t-if="posts" class="h4 mb-3">
                    <t t-out="search_count"/>
                    <t t-if="search_count &lt; 2">Article</t>
                    <t t-else="">Articles</t>
                </div>
                <span t-if="search" class="align-items-baseline border d-inline-flex ps-2 rounded mb-2">
                    <i class="fa fa-search me-2 text-muted"/>
                    <t t-out="search"/>
                    <a t-att-href="blog_url(search=False, tag=tag)" class="btn border-0 py-1 post_link">×</a>
                </span>
                <t t-if="tag">
                    <!-- Show active tags with a category set -->
                    <t t-foreach="tag_category" t-as="nav_tag_category">
                        <t t-call="website_blog.tags_list" tags="nav_tag_category.tag_ids" dismissibleBtn="True"/>
                    </t>

                    <!-- Show active tags without a category set -->
                    <t t-call="website_blog.tags_list" tags="other_tags" dismissibleBtn="True"/>
                </t>
                <span t-if="date_begin" class="align-items-baseline border d-inline-flex ps-2 rounded mb-2">
                    <i class="fa fa-calendar-o me-2 text-muted"/>
                    <t t-out="date_begin" t-options="{'widget': 'date', 'format': 'MMM yyyy'}"/>
                    <a t-attf-href="#{blog_url(date_begin=False, date_end=False, tag=tag)}" class="btn border-0 py-1 post_link">×</a>
                </span>
                <hr class="mt-2"/>
            </div>

            <!-- No blog post yet -->
            <div t-if="not posts" class="col">
                <t t-set="no_results_str">No results for "%s".</t>
                <h2 t-if="search" t-out="no_results_str % search" class="h4"/>
                <h2 t-else="" class="h4">No blog post yet.</h2>
                <div class="alert alert-info" groups="website.group_website_designer">
                    Click on "<b>New</b>" in the top-right corner to write your first blog post.
                </div>
            </div>

            <!-- Posts -->
            <t t-if="opt_blog_split_grid_view and posts and opt_blog_grid_view and not search">
                <!-- Sticky Left Post Column -->
                <div t-attf-class="position-relative col-12 col-md-5 pe-0">
                    <t t-set="blog_post" t-value="posts[0]"/>
                    <article t-attf-class="o_wblog_post o_sticky_reactive position-static position-md-sticky sticky-md-top vh-100" name="blog_post">
                        <!-- Add 'unpublished' badge -->
                        <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover and not opt_blog_cards_design" t-attf-class="badge bg-danger w-auto h-auto mb-2">
                            <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                        </small>
                        <t t-if="opt_posts_loop_show_cover">
                            <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}" class="text-reset text-decoration-none">
                                <t t-call="website.record_cover"
                                    _record="blog_post"
                                    use_filters="True"
                                    additionnal_classes.f="o_cc o_cc5 overflow-hidden justify-content-end p-5 #{opt_blog_cards_design and opt_blog_grid_view and ' card-img-top' or ''}">
                                    <!-- 'Unpublished' badge -->
                                    <small t-if="not blog_post.website_published" class="o_wblog_unpublished badge bg-danger w-auto h-auto mt-2 me-2 z-1">
                                        <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                    </small>
                                    <div class="z-1">
                                        <a t-if="posts_list_show_parent_blog" class="d-block small fw-bold" t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                                        <t t-call="website_blog.post_heading" _heading_classes.f="h1"/>
                                        <div t-if="opt_posts_loop_show_teaser or opt_posts_loop_show_tags">
                                            <t t-if="opt_posts_loop_show_teaser" t-call="website_blog.post_teaser" _teaser_classes.f="lead"/>
                                            <t t-if="opt_posts_loop_show_tags" t-call="website_blog.post_tags"/>
                                        </div>
                                        <div t-if="opt_posts_loop_show_stats">
                                            <t t-call="website_blog.post_info"/>
                                        </div>
                                    </div>
                                    <div t-if="opt_posts_loop_show_author" class="z-1">
                                        <t t-call="website_blog.post_author"
                                            additionnal_classes.f="o_wblog_post_list_author o_list_cover d-flex align-items-center w-100"
                                            extra_classes.f="d-flex gap-1"/>
                                    </div>
                                </t>
                            </a>
                        </t>
                    </article>
                </div>

                <!-- Scrollable Right Posts Column -->
                <div t-attf-class="col-12 col-md-7 ps-0">
                    <t t-if="opt_blog_sidebar_show" t-set="remainingColWidth" t-value="'col-12 mb-4'"/>
                    <t t-else="" t-set="remainingColWidth" t-value="'col-sm-6 col-md-12'"/>
                    <div class="row g-0">
                        <t t-foreach="posts[1:]" t-as="blog_post">
                            <div t-attf-class="o_wblog_split_grid_view_container {{ remainingColWidth }}">
                                <article class="o_wblog_post position-relative d-flex flex-column flex-md-row" name="blog_post">
                                    <!-- Add 'unpublished' badge -->
                                    <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover and not opt_blog_cards_design" t-attf-class="badge bg-danger w-auto h-auto mb-2">
                                        <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                    </small>
                                    <t t-if="opt_posts_loop_show_cover">
                                        <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}" class="flex-basis-50 flex-shrink-0 text-reset text-decoration-none">
                                            <t t-call="website.record_cover"
                                                _record="blog_post"
                                                additionnal_classes.f="o_cc o_cc3 ratio ratio-4x3 h-auto overflow-hidden">
                                                <!-- 'Unpublished' badge -->
                                                <small t-if="not blog_post.website_published" class="o_wblog_unpublished badge bg-danger w-auto h-auto mt-2 me-2">
                                                    <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                                </small>
                                            </t>
                                        </a>
                                    </t>
                                    <div class="d-flex flex-column justify-content-center p-4">
                                        <!-- Add 'unpublished' badge -->
                                        <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover and opt_blog_cards_design" t-attf-class="badge bg-danger w-auto h-auto mb-2">
                                            <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                        </small>
                                        <a t-if="posts_list_show_parent_blog" class="d-block small fw-bold" t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                                        <t t-call="website_blog.post_heading" _heading_classes.f="h3"/>
                                        <div t-if="opt_posts_loop_show_author">
                                            <t t-call="website_blog.post_author"
                                                additionnal_classes.f="o_wblog_post_list_author o_list_cover d-flex align-items-center w-100"
                                                extra_classes.f="d-flex gap-1"/>
                                        </div>
                                    </div>
                                </article>
                            </div>
                        </t>
                    </div>
                </div>
            </t>
            <t t-elif="opt_blog_promoted_post and posts and opt_blog_grid_view and not opt_blog_bordered_grid_view and not search">
                <!-- Sticky First Post Column -->
                <div t-attf-class="position-relative col-12 col-md-6">
                    <t t-set="blog_post" t-value="posts[0]"/>
                    <article t-attf-class="o_wblog_post #{'card' if opt_blog_cards_design else ''} #{opt_blog_promoted_post and 'o_sticky_reactive position-static position-md-sticky sticky-md-top'}" name="blog_post">
                        <!-- Add 'unpublished' badge -->
                        <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover and not opt_blog_cards_design" t-attf-class="badge bg-danger w-auto h-auto mb-2">
                            <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                        </small>
                        <t t-if="opt_posts_loop_show_cover" t-call="website_blog.post_cover_image">
                            <t t-set="classes" t-value="'mb-3'"/>
                        </t>
                        <div t-att-class="opt_blog_cards_design and opt_blog_grid_view and 'card-body'">
                            <!-- Add 'unpublished' badge -->
                            <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover and opt_blog_cards_design" t-attf-class="badge bg-danger w-auto h-auto mb-2">
                                <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                            </small>
                            <a t-if="posts_list_show_parent_blog" class="d-block small fw-bold" t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                            <t t-call="website_blog.post_heading"/>
                            <div t-if="opt_posts_loop_show_teaser or opt_posts_loop_show_tags">
                                <t t-if="opt_posts_loop_show_teaser" t-call="website_blog.post_teaser" _teaser_classes.f="small"/>
                                <t t-if="opt_posts_loop_show_tags" t-call="website_blog.post_tags"/>
                            </div>
                            <div t-if="opt_posts_loop_show_stats">
                                <t t-call="website_blog.post_info"/>
                            </div>
                        </div>
                        <div t-if="opt_posts_loop_show_author" t-att-class="opt_blog_cards_design and opt_blog_grid_view and 'p-3 pt-0'">
                            <t t-call="website_blog.post_author"
                                additionnal_classes.f="o_wblog_post_list_author o_list_cover d-flex align-items-center w-100"
                                extra_classes.f="d-flex gap-1"/>
                        </div>
                    </article>
                </div>

                <!-- Remaining Posts Column -->
                <div t-attf-class="col-12 col-md-6">
                    <t t-if="opt_blog_sidebar_show" t-set="remainingColWidth" t-value="'col-12 mb-4'"/>
                    <t t-else="" t-set="remainingColWidth" t-value="'col-sm-6 col-md-12 mb-4'"/>
                    <div class="row gx-3 gy-3">
                        <t t-foreach="posts[1:]" t-as="blog_post">
                            <div t-attf-class="{{ remainingColWidth }}">
                                <article t-attf-class="o_wblog_post position-relative #{'card h-100' if opt_blog_cards_design and opt_blog_grid_view  else ''}" name="blog_post">
                                    <!-- Add 'unpublished' badge -->
                                    <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover and not opt_blog_cards_design" t-attf-class="badge bg-danger w-auto h-auto mb-2">
                                        <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                    </small>
                                    <t t-if="opt_posts_loop_show_cover" t-call="website_blog.post_cover_image">
                                        classes.f="'mb-3'"/>
                                    </t>
                                    <div t-att-class="opt_blog_cards_design and 'card-body'">
                                        <!-- Add 'unpublished' badge -->
                                        <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover and opt_blog_cards_design" t-attf-class="badge bg-danger w-auto h-auto mb-2">
                                            <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                        </small>
                                        <a t-if="posts_list_show_parent_blog" class="d-block small fw-bold" t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id"/>
                                        <t t-call="website_blog.post_heading"/>
                                        <div t-if="opt_posts_loop_show_teaser or opt_posts_loop_show_tags">
                                            <t t-if="opt_posts_loop_show_teaser" t-call="website_blog.post_teaser" _teaser_classes.f="small"/>
                                            <t t-if="opt_posts_loop_show_tags" t-call="website_blog.post_tags"/>
                                        </div>
                                        <div t-if="opt_posts_loop_show_stats">
                                            <t t-call="website_blog.post_info"/>
                                        </div>
                                    </div>
                                    <div t-if="opt_posts_loop_show_author" t-att-class="opt_blog_cards_design and 'p-3 pt-0'">
                                        <t t-call="website_blog.post_author"
                                            additionnal_classes.f="o_wblog_post_list_author o_list_cover d-flex align-items-center w-100"
                                            extra_classes.f="d-flex gap-1"/>
                                    </div>
                                </article>
                            </div>
                        </t>
                    </div>
                </div>
            </t>
            <t t-else="">
                <!-- Define 'colWidth' qWeb variable, to be assigned later.
                Adjust accordingly if sidebar and/or readability modes are active. -->
                <t t-if="opt_blog_grid_view">
                    <t t-if="opt_blog_sidebar_show" t-set="colWidth" t-value="'col-md-6 col-xl-4'"/>
                    <t t-else="" t-set="colWidth" t-value="'col-md-6 col-lg-4'"/>
                </t>
                <!-- Loop through posts: exclude the first one if already displayed as top banner -->
                <t t-foreach="posts" t-as="blog_post">
                    <t t-if="opt_blog_simple_list_view">
                        <t t-set="post_year" t-value="blog_post.published_date.strftime('%Y')"/>
                        <t t-if="post_year != current_year">
                            <div class="col-12 pb-4">
                                <t t-if="blog_post.published_date">
                                    <span class="badge bg-light" t-out="blog_post.published_date" t-options="{'widget': 'date', 'format': 'yyyy'}"/>
                                </t>
                                <t t-elif="blog_post.publish_on">
                                    <span class="badge bg-light" t-out="blog_post.publish_on" t-options="{'widget': 'date', 'format': 'yyyy'}"/>
                                </t>
                            </div>
                            <t t-set="current_year" t-value="post_year"/>
                        </t>
                    </t>
                    <t t-elif="opt_blog_compact_list_view">
                        <t t-set="post_month" t-value="blog_post.published_date.strftime('%Y-%m')"/>
                        <t t-if="post_month != current_month">
                            <div class="o_wblog_compact_list_month_header o_sticky_reactive position-static position-md-sticky sticky-md-top col-12 bg-body py-3">
                                <h4 class="mb-0">
                                    <t t-if="blog_post.published_date" t-out="blog_post.published_date" t-options="{'widget': 'date', 'format': 'MMMM yyyy'}"/>
                                    <t t-elif="blog_post.publish_on" t-out="blog_post.publish_on" t-options="{'widget': 'date', 'format': 'MMMM yyyy'}"/>
                                </h4>
                            </div>
                            <t t-set="current_month" t-value="post_month"/>
                        </t>
                    </t>
                    <!-- Assign 'colWidth': 'col-12' is default for List-View and mobile -->
                    <div t-attf-class="col-12 #{colWidth} #{(opt_blog_simple_list_view or opt_blog_compact_list_view) and 'm-0'} #{(opt_blog_list_view or opt_blog_large_list_view) and 'pb-3'} #{opt_blog_bordered_grid_view and 'o_wblog_bordered_grid_container border-bottom border-end' or ''}">
                        <article
                            t-attf-class="o_wblog_post position-relative d-flex flex-column h-100 #{'card' if opt_blog_cards_design and opt_blog_grid_view  else ''}"
                            name="blog_post">
                            <!-- List-View Design -->
                            <t t-if="opt_blog_simple_list_view or opt_blog_compact_list_view or opt_blog_list_view or opt_blog_large_list_view">
                                <div t-attf-class="row #{(opt_blog_simple_list_view or opt_blog_compact_list_view) and 'align-items-start mx-0' or (opt_blog_list_view or opt_blog_large_list_view) and 'align-items-start align-items-md-stretch'} #{opt_blog_large_list_view and opt_posts_loop_show_cover and 'flex-md-row-reverse'}">
                                    <div t-if="not opt_blog_simple_list_view and not opt_blog_compact_list_view and opt_posts_loop_show_cover" t-attf-class="#{opt_blog_list_view and 'col-4 pe-0 pe-lg-3'}#{'card-header p-0' if opt_blog_cards_design and opt_blog_grid_view  else ''}#{opt_blog_large_list_view and 'col-4 col-md-6 col-lg-5 offset-lg-2'}">
                                        <t t-if="opt_posts_loop_show_cover" t-call="website_blog.post_cover_image"/>
                                    </div>
                                    <div t-attf-class="#{(opt_posts_loop_show_cover and ('col-8 px-3' if opt_blog_sidebar_show and not opt_blog_large_list_view else 'col-8 col-md-6 col-lg-5 px-3') or 'px-3') if not opt_blog_simple_list_view and not opt_blog_compact_list_view else (opt_blog_simple_list_view and 'd-flex align-items-start justify-content-between flex-row-reverse mb-3 p-0' or 'd-flex align-items-start gap-3 p-0')}">
                                        <!-- 'Unpublished' badge -->
                                        <small t-if="not blog_post.website_published" t-attf-class="badge bg-danger w-auto h-auto mb-2 #{(opt_blog_simple_list_view or opt_blog_compact_list_view) and 'order-last order-lg-first'} #{opt_posts_loop_show_cover and 'd-md-none' or ''}">
                                            <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                        </small>
                                        <t t-if="posts_list_show_parent_blog and not opt_blog_simple_list_view and not opt_blog_compact_list_view">
                                            <a t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id" class="d-block small fw-bold"/>
                                        </t>
                                        <t t-if="opt_blog_simple_list_view">
                                            <small t-if="blog_post.published_date" t-field="blog_post.published_date" t-options="{'widget': 'date', 'format': 'dd.MM', 'date_only': 'true'}" class="text-muted flex-shrink-0"/>
                                            <small t-elif="blog_post.publish_on" t-field="blog_post.publish_on" t-options="{'widget': 'date', 'format': 'dd.MM', 'date_only': 'true'}" class="text-muted flex-shrink-0"/>
                                        </t>
                                        <t t-elif="opt_blog_compact_list_view">
                                            <small t-if="blog_post.published_date" t-field="blog_post.published_date" t-options="{'widget': 'date', 'format': 'dd MMM', 'date_only': 'true'}" class="o_wblog_post_date flex-shrink-0"/>
                                            <small t-elif="blog_post.publish_on" t-field="blog_post.publish_on" t-options="{'widget': 'date', 'format': 'dd MMM', 'date_only': 'true'}" class="o_wblog_post_date flex-shrink-0"/>
                                        </t>
                                        <div t-attf-class="#{opt_blog_simple_list_view and '' or 'd-flex flex-grow-1 justify-content-between flex-wrap gap-1'} #{opt_blog_compact_list_view and 'align-items-start' or ''}">
                                            <t t-if="opt_blog_simple_list_view">
                                                <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}" class="text-reset">
                                                    <h6 t-field="blog_post.name" class="small mb-0">
                                                        Untitled Post
                                                    </h6>
                                                </a>
                                            </t>
                                            <t t-else="">
                                                <t t-call="website_blog.post_heading"
                                                    _link_classes.f="flex-grow-1"/>
                                            </t>
                                            <div t-if="len(blog_post.tag_ids) and opt_blog_compact_list_view and opt_blog_compact_list_view_tags" t-attf-class="d-flex flex-wrap gap-1 p-0">
                                                <t t-foreach="blog_post.tag_ids" t-as="one_tag">
                                                    <a t-attf-href="#{blog_url(tag=tags_list(active_tag_ids, one_tag.id))}"
                                                    t-attf-class="badge o_tag o_color_#{one_tag.color} post_link"
                                                    t-att-rel="len(active_tag_ids) and 'nofollow'"
                                                    t-out="one_tag.name"/>
                                                </t>
                                            </div>
                                        </div>
                                        <t t-if="not opt_blog_simple_list_view and not opt_blog_compact_list_view">
                                            <div t-if="opt_posts_loop_show_teaser or opt_posts_loop_show_tags">
                                                <t t-if="opt_posts_loop_show_teaser" t-call="website_blog.post_teaser" _teaser_classes.f="((opt_blog_list_view or opt_blog_large_list_view) and 'o_wblog_teaser_list' or '') + ((opt_blog_list_view or opt_blog_large_list_view) and not opt_posts_loop_show_cover and ' o_wblog_teaser_list_no_cover' or '')"/>
                                                <t t-if="opt_posts_loop_show_tags" t-call="website_blog.post_tags"/>
                                            </div>
                                            <div t-if="opt_posts_loop_show_stats">
                                                <t t-call="website_blog.post_info"/>
                                            </div>
                                            <t t-if="opt_posts_loop_show_author" t-call="website_blog.post_author">
                                                additionnal_classes.f="'align-items-center mt-0 mt-md-3'"
                                                additionnal_classes.f="'d-flex gap-1'"/>
                                            </t>
                                        </t>
                                    </div>
                                </div>
                            </t>
                            <!-- Grid-View Design -->
                            <t t-else="">
                                <t t-if="opt_posts_loop_show_cover" t-call="website_blog.post_cover_image"/>
                                <!-- 'Unpublished' badge -->
                                <small t-if="not blog_post.website_published and not opt_posts_loop_show_cover" class="badge bg-danger align-self-start h-auto mb-2">
                                    <i class="fa fa-ban me-2" role="presentation"/>Unpublished
                                </small>
                                <div t-attf-class="#{opt_blog_cards_design and 'card-body' or ''} #{opt_blog_bordered_grid_view and 'p-3 pb-0' or ''}">
                                    <t t-if="posts_list_show_parent_blog">
                                        <a t-attf-href="/blog/#{slug(blog_post.blog_id)}" t-field="blog_post.blog_id" class="small fw-bold"/>
                                    </t>
                                    <t t-call="website_blog.post_heading"/>
                                    <div t-if="opt_posts_loop_show_teaser or opt_posts_loop_show_tags">
                                        <t t-if="opt_posts_loop_show_teaser" t-call="website_blog.post_teaser" _teaser_classes.f="small"/>
                                        <t t-if="opt_posts_loop_show_tags" t-call="website_blog.post_tags"/>
                                    </div>
                                </div>
                                <div t-attf-class="#{opt_blog_cards_design and 'mt-auto p-3 pt-0' or ''} #{opt_blog_bordered_grid_view and 'mt-auto p-3 pt-0' or ''}">
                                    <div t-if="opt_posts_loop_show_stats">
                                        <t t-call="website_blog.post_info"/>
                                    </div>
                                    <t t-if="opt_posts_loop_show_author" t-call="website_blog.post_author"
                                        additionnal_classes.f="o_wblog_post_list_author o_list_cover align-items-center"
                                        extra_classes.f="d-flex gap-1"/>
                                </div>
                            </t>
                        </article>
                    </div>
                    <!-- List-View Design, add <hr> after post -->
                    <div t-if="(opt_blog_list_view or opt_blog_large_list_view or opt_blog_compact_list_view) and not blog_post_last" class="o_not_editable mt-0">
                        <hr/>
                    </div>
                </t>
            </t>
        </div>
    </div>
</template>


<!-- ======   Sub-Template: Posts list : Posts Heading  =================== -->
<template id="post_heading">
    <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}" t-attf-class="text-reset #{_link_classes}">
        <h2 t-field="blog_post.name" t-attf-class="text-wrap-pretty #{_heading_classes or 'h5'} #{posts_list_show_parent_blog and 'mt-1' or ''}">
        Untitled Post
        </h2>
    </a>
</template>

<!-- ======   Sub-Template: Posts list : Posts Info  ======================= -->
<template id="post_info">
    <div t-attf-class="d-flex flex-wrap align-items-center justify-content-between small #{opt_blog_list_view and 'flex-grow-0 w-auto mw-100 mb-2 mt-md-2' or 'flex-grow-1 my-2' }">
        <div t-if="opt_posts_loop_show_stats" class="px-2 d-none d-xl-block">
            <span class="text-nowrap" title="Comments"><i class="fa fa-comment text-muted me-1"/><t t-out="len(blog_post.message_ids)"/></span>
            <span class="text-nowrap ps-2" title="Views"><i class="fa fa-eye text-muted me-1"/><t t-out="blog_post.visits"/></span>
        </div>
    </div>
</template>

<!-- ======   Sub-Template: Posts list : Posts Cover  ====================== -->
<template id="post_cover_image">
    <t t-if="opt_blog_cards_design" t-set="classes" t-value="'card-img-top mb-2'"/>
    <t t-if="not opt_blog_cards_design" t-set="classes" t-value="'o_wblog_post_cover_nocard'"/>
    <a t-attf-href="/blog/#{slug(blog_post.blog_id)}/#{slug(blog_post)}" class="text-reset text-decoration-none">
        <t t-call="website.record_cover"
            _record="blog_post"
            additionnal_classes.f="o_cc o_cc3 ratio ratio-16x9 h-auto overflow-hidden #{opt_blog_cards_design and opt_blog_grid_view and ' card-img-top' or not opt_blog_bordered_grid_view and ' rounded' or ''} #{not opt_blog_cards_design and not opt_blog_list_view and not opt_blog_large_list_view and not opt_blog_bordered_grid_view and ' mb-3' or ''}">
            <!-- 'Unpublished' badge -->
            <small t-if="not blog_post.website_published" t-attf-class="o_wblog_unpublished badge bg-danger w-auto h-auto mt-2 me-2 #{(opt_blog_list_view or opt_blog_large_list_view) and 'd-none d-md-inline' or ''}">
                <i class="fa fa-ban me-2" role="presentation"/>Unpublished
            </small>
        </t>
    </a>
</template>

<!-- ======   Sub-Template: Posts list : Posts Teaser  ============= -->
<template id="post_teaser">
    <p t-field="blog_post.teaser" t-attf-class="o_wblog_teaser o_line_clamp #{_teaser_classes or ''}"/>
</template>

<!-- ======   Sub-Template: Posts list : Posts Tags  ============= -->
<template id="post_tags">
    <div t-if="len(blog_post.tag_ids)" t-attf-class="d-flex flex-wrap gap-1 #{not opt_blog_cards_design and not opt_posts_loop_show_stats and 'mb-3'} #{(opt_blog_list_view or opt_blog_large_list_view) and 'd-none d-md-flex'}">
        <t t-foreach="blog_post.tag_ids" t-as="one_tag">
            <a t-attf-href="#{blog_url(tag=tags_list(active_tag_ids, one_tag.id))}"
               t-attf-class="badge o_tag o_color_#{one_tag.color} post_link"
               t-att-rel="len(active_tag_ids) and 'nofollow'"
               t-out="one_tag.name"/>
        </t>
    </div>
</template>

<!--   ======================      OPTIONS      ===========================  -->
<!--   ====================================================================  -->
<!-- (Option) Posts List: Show Covers -->
<template id="opt_posts_loop_show_cover" name="Cover" inherit_id="website_blog.posts_loop" active="True"/>

<!-- (Option) Posts List: Show Author -->
<template id="opt_posts_loop_show_author" name="Author" inherit_id="website_blog.posts_loop" active="True"/>

<!-- (Option) Posts List: Show Post Stats -->
<template id="opt_posts_loop_show_stats" name="Comments/Views Stats" inherit_id="website_blog.posts_loop" active="False"/>

<!-- (Option) Posts List: Show Post Teaser -->
<template id="opt_posts_loop_show_teaser" name="Teaser" inherit_id="website_blog.posts_loop" active="True"/>

<!-- (Option) Posts List: Show Post Tags -->
<template id="opt_posts_loop_show_tags" name="Tags" inherit_id="website_blog.posts_loop" active="True"/>

<!-- (Option) Posts List: Show Tags on compact list view -->
<template id="opt_blog_compact_list_view_tags" name="Compact List View Tags" inherit_id="website_blog.posts_loop" active="True"/>

</odoo>
