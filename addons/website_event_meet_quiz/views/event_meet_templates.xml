<?xml version="1.0" encoding="utf-8"?>
<odoo>
<template id="community_aside" name="Community: Aside (Leaderboard)"
    inherit_id="website_event_meet.community_aside">
    <xpath expr="//div[hasclass('o_wevent_community_aside')]" position="inside">
        <t t-if="top3_visitors" t-call="website_event_meet_quiz.community_leaderboard_small"/>
    </xpath>
</template>

<template id="community_leaderboard_small" name="Small Leaderboard">
    <div class="row">
        <div class="col">
            <div class="w-100 d-flex justify-content-between align-items-end o_page_header">
                <h1 class="m-0">Leaderboard</h1>
                <a t-attf-href="#{'/event/%s/community/leaderboard' % (slug(event))}">View all</a>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col">
            <t t-foreach="top3_visitors" t-as="visitor">
                <t t-call="website_event_meet_quiz.visitor_quiz_points_card"/>
            </t>
        </div>
    </div>
</template>

<template id='visitor_quiz_points_card' name="User Quick Quiz Points Card">
    <div class="d-flex mb-3 align-items-center justify-content-between">
        <div class="d-flex align-items-center">
            <b class="mr-2 text-muted" t-esc="visitor['position']"/>
            <img class="rounded-circle float-left"
                style="width: 32px; height: 32px; object-fit: cover;"
                t-att-src="image_data_uri(visitor['visitor'].partner_image) if visitor['visitor'].partner_image else '/web/static/src/img/user_placeholder.jpg'"
                t-att-alt="visitor['visitor'].display_name"/>
            <div style="line-height:1.3">
                <span class="font-weight-bold" t-esc="visitor['visitor'].display_name"/>
            </div>
        </div>
        <div class="d-flex align-items-center">
            <span><t t-esc="visitor['points']"/> Points</span>
        </div>
    </div>
</template>

</odoo>
