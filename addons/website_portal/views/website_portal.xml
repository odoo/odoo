<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <template id="website.portal" name="Portal" page="True">
            <t t-call="website.layout">
                <t t-set="head">
                    <t t-call-assets="web.assets_backend" t-js="false"/>
                    <link rel='stylesheet' href='/website_portal/static/src/css/website_portal.css'/>
                </t>
                <div id="wrap" t-ignore="true">
                    <div class="oe_application_menu_placeholder">
                       <t t-call="portal.menu"/>
                    </div>
                    <div class="oe_structure">
                        <div class="openerp openerp_webclient_container">
                            <div id="oe_main_menu_navbar"></div>
                            <div class="oe_webclient">
                                        <div class="oe_main_menu_placeholder">
                                           <t t-call="portal.menu_secondary"/>
                                        </div>
                                    <div class="oe_application"></div>
                            </div>
                        </div>
                    </div>
                    
                </div>
                <t t-set="script_footer">
                    <t t-call-assets="web.assets_backend" t-css="false"/>
                    <script type="text/javascript">
                        (function() {
                            var s = new openerp.init();
                            <t t-if="init">
                               <t t-raw="init"/>
                            </t>
                            <t t-if="not init">
                                var wc = new s.web.WebClient();
                                wc.setElement($(".openerp_webclient_container"));
                                wc.start();
                            </t>
                            $('#wrapwrap footer').prepend('<button type="button" class="btn btn-info" id="show_footer"><i class="fa fa-arrow-up"></i>Toggle Footer</button>')
                            $('#show_footer').on('click', function() {
                                $('#wrapwrap footer').toggleClass('wport_show_footer');
                                $('#show_footer i').toggleClass('fa-arrow-up');
                                $('#show_footer i').toggleClass('fa-arrow-down');
                            });
                        }
                        )();
                    </script>
                    <script type="text/javascript" src="/website_portal/static/src/js/website_portal.js"></script>
                </t>
            </t>
        </template>

        <template id="portal.menu_secondary">
            <div>
                <div>
                    <div class="oe_secondary_menus_container">
                        <t t-foreach="portal_menu_data['children']" t-as="menu">
                            <div class="oe_secondary_menu" t-att-data-menu-parent="menu['id']">
                                <t t-foreach="menu['children']" t-as="menu">
                                    <div class="oe_secondary_menu_section">
                                        <t t-esc="menu['name']"/>
                                    </div>
                                    <t t-call="web.menu_secondary_submenu"/>
                                </t>
                            </div>
                        </t>
                    </div>
                </div>
            </div>
        </template>

        <template id="portal_link" name="Portal Link from User Account" inherit_id="website.layout" groups="base.group_portal">
            <xpath expr="//li[@class='dropdown']/ul/li[contains(.,'Logout')]" position="before">
                <li><a href="/portal" role="menuitem">Portal</a></li>
            </xpath>
        </template>

        <template id="portal.menu">
            <ul class="nav navbar-nav navbar-left oe_application_menu_placeholder">
                <li t-foreach="menu_data['children']" t-as="menu">
                    <t t-call="web.menu_link"/>
                </li>
                <li id="menu_more_container" class="dropdown" style="display: none;">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">More <b class="caret"></b></a>
                    <ul id="menu_more" class="dropdown-menu"></ul>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right oe_user_menu_placeholder" style="display: none;"/>
            <ul class="nav navbar-nav navbar-right oe_systray" style="display: none;"/>
        </template>
    </data>
</openerp>
		