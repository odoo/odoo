<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="tax_report" model="account.report">
        <field name="name">Tax Report</field>
        <field name="root_report_id" ref="account.generic_tax_report"/>
        <field name="country_id" ref="base.ma"/>
        <field name="filter_fiscal_position" eval="True"/>
        <field name="availability_condition">country</field>
        <field name="column_ids">
            <record id="tax_report_balance" model="account.report.column">
                <field name="name">Balance</field>
                <field name="expression_label">balance</field>
            </record>
        </field>
        <field name="line_ids">
            <record id="tax_report_ventilation_chiffre_affaires_imposable" model="account.report.line">
                <field name="name">Ventilation du chiffre d'affaires imposable</field>
                <field name="aggregation_formula">MATAXB_1.balance + MATAXB_2.balance + MATAXB_3.balance + MATAXB_4.balance + MATAXB_5.balance + MATAXB_6.balance + MATAXB_7.balance + MATAXB_8.balance</field>
                <field name="children_ids">
                    <record id="tax_report_taux_normal_20" model="account.report.line">
                        <field name="name">TAUX NORMAL DE 20% (Base HT)</field>
                        <field name="code">MATAXB_1</field>
                        <field name="expression_ids">
                            <record id="tax_report_taux_normal_20_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX NORMAL DE 20% (Base HT)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_taux_normal_tva_20" model="account.report.line">
                        <field name="name">TAUX NORMAL DE 20% (TVA exigible)</field>
                        <field name="code">MATAXB_2</field>
                        <field name="expression_ids">
                            <record id="tax_report_taux_normal_tva_20_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX NORMAL DE 20% (TVA exigible)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_taux_reduit_ht_14" model="account.report.line">
                        <field name="name">TAUX REDUIT DE 14% (Base HT)</field>
                        <field name="code">MATAXB_3</field>
                        <field name="expression_ids">
                            <record id="tax_report_taux_reduit_ht_14_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX REDUIT DE 14% (Base HT)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_taux_rediut_tva_14" model="account.report.line">
                        <field name="name">TAUX REDUIT DE 14% (TVA exigible)</field>
                        <field name="code">MATAXB_4</field>
                        <field name="expression_ids">
                            <record id="tax_report_taux_rediut_tva_14_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX REDUIT DE 14% (TVA exigible)</field>
                            </record>
                        </field>
                    </record>
                    <record id="account_report_taux_reduit_base_ht_10" model="account.report.line">
                        <field name="name">TAUX REDUIT DE 1O% (Base HT)</field>
                        <field name="code">MATAXB_5</field>
                        <field name="expression_ids">
                            <record id="account_report_taux_reduit_base_ht_10_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX REDUIT DE 1O% (Base HT)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_taux_reduit_tva_10" model="account.report.line">
                        <field name="name">TAUX REDUIT DE 1O% (TVA exigible)</field>
                        <field name="code">MATAXB_6</field>
                        <field name="expression_ids">
                            <record id="tax_report_taux_reduit_tva_10_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX REDUIT DE 1O% (TVA exigible)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_taux_reduit_ht_7" model="account.report.line">
                        <field name="name">TAUX REDUIT DE 7% (Base HT)</field>
                        <field name="code">MATAXB_7</field>
                        <field name="expression_ids">
                            <record id="tax_report_taux_reduit_ht_7_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX REDUIT DE 7% (Base HT)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_taux_reduit_tva_7" model="account.report.line">
                        <field name="name">TAUX REDUIT DE 7% (TVA exigible)</field>
                        <field name="code">MATAXB_8</field>
                        <field name="expression_ids">
                            <record id="tax_report_taux_reduit_tva_7_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">TAUX REDUIT DE 7% (TVA exigible)</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_ventilation_des_deductions" model="account.report.line">
                <field name="name">Ventilation des déductions</field>
                <field name="aggregation_formula">1ACHATS_NON_IMMOBILISES_BASE_HT.balance + 1ACHATS_NON_IMMOBILISES_TVA_DEDUCTIBLE.balance + IMMOBILISATIONS_BASE_HT.balance + IMMOBILISATIONS_TVA_DEDUCTIBLE.balance</field>
                <field name="children_ids">
                    <record id="tax_report_achats_non_immobilises_ht" model="account.report.line">
                        <field name="name">1-ACHATS NON IMMOBILISES (Base HT)</field>
                        <field name="code">1ACHATS_NON_IMMOBILISES_BASE_HT</field>
                        <field name="aggregation_formula">TRAVAUX_A_FACONS_HT.balance + SOUSTRAITANCE_TRAVAUX_IMMOBILIERS_HT.balance + BIENS_MATERIELS_BASE_HT.balance + PRESTATIONS_DE_SERVICES_BASE_HT.balance</field>
                        <field name="children_ids">
                            <record id="tax_report_travaux_facons_ht" model="account.report.line">
                                <field name="name">Travaux à façons (HT)</field>
                                <field name="code">TRAVAUX_A_FACONS_HT</field>
                                <field name="expression_ids">
                                    <record id="tax_report_travaux_facons_ht_formula" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_sous_traitance_immobiliers_ht" model="account.report.line">
                                <field name="name">Sous-traitance (travaux immobiliers) (HT)</field>
                                <field name="code">SOUSTRAITANCE_TRAVAUX_IMMOBILIERS_HT</field>
                                <field name="expression_ids">
                                    <record id="tax_report_sous_traitance_immobiliers_ht_formula" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_biens_materiels_ht" model="account.report.line">
                                <field name="name">Biens matériels (Base HT)</field>
                                <field name="code">BIENS_MATERIELS_BASE_HT</field>
                                <field name="aggregation_formula">ACHATS_20_HT.balance + ACHATS_14_HT.balance + ACHATS_10_HT.balance + ACHAT_7_HT.balance</field>
                                <field name="children_ids">
                                    <record id="tax_report_achats_ht_20" model="account.report.line">
                                        <field name="name">Achats (20%) (HT)</field>
                                        <field name="code">ACHATS_20_HT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_ht_20_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achats (20%) (HT)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_achats_ht_14" model="account.report.line">
                                        <field name="name">Achats (14%) (HT)</field>
                                        <field name="code">ACHATS_14_HT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_ht_14_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achats (14%) (HT)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_achats_ht_10" model="account.report.line">
                                        <field name="name">Achats (10%) (HT)</field>
                                        <field name="code">ACHATS_10_HT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_ht_10_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achats (10%) (HT)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_achat_ht_7" model="account.report.line">
                                        <field name="name">Achat (7%) (HT)</field>
                                        <field name="code">ACHAT_7_HT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_ht_7_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achat (7%) (HT)</field>
                                            </record>
                                        </field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_prestations_services_ht_1" model="account.report.line">
                                <field name="name">Prestations de services (Base HT)</field>
                                <field name="code">PRESTATIONS_DE_SERVICES_BASE_HT</field>
                                <field name="expression_ids">
                                    <record id="tax_report_prestations_services_ht_1_formula" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_achats_immobilises_deductible_tva" model="account.report.line">
                        <field name="name">1-ACHATS NON IMMOBILISES (TVA déductible)</field>
                        <field name="code">1ACHATS_NON_IMMOBILISES_TVA_DEDUCTIBLE</field>
                        <field name="aggregation_formula">TRAVAUX_A_FACONS_TVA_DEDUCTIBLE.balance + SOUSTRAITANCE_TRAVAUX_IMMOBILIERS_TVA_DEDUCTIBLE.balance + BIENS_MATERIELS_TVA_DEDUCTIBLE.balance + PRESTATIONS_DE_SERVICES_TVA_DEDUCTIBLE.balance</field>
                        <field name="children_ids">
                            <record id="tax_report_travaux_facons_tva" model="account.report.line">
                                <field name="name">Travaux à façons (TVA déductible)</field>
                                <field name="code">TRAVAUX_A_FACONS_TVA_DEDUCTIBLE</field>
                                <field name="expression_ids">
                                    <record id="tax_report_travaux_facons_tva_formula" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_sous_traitance_immobiliers_tva" model="account.report.line">
                                <field name="name">Sous-traitance (travaux immobiliers) (TVA déductible)</field>
                                <field name="code">SOUSTRAITANCE_TRAVAUX_IMMOBILIERS_TVA_DEDUCTIBLE</field>
                                <field name="expression_ids">
                                    <record id="tax_report_sous_traitance_immobiliers_tva_formula" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_biens_materiels_tva" model="account.report.line">
                                <field name="name">Biens matériels (TVA déductible)</field>
                                <field name="code">BIENS_MATERIELS_TVA_DEDUCTIBLE</field>
                                <field name="aggregation_formula">ACHATS_20_TVA.balance + ACHATS_14_TVA.balance + ACHATS_10_TVA.balance + ACHAT_7_TVA.balance + IMPORT.balance</field>
                                <field name="children_ids">
                                    <record id="tax_report_achats_tva_20" model="account.report.line">
                                        <field name="name">Achats (20%) (TVA)</field>
                                        <field name="code">ACHATS_20_TVA</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_tva_20_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achats (20%) (TVA)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_achats_tva_14" model="account.report.line">
                                        <field name="name">Achats (14%) (TVA)</field>
                                        <field name="code">ACHATS_14_TVA</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_tva_14_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achats (14%) (TVA)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_achats_tva_10" model="account.report.line">
                                        <field name="name">Achats (10%) (TVA)</field>
                                        <field name="code">ACHATS_10_TVA</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_tva_10_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achats (10%) (TVA)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_achats_tva_7" model="account.report.line">
                                        <field name="name">Achats (7%) (TVA)</field>
                                        <field name="code">ACHAT_7_TVA</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_achats_tva_7_tag" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Achat (7%) (TVA)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_import" model="account.report.line">
                                        <field name="name">Taxes d'importation</field>
                                        <field name="code">IMPORT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_import_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">aggregation</field>
                                                <field name="formula">CUSTOM_FEES.balance + IMPORT_FEES.balance</field>
                                            </record>
                                        </field>
                                        <field name="children_ids">
                                            <record id="tax_report_custom_fees" model="account.report.line">
                                                <field name="name">Droits de douane</field>
                                                <field name="code">CUSTOM_FEES</field>
                                                <field name="expression_ids">
                                                    <record id="tax_report_custom_fees_balance" model="account.report.expression">
                                                        <field name="label">balance</field>
                                                        <field name="engine">tax_tags</field>
                                                        <field name="formula">DROITS DE DOUANE</field>
                                                    </record>
                                                </field>
                                            </record>
                                            <record id="tax_report_import_fees" model="account.report.line">
                                                <field name="name">Taxe parafiscale à l'importation</field>
                                                <field name="code">IMPORT_FEES</field>
                                                <field name="expression_ids">
                                                    <record id="tax_report_import_fees_balance" model="account.report.expression">
                                                        <field name="label">balance</field>
                                                        <field name="engine">tax_tags</field>
                                                        <field name="formula">TAXE PARAFISCALE A L'IMPORTATION</field>
                                                    </record>
                                                </field>
                                            </record>
                                        </field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_prestations_service_deductible_tva" model="account.report.line">
                                <field name="name">Prestations de services (TVA déductible)</field>
                                <field name="code">PRESTATIONS_DE_SERVICES_TVA_DEDUCTIBLE</field>
                                <field name="expression_ids">
                                    <record id="tax_report_prestations_service_deductible_tva_formula" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_immobilisations_base_ht" model="account.report.line">
                        <field name="name">2-IMMOBILISATIONS (Base HT)</field>
                        <field name="code">IMMOBILISATIONS_BASE_HT</field>
                        <field name="expression_ids">
                            <record id="tax_report_immobilisations_base_ht_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">Immobilisations (Base HT)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_immobilisations_deductible_tva" model="account.report.line">
                        <field name="name">2-IMMOBILISATIONS (TVA déductible)</field>
                        <field name="code">IMMOBILISATIONS_TVA_DEDUCTIBLE</field>
                        <field name="expression_ids">
                            <record id="tax_report_immobilisations_deductible_tva_tag" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">Immobilisations (TVA déductible)</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
        </field>
    </record>
</odoo>
