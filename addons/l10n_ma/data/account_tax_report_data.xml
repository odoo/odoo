<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="tax_report" model="account.report">
        <field name="name">Tax Report</field>
        <field name="root_report_id" ref="account.generic_tax_report"/>
        <field name="country_id" ref="base.ma"/>
        <field name="filter_fiscal_position" eval="True"/>
        <field name="availability_condition">country</field>
        <field name="column_ids">
            <record id="tax_report_balance" model="account.report.column">
                <field name="name">Balance</field>
                <field name="expression_label">balance</field>
            </record>
        </field>
        <field name="line_ids">
            <record id="tax_report_breakdown_taxable_turnover" model="account.report.line">
                <field name="name">Breakdown of taxable turnover</field>
                <field name="aggregation_formula">MATAXB_1.balance + MATAXB_2.balance + MATAXB_3.balance + MATAXB_4.balance + MATAXB_5.balance + MATAXB_6.balance + MATAXB_7.balance + MATAXB_8.balance</field>
                <field name="children_ids">
                    <record id="tax_report_standard_rate_20" model="account.report.line">
                        <field name="name">STANDARD RATE OF 20% (excl. tax)</field>
                        <field name="code">MATAXB_1</field>
                        <field name="expression_ids">
                            <record id="tax_report_standard_rate_20_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">STANDARD RATE OF 20% (excl. tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_standard_rate_vat_20" model="account.report.line">
                        <field name="name">STANDARD RATE OF 20% (VAT payable)</field>
                        <field name="code">MATAXB_2</field>
                        <field name="expression_ids">
                            <record id="tax_report_standard_rate_vat_20_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">STANDARD RATE OF 20% (VAT payable)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_reduced_rate_14" model="account.report.line">
                        <field name="name">REDUCED RATE OF 14% (excl. tax)</field>
                        <field name="code">MATAXB_3</field>
                        <field name="expression_ids">
                            <record id="tax_report_reduced_rate_14_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">REDUCED RATE OF 14% (excl. tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_reduced_rate_vat_14" model="account.report.line">
                        <field name="name">REDUCED RATE OF 14% (VAT payable)</field>
                        <field name="code">MATAXB_4</field>
                        <field name="expression_ids">
                            <record id="tax_report_reduced_rate_vat_14_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">REDUCED RATE OF 14% (VAT payable)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_reduced_rate_10" model="account.report.line">
                        <field name="name">REDUCED RATE OF 10% (excl. tax)</field>
                        <field name="code">MATAXB_5</field>
                        <field name="expression_ids">
                            <record id="tax_report_reduced_rate_10_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">REDUCED RATE OF 10% (excl. tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_reduced_rate_vat_10" model="account.report.line">
                        <field name="name">REDUCED RATE OF 10% (VAT payable)</field>
                        <field name="code">MATAXB_6</field>
                        <field name="expression_ids">
                            <record id="tax_report_reduced_rate_vat_10_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">REDUCED RATE OF 10% (VAT payable)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_reduced_rate_7" model="account.report.line">
                        <field name="name">REDUCED RATE OF 7% (excl. tax)</field>
                        <field name="code">MATAXB_7</field>
                        <field name="expression_ids">
                            <record id="tax_report_reduced_rate_7_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">REDUCED RATE OF 7% (excl. tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_reduced_rate_vat_7" model="account.report.line">
                        <field name="name">REDUCED RATE OF 7% (VAT payable)</field>
                        <field name="code">MATAXB_8</field>
                        <field name="expression_ids">
                            <record id="tax_report_reduced_rate_vat_7_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">REDUCED RATE OF 7% (VAT payable)</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
            <record id="tax_report_breakdown_deductions" model="account.report.line">
                <field name="name">Breakdown of deductions</field>
                <field name="aggregation_formula">NON_FIXED_PURCHASES.balance + NON_FIXED_PURCHASES_VAT.balance + FIXED_ASSETS.balance + FIXED_ASSETS_VAT.balance</field>
                <field name="children_ids">
                    <record id="tax_report_purchases_non_fixed" model="account.report.line">
                        <field name="name">1-NON FIXED ASSET PURCHASES (excl. tax)</field>
                        <field name="code">NON_FIXED_PURCHASES</field>
                        <field name="aggregation_formula">CONTRACT_WORK.balance + SUBCONTRACTING.balance + MATERIAL_ASSETS.balance + SERVICES.balance</field>
                        <field name="children_ids">
                            <record id="tax_report_contract_work" model="account.report.line">
                                <field name="name">Contract Work (excl. tax)</field>
                                <field name="code">CONTRACT_WORK</field>
                                <field name="expression_ids">
                                    <record id="tax_report_contract_work_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_subcontracting" model="account.report.line">
                                <field name="name">Subcontracting (real estate works) (excl. taxes)</field>
                                <field name="code">SUBCONTRACTING</field>
                                <field name="expression_ids">
                                    <record id="tax_report_subcontracting_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_material_assets" model="account.report.line">
                                <field name="name">Material Assets (excl. tax)</field>
                                <field name="code">MATERIAL_ASSETS</field>
                                <field name="aggregation_formula">PURCHASES_20.balance + PURCHASES_14.balance + PURCHASES_10.balance + PURCHASES_7.balance</field>
                                <field name="children_ids">
                                    <record id="tax_report_purchases_20" model="account.report.line">
                                        <field name="name">Purchases (20%) (excl. tax)</field>
                                        <field name="code">PURCHASES_20</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchases_20_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (20%) (excl. tax)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_purchases_14" model="account.report.line">
                                        <field name="name">Purchases (14%) (excl. tax)</field>
                                        <field name="code">PURCHASES_14</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchases_14_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (14%) (excl. tax)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_purchases_10" model="account.report.line">
                                        <field name="name">Purchases (10%) (excl. tax)</field>
                                        <field name="code">PURCHASES_10</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchases_10_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (10%) (excl. tax)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_purchases_7" model="account.report.line">
                                        <field name="name">Purchases (7%) (excl. tax)</field>
                                        <field name="code">PURCHASES_7</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchases_7_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (7%) (excl. tax)</field>
                                            </record>
                                        </field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_services" model="account.report.line">
                                <field name="name">Provision of services (base excl. taxes)</field>
                                <field name="code">SERVICES</field>
                                <field name="expression_ids">
                                    <record id="tax_report_services_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_non_fixed_purchase_vat" model="account.report.line">
                        <field name="name">1-NON FIXED PURCHASES (deductible VAT)</field>
                        <field name="code">NON_FIXED_PURCHASES_VAT</field>
                        <field name="aggregation_formula">CONTRACT_WORK_VAT.balance + SUBCONTRACTING_VAT.balance + MATERIAL_ASSETS_VAT.balance + SERVICES_VAT.balance</field>
                        <field name="children_ids">
                            <record id="tax_report_contract_work_vat" model="account.report.line">
                                <field name="name">Contract work (deductible VAT)</field>
                                <field name="code">CONTRACT_WORK_VAT</field>
                                <field name="expression_ids">
                                    <record id="tax_report_contract_work_vat_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_subcontracting_vat" model="account.report.line">
                                <field name="name">Subcontracting (real estate works) (deductible VAT)</field>
                                <field name="code">SUBCONTRACTING_VAT</field>
                                <field name="expression_ids">
                                    <record id="tax_report_subcontracting_vat_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_material_assets_vat" model="account.report.line">
                                <field name="name">Material assets (deductible VAT)</field>
                                <field name="code">MATERIAL_ASSETS_VAT</field>
                                <field name="aggregation_formula">PURCHASES_20_VAT.balance + PURCHASES_14_VAT.balance + PURCHASES_10_VAT.balance + PURCHASES_7_VAT.balance + IMPORT.balance</field>
                                <field name="children_ids">
                                    <record id="tax_report_purchases_vat_20" model="account.report.line">
                                        <field name="name">Purchases (20%) (VAT)</field>
                                        <field name="code">PURCHASES_20_VAT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchase_vat_20_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (20%) (VAT)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_purchases_vat_14" model="account.report.line">
                                        <field name="name">Purchases (14%) (VAT)</field>
                                        <field name="code">PURCHASES_14_VAT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchase_vat_14_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (14%) (VAT)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_purchases_vat_10" model="account.report.line">
                                        <field name="name">Purchases (10%) (VAT)</field>
                                        <field name="code">PURCHASES_10_VAT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchase_vat_10_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (10%) (VAT)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_purchases_vat_7" model="account.report.line">
                                        <field name="name">Purchases (7%) (VAT)</field>
                                        <field name="code">PURCHASES_7_VAT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_purchase_vat_7_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">tax_tags</field>
                                                <field name="formula">Purchases (7%) (VAT)</field>
                                            </record>
                                        </field>
                                    </record>
                                    <record id="tax_report_import" model="account.report.line">
                                        <field name="name">Import taxes</field>
                                        <field name="code">IMPORT</field>
                                        <field name="expression_ids">
                                            <record id="tax_report_import_balance" model="account.report.expression">
                                                <field name="label">balance</field>
                                                <field name="engine">aggregation</field>
                                                <field name="formula">CUSTOM_FEES.balance + IMPORT_FEES.balance</field>
                                            </record>
                                        </field>
                                        <field name="children_ids">
                                            <record id="tax_report_custom_fees" model="account.report.line">
                                                <field name="name">Tariff</field>
                                                <field name="code">CUSTOM_FEES</field>
                                                <field name="expression_ids">
                                                    <record id="tax_report_custom_fees_balance" model="account.report.expression">
                                                        <field name="label">balance</field>
                                                        <field name="engine">tax_tags</field>
                                                        <field name="formula">TARIFF</field>
                                                    </record>
                                                </field>
                                            </record>
                                            <record id="tax_report_import_fees" model="account.report.line">
                                                <field name="name">Parafiscal charge on imports</field>
                                                <field name="code">IMPORT_FEES</field>
                                                <field name="expression_ids">
                                                    <record id="tax_report_import_fees_balance" model="account.report.expression">
                                                        <field name="label">balance</field>
                                                        <field name="engine">tax_tags</field>
                                                        <field name="formula">PARAFISCAL CHARGE ON IMPORTS</field>
                                                    </record>
                                                </field>
                                            </record>
                                        </field>
                                    </record>
                                </field>
                            </record>
                            <record id="tax_report_services_vat" model="account.report.line">
                                <field name="name">Provision of services (deductible VAT)</field>
                                <field name="code">SERVICES_VAT</field>
                                <field name="expression_ids">
                                    <record id="tax_report_services_vat_balance" model="account.report.expression">
                                        <field name="label">balance</field>
                                        <field name="engine">external</field>
                                        <field name="formula">sum</field>
                                        <field name="subformula">editable;rounding=2</field>
                                    </record>
                                </field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_fixed_assets" model="account.report.line">
                        <field name="name">2-FIXED ASSETS (base excl. tax)</field>
                        <field name="code">FIXED_ASSETS</field>
                        <field name="expression_ids">
                            <record id="tax_report_fixed_assets_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">Fixed assets (base excl. tax)</field>
                            </record>
                        </field>
                    </record>
                    <record id="tax_report_fixed_assets_vat" model="account.report.line">
                        <field name="name">2-FIXED ASSETS (deductible VAT)</field>
                        <field name="code">FIXED_ASSETS_VAT</field>
                        <field name="expression_ids">
                            <record id="tax_report_fixed_assets_vat_balance" model="account.report.expression">
                                <field name="label">balance</field>
                                <field name="engine">tax_tags</field>
                                <field name="formula">Fixed assets (deductible VAT)</field>
                            </record>
                        </field>
                    </record>
                </field>
            </record>
        </field>
    </record>
</odoo>
