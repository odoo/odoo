<?xml version="1.0" encoding="UTF-8"?>

<templates xml:space="preserve">
    <!-- Re-render lists form as no reload is done on portal page -->
    <t t-name="mass_mailing.portal.list_form_content">
        <ul id="o_mailing_subscription_form_lists"
            t-if="listsMemberOrPoposal.length"
            class="list-group">
            <li t-foreach="listsMemberOrPoposal"
                t-as="mailing_list"
                t-key="mailing_list_key"
                class="list-group-item p-0">
                <label class="o_mailing_subscription_form_list_toggle checkbox-group d-flex align-items-center px-3">
                    <input class="mailing_lists_checkboxes checkbox-input mx-2"
                           type="checkbox"
                           role="switch"
                           name="mailing_list_ids"
                           t-att-id="'mailing_list_id' + mailing_list['id']"
                           t-att-data-description="mailing_list['description']"
                           t-att-data-member="mailing_list['member'] ? '1' : undefined"
                           t-att-value="mailing_list['id']"
                           t-att-checked="mailing_list['opt_out'] ? undefined : 'checked'"
                           t-att-title="mailing_list['name']"/>
                    <span class="mx-2 py-3" t-out="mailing_list['name']"/>
                </label>
                <div t-attf-class="pe-3 o_mailing_subscription_form_list_description #{mailing_list['description'] ? 'mb-3' : ''}"
                     t-att-data-description="mailing_list['description']"/>
            </li>
        </ul>
    </t>

    <!-- Post action informative span -->
    <t t-name="mass_mailing.portal.list_form_update_status">
        <t t-if="infoKey === 'error'">
            <i class="fa fa-exclamation-triangle me-2"/>
            <span>An error occurred. Please retry later.</span>
        </t>
        <t t-else="">
            <i class="fa fa-check me-2"/>
            <span>Your preferences have been updated</span>
        </t>
    </t>
</templates>
