<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_loyalty.OrderSummary" t-inherit="point_of_sale.OrderSummary" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('summary')]" position="after">
            <t t-set="_loyaltyStats" t-value="getLoyaltyPoints()"/>
            <t t-foreach="_loyaltyStats" t-as="_loyaltyStat" t-key="_loyaltyStat.couponId">
                <t t-if="_loyaltyStat.points.won || _loyaltyStat.points.spent">
                    <div class="summary clearfix w-100 border-top text-end fw-bolder">
                        <div class='d-flex flex-column px-3 py-2 bg-200 text-start'>
                            <div class="loyalty-points-title text-center mb-1">
                                <t t-esc="_loyaltyStat.points.name"/>
                            </div>
                            <div class="d-flex justify-content-around gap-2 mt-1">
                                <div
                                    t-if='_loyaltyStat.points.won'
                                    class="loyalty-points-won d-flex flex-column align-items-center justify-content-center flex-grow-1 rounded bg-300 px-3 py-2" >
                                    <span class="text-muted">Points Won</span>
                                    <span class='value text-success '>+<t t-esc='_loyaltyStat.points.won'/></span>
                                </div>
                                <div
                                    t-if='_loyaltyStat.points.spent'
                                    class="loyalty-points-won d-flex flex-column align-items-center justify-content-center flex-grow-1 rounded bg-300 px-3 py-2" >
                                    <span class="text-muted">Points Spent</span>
                                    <span class='value text-danger'>-<t t-esc='_loyaltyStat.points.spent'/></span>
                                </div>
                                <div class="loyalty-points-total d-flex flex-column align-items-center justify-content-center flex-grow-1 rounded bg-300 px-3 py-2">
                                    <span class="text-muted">New Total</span>
                                    <span class='value text-primary'><t t-esc='_loyaltyStat.points.total'/></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
            </t>
        </xpath>
    </t>
</templates>
