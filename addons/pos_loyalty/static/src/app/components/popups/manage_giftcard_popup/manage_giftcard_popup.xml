<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_loyalty.ManageGiftCardPopup">
        <Dialog title="this.props.title" size="'md'">
            <div class="position-relative">
                <input id="code"
                    t-att-rows="this.props.rows"
                    class="form-control form-control-lg mx-auto"
                    type="text"
                    autocomplete="off"
                    t-model="this.state.inputValue"
                    t-ref="input"
                    t-on-keydown="this.onKeydownGiftCardCode"
                    t-att-placeholder="this.props.placeholder"
                    t-att-style="this.state.error ? 'border-color: red;' : ''" />
                <div t-if="this.state.loading" class="gift-card-loading pe-3 h-100 position-absolute end-0 top-0 d-flex align-items-center">
                    <i class="fa fa-spinner fa-spin" />
                </div>
            </div>
            <div class="mt-3 d-flex">
                <div t-attf-class="col align-items-center d-flex {{!this.ui.isSmall? 'me-2 w-50': ''}}">
                    <div class="col-form-label text-center pe-0 me-4 fs-5">Amount</div>
                    <div t-attf-class="{{this.ui.isSmall? 'flex-grow-1' : ''}}">
                        <input id="amount"
                            class="form-control form-control-lg"
                            type="number"
                            t-att-disabled="this.state.lockGiftCardFields || this.state.loading"
                            t-model="this.state.amountValue"
                            t-ref="amountInput"
                            placeholder="Enter amount"
                            t-att-style="this.state.amountError ? 'border-color: red;' : ''"/>
                    </div>
                </div>
                <div t-if="!this.ui.isSmall" class="d-flex ms-2 w-50 o_exp_date_container">
                    <div class="col-form-label text-center pe-0 me-4 fs-5">Expiration</div>
                    <DateTimeInput
                        type="'date'"
                        disabled="this.state.lockGiftCardFields || this.state.loading"
                        value="this.state.expirationDate"
                        onChange.bind="this.onExpDateChange" />
                </div>
            </div>
            <div t-if="this.ui.isSmall" class="d-flex my-2 o_exp_date_container">
                <div class="col-form-label text-center pe-0 me-2 fs-5">Expiration</div>
                <DateTimeInput
                    type="'date'"
                    value="this.state.expirationDate"
                    disabled="this.state.lockGiftCardFields || this.state.loading"
                    onChange.bind="this.onExpDateChange" />
            </div>
            <t t-set-slot="footer">
                <button class="btn btn-primary" t-on-click="this.addBalance" t-att-disabled="this.state.loading">
                    <t t-if="this.state.lockGiftCardFields">
                        Add existing Gift Card
                    </t>
                    <t t-else="">
                        Add Balance
                    </t>
                </button>
            </t>
        </Dialog>
    </t>
</templates>
