<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <!-- Partner and address -->
        <record id="res_partner_grade_access" model="ir.model.access">
            <field name="name">openerp.portal.res.partner.grade</field>
            <field name="model_id" ref="crm_partner_assign.model_res_partner_grade"/>
            <field name="group_id" ref="base.group_portal"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="0"/>
            <field name="perm_unlink" eval="0"/>
        </record>

        <!-- CRM Lead portal -->
        <record id="assigned_lead_portal_rule_1" model="ir.rule">
            <field name="name">openerp.portal.crm.lead</field>
            <field name="model_id" ref="crm.model_crm_lead"/>
            <field name="groups" eval="[(6,0,[ref('base.group_portal')])]"/>
            <field name="domain_force">[('partner_assigned_id','child_of',user.commercial_partner_id.id)]</field>
        </record>
        <record id="lead_portal_access" model="ir.model.access">
            <field name="name">openerp.portal.crm.lead</field>
            <field name="model_id" ref="crm.model_crm_lead"/>
            <field name="group_id" ref="base.group_portal"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="0"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_unlink" eval="0"/>
        </record>

    </data>
    <data noupdate="1">

        <record id="mt_lead_accept" model="mail.message.subtype">
            <field name="name">Partner Accept</field>
            <field name="res_model">crm.lead</field>
            <field name="default" eval="False"/>
            <field name="description">Partner Accept</field>
        </record>
        
        <record id="mt_lead_refused" model="mail.message.subtype">
            <field name="name">Partner Refused</field>
            <field name="res_model">crm.lead</field>
            <field name="default" eval="False"/>
            <field name="description">Partner Refused</field>
        </record>
        
        <record id="mt_crm_partner_lead_assign" model="mail.message.subtype">
            <field name="name">Lead Assign</field>
            <field name="res_model">crm.lead</field>
            <field name="default" eval="False"/>
            <field name="hidden" eval="True"/>
            <field name="description">Lead Assign</field>
        </record>
        
        <record id="mt_partner_lead_assign" model="mail.message.subtype">
            <field name="name">Lead Assign</field>
            <field name="res_model">res.partner</field>
            <field name="default" eval="False"/>
            <field name="description">Lead Assign</field>
            <field name="parent_id" eval="ref('mt_crm_partner_lead_assign')"/>
            <field name="relation_field">partner_assigned_id</field>
        </record>
     
    </data>
 </openerp>
