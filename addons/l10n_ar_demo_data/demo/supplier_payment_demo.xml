<?xml version="1.0" encoding="utf-8"?>
<odoo>

<!-- TODO ver de computar retenciones automáticamente -->

<!-- pago de asustek con banco y con retención ganancias -->
    <record model="account.payment.group" id="demo_supplier_payment_1">
        <field name="company_id" ref="base.main_company"/>
        <field name="partner_id" ref="base.res_partner_1"/>
        <field name="partner_type">supplier</field>
    </record>

    <record model="account.payment" id="demo_supplier_payment_1_line_1">
        <field name="journal_id" search="[('type', '=', 'bank')]"/>
        <field name="payment_group_id" ref="demo_supplier_payment_1"/>
        <field name="partner_type">supplier</field>
        <field name="payment_type">outbound</field>
        <field name="partner_id" ref="base.res_partner_1"/>
        <field name="amount" eval="500.0"/>
        <field name="payment_method_id" ref="account.account_payment_method_manual_out"/>
    </record>

    <record model="account.payment" id="demo_supplier_payment_1_line_2">
        <field name="journal_id" search="[('name', '=', 'Retenciones')]"/>
        <field name="payment_group_id" ref="demo_supplier_payment_1"/>
        <field name="partner_type">supplier</field>
        <field name="payment_type">outbound</field>
        <field name="partner_id" ref="base.res_partner_1"/>
        <field name="amount" eval="50.0"/>
        <field name="tax_withholding_id" search="[('type_tax_use', '=', 'supplier'), ('name', '=', 'Retención Ganancias Aplicada')]"/>
        <field name="withholding_number">123465</field>
        <field name="payment_method_id" ref="account_withholding.account_payment_method_out_withholding"/>
    </record>

    <function model="account.payment.group" name="post">
        <value eval="[ref('demo_supplier_payment_1')]"/>
    </function>

<!-- pago de asustek en efectivo y con retención iibb -->
    <record model="account.payment.group" id="demo_supplier_payment_2">
        <field name="company_id" ref="base.main_company"/>
        <field name="partner_id" ref="base.res_partner_1"/>
        <field name="partner_type">supplier</field>
    </record>

    <record model="account.payment" id="demo_supplier_payment_2_line_1">
        <field name="journal_id" search="[('type', '=', 'bank')]"/>
        <field name="payment_group_id" ref="demo_supplier_payment_2"/>
        <field name="partner_type">supplier</field>
        <field name="payment_type">outbound</field>
        <field name="partner_id" ref="base.res_partner_1"/>
        <field name="amount" eval="700.0"/>
        <field name="payment_method_id" ref="account.account_payment_method_manual_out"/>
    </record>

    <record model="account.payment" id="demo_supplier_payment_2_line_2">
        <field name="journal_id" search="[('name', '=', 'Retenciones')]"/>
        <field name="payment_group_id" ref="demo_supplier_payment_2"/>
        <field name="partner_type">supplier</field>
        <field name="payment_type">outbound</field>
        <field name="partner_id" ref="base.res_partner_1"/>
        <field name="amount" eval="100.0"/>
        <field name="tax_withholding_id" search="[('type_tax_use', '=', 'supplier'), ('name', '=', 'Retención IIBB Aplicada')]"/>
        <field name="withholding_number">0001-12345</field>
        <field name="payment_method_id" ref="account_withholding.account_payment_method_out_withholding"/>
    </record>

    <function model="account.payment.group" name="post">
        <value eval="[ref('demo_supplier_payment_2')]"/>
    </function>

</odoo>
