<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <template id="assets_frontend" inherit_id="website.assets_frontend" name="Website Sale Stock">
        <xpath expr="." position="inside">
            <script type="text/javascript" src="/website_sale_stock/static/src/js/website_sale_stock.js" />
        </xpath>
    </template>

    <!-- Shopping Cart Lines -->
    <template id="website_sale_stock_cart_lines" inherit_id="website_sale.cart_lines" name="Shopping Cart Lines">
        <xpath expr="//input[@type='text']" position="replace">
            <t t-set="set_max" t-value="line.product_uom_qty + (line.product_id.virtual_available - line.product_id.cart_qty)"/>
            <input type="text" class="js_quantity form-control" t-att-data-line-id="line.id" t-att-data-product-id="line.product_id.id" t-att-value="int(line.product_uom_qty)" t-att-data-max="set_max if line.product_id.inventory_availability in ['always', 'threshold'] else None" />
        </xpath>
    </template>

</odoo>

