<?xml version="1.0" encoding="UTF-8"?>

<templates>

    <t t-extend="website.dashboard_common">
        <t t-jquery=".o_main:first" t-operation="after">
            <t t-if="widget.groups.sale_salesman">
                <div t-if="widget.dashboards_data.sales.values.awaiting_payments" class="o_inner_box o_main" title="Awaiting Payments">
                    <a href="#" class="o_dashboard_action" name="website_sale.payment_transaction_action_awaiting_payments">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.awaiting_payments"/></div>
                        Awaiting Payments
                    </a>
                </div>
                <div t-if="widget.dashboards_data.sales.values.order_to_invoice" class="o_inner_box o_main" title="Orders To Invoice">
                    <a href="#" class="o_dashboard_action" name="website_sale.sale_order_action_order_to_invoice">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.order_to_invoice"/></div>
                        Orders To Invoice
                    </a>
                </div>
                <div t-if="widget.dashboards_data.sales.values.payment_to_capture" class="o_inner_box o_main" title="Payments To Capture">
                    <a href="#" class="o_dashboard_action" name="website_sale.payment_transaction_action_payments_to_capture">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.payment_to_capture"/></div>
                        Payments To Capture
                    </a>
                </div>
                <div t-if="widget.dashboards_data.sales.values.abandoned_carts" class="o_inner_box o_main" title="Abandoned Carts">
                    <a href="#" class="o_dashboard_action" name="website_sale.sale_order_action_abandonned_carts">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.abandoned_carts"/></div>
                        Abandoned Carts
                    </a>
                </div>
                <div t-if="widget.dashboards_data.sales.values.active_carts" class="o_inner_box o_secondary" title="Active Carts">
                    <a href="#" class="o_dashboard_action" name="website_sale.sale_order_action_active_carts">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.active_carts"/></div>
                        Active Carts
                    </a>
                </div>
            </t>
        </t>
    </t>

    <t t-name="website_sale.dashboard_sales">
        <t t-if="widget.groups.sale_salesman">
            <div class="row o_dashboard_sales">
                <div class="col-xs-12 o_box">
                    <div class="col-md-6 col-xs-12">
                        <h2>Sales / <t t-esc="widget.date_range"></t></h2>
                        <div id="o_graph_sales" class="o_graph" data-type="sales"/>
                    </div>

                    <div class="col-md-6 col-xs-12">
                        <t t-call="website_sale.products_table"/>
                    </div>
                </div>
            </div>
        </t>
    </t>

    <t t-name="website_sale.products_table">
        <h4>Best Sellers</h4>
        <div t-if="!widget.dashboards_data.sales.best_sellers || !widget.dashboards_data.sales.best_sellers.length">
            <i>There is no recent online sale.</i>
        </div>

        <div class="row" t-if="widget.dashboards_data.sales.best_sellers &amp;&amp; widget.dashboards_data.sales.best_sellers.length">
            <div class="col-md-5 col-xs-12">
                <table class="table table-responsive table-hover">
                    <tr>
                        <th>Product</th>
                        <th>Qty Sold</th>
                    </tr>
                    <tr class="o_product_template" t-foreach="widget.dashboards_data.sales.best_sellers" t-as="product" t-att-data-product-id="product.id">
                        <td><t t-esc="product.name"/></td>
                        <td><t t-esc="product.qty"/></td>
                    </tr>
                </table>
            </div>
            <div class="col-md-7 col-xs-12">
                <div class="row">
                    <div class="col-sm-6 o_inner_box_table" title="Sold">
                        <div class="o_highlight"><t t-esc="widget.render_monetary_field(
                        widget.dashboards_data.sales.summary.sold, widget.data.currency)"/></div>
                        Sold
                    </div>
                    <div class="col-sm-6 o_inner_box_table" title="Orders">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.orders"/></div>
                        Orders
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 o_inner_box_table" title="Carts">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.carts"/></div>
                        Carts
                    </div>
                    <div class="col-sm-6 o_inner_box_table" title="Net Profit">
                        <div class="o_highlight"><t t-esc="widget.render_monetary_field(widget.dashboards_data.sales.summary.net_profit, widget.data.currency)"/></div>
                        Net Profit
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-6 o_inner_box_table" title="Average Order">
                        <div class="o_highlight"><t t-esc="widget.render_monetary_field((widget.dashboards_data.sales.summary.sold/widget.dashboards_data.sales.summary.orders), widget.data.currency)"/></div>
                        Average Order
                    </div>
                    <div class="col-sm-6 o_inner_box_table" title="Conversion">
                        <div class="o_highlight"><t t-esc="widget.format_number(widget.dashboards_data.sales.summary.orders/
                        widget.dashboards_data.sales.summary.carts*100, widget.data.currency, '%')"/></div>
                        Conversion
                    </div>
                </div>
            </div>
        </div>
    </t>
</templates>
