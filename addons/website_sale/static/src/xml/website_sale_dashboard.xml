<?xml version="1.0" encoding="UTF-8"?>
<templates>
    <t t-extend="website.dashboard_header">
        <t t-jquery="t[t-foreach='apps']" t-operation="before">
            <div t-if="widget.dashboards_data.sales.summary.order_unpaid_count" class="o_inner_box o_main o_box_item" title="Confirm orders when you get paid." t-name='unpaid_orders_box'>
                <a href="#" class="o_dashboard_action" name="website_sale.action_unpaid_orders_ecommerce">
                    <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.order_unpaid_count"/></div>
                    Unpaid Orders
                </a>
                <t t-set="vignette_nbr" t-value="vignette_nbr + 1"/>
            </div>
            <div t-if="widget.dashboards_data.sales.summary.payment_to_capture_count" class="o_inner_box o_main o_box_item" title="Capture order payments when the delivery is completed.">
                <a href="#" class="o_dashboard_action" name="website_sale.payment_transaction_action_payments_to_capture">
                    <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.payment_to_capture_count"/></div>
                    Payments to Capture
                </a>
                <t t-set="vignette_nbr" t-value="vignette_nbr + 1"/>
            </div>
            <div t-if="widget.dashboards_data.sales.summary.order_carts_abandoned_count" class="o_inner_box o_main o_box_item" title="Send a recovery email to visitors who haven't completed their order.">
                <a href="#" class="o_dashboard_action" name="website_sale.action_abandoned_orders_ecommerce">
                    <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.order_carts_abandoned_count"/></div>
                    Abandoned Carts
                </a>
                <t t-set="vignette_nbr" t-value="vignette_nbr + 1"/>
            </div>
        </t>
   </t>

    <t t-name="website_sale.dashboard_sales">
        <div t-if="widget.groups.sale_salesman" class="row o_dashboard_sales">
            <div class="col-xs-12 o_box">
                <div t-if="widget.dashboards_data.sales.summary.order_count">
                    <div class="col-md-6 col-xs-12">
                        <t t-if="widget.date_range">
                            <h2>Sales Since Last <t t-esc="widget.date_range"></t></h2>
                        </t>
                        <t t-else=""><h2>Sales</h2></t>
                        <div id="o_graph_sales" class="o_graph" data-type="sales"/>
                    </div>
                    <div class="col-md-6 col-xs-12">
                        <t t-call="website_sale.products_table"/>
                    </div>
                </div>
                <div t-if="! widget.dashboards_data.sales.summary.order_count">
                    <div class="col-md-12 col-xs-12">
                        <t t-if="widget.date_range">
                            <h2>Sales Since Last <t t-esc="widget.date_range"></t></h2>
                        </t>
                        <t t-else=""><h2>Sales</h2></t>
                        <div class="o_demo_background">
                        </div>
                        <div class="o_demo_message">
                            <h3>There is no recent confirmed order.</h3>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </t>

    <t t-name="website_sale.order_reports">
        <a href="#" class="o_dashboard_action" name="website_sale.sale_report_action_dashboard">
            <div class="col-sm-4 o_link_enable" title="Orders">
                <div>Orders</div>
                <div class="o_highlight">
                    <t t-esc="widget.dashboards_data.sales.summary.order_count"/>
                </div>
                <t t-set="order_count" t-value="widget.dashboards_data.sales.evl_summary.evl_order_count"/>
                <t t-if="order_count &gt; 0">
                    <div class="o_green" t-att-title="set_tooltip"><i class="fa fa-caret-up"/><t t-esc="widget.format_number(order_count, 'float', [3, 2], '%')"/></div>
                </t>
                <t t-if="order_count &lt; 0">
                    <div class="o_red" t-att-title="set_tooltip"><i class="fa fa-caret-down"/><t t-esc="widget.format_number(order_count, 'float', [3, 2], '%')"/></div>
                </t>
            </div>
        </a>
    </t>

    <t t-name="website_sale.sold_order_reports">
        <a href="#" class="o_dashboard_action" name="website_sale.sale_report_action_dashboard">
            <div class="col-sm-4 o_link_enable" title="Untaxed Total Sold">
                <div>Sold</div>
                <div class="o_highlight">
                    <t t-esc="widget.render_monetary_field(widget.dashboards_data.sales.summary.total_sold, widget.data.currency)"/>
                </div>
                <t t-set="total_sold" t-value="widget.dashboards_data.sales.evl_summary.evl_total_sold"/>
                <t t-if="total_sold &gt; 0">
                    <div class="o_green" t-att-title="set_tooltip"><i class="fa fa-caret-up"/><t t-esc="widget.format_number(total_sold, 'float', [3, 2], '%')"/></div>
                </t>
                <t t-if="total_sold &lt; 0">
                    <div class="o_red" t-att-title="set_tooltip"><i class="fa fa-caret-down"/><t t-esc="widget.format_number(total_sold, 'float', [3, 2], '%')"/></div>
                </t>
            </div>
        </a>
    </t>

    <t t-name="website_sale.carts_order_reports">
        <a href="#" class="o_dashboard_action" name="website_sale.sale_report_action_carts">
            <div class="col-sm-4 o_link_enable o_invisible_border" title="Carts">
                <div>Carts</div>
                <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.order_carts_count"/></div>
                <t t-set="order_carts" t-value="widget.dashboards_data.sales.evl_summary.evl_order_carts_count"/>
                <t t-if="order_carts &gt; 0">
                    <div class="o_green" t-att-title="set_tooltip"><i class="fa fa-caret-up"/><t t-esc="widget.format_number(order_carts, 'float', [3, 2], '%')"/></div>
                </t>
                <t t-if="order_carts &lt; 0">
                    <div class="o_red" t-att-title="set_tooltip"><i class="fa fa-caret-down"/><t t-esc="widget.format_number(order_carts, 'float', [3, 2], '%')"/></div>
                </t>
            </div>
        </a>
    </t>

    <t t-name="website_sale.products_table">
        <t t-set="set_tooltip" t-value="'compared to previous period'"/>
        <div class="row">
            <div class="col-md-12 col-xs-12">
                <div class="row">
                    <h4>AT A GLANCE</h4>
                    <t t-call="website_sale.order_reports"/>
                    <t t-call="website_sale.sold_order_reports"/>
                    <t t-call="website_sale.carts_order_reports"/>
                    <div class="col-sm-4 o_link_disable" title="Orders/Day">
                        <div>Orders/Day</div>
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.order_per_day_ratio"/></div>
                        <t t-set="order_per_day" t-value="widget.dashboards_data.sales.evl_summary.evl_order_per_day_ratio"/>
                        <t t-if="order_per_day &gt; 0">
                            <div class="o_green" t-att-title="set_tooltip"><i class="fa fa-caret-up"/><t t-esc="widget.format_number(order_per_day, 'float', [3, 2], '%')"/></div>
                        </t>
                        <t t-if="order_per_day &lt; 0">
                            <div class="o_red" t-att-title="set_tooltip"><i class="fa fa-caret-down"/><t t-esc="widget.format_number(order_per_day, 'float', [3, 2], '%')"/></div>
                        </t>
                    </div>
                    <div class="col-sm-4 o_link_disable" title="Average Order">
                        <div>Average Order</div>
                        <div class="o_highlight"><t t-esc="widget.render_monetary_field(widget.dashboards_data.sales.summary.order_sold_ratio, widget.data.currency)"/></div>
                        <t t-set="average_order" t-value="widget.dashboards_data.sales.evl_summary.evl_order_sold_ratio"/>
                        <t t-if="average_order &gt; 0">
                            <div class="o_green" t-att-title="set_tooltip"><i class="fa fa-caret-up"/><t t-esc="widget.format_number(average_order, 'float', [3, 2], '%')"/></div>
                        </t>
                        <t t-if="average_order &lt; 0">
                            <div class="o_red" t-att-title="set_tooltip"><i class="fa fa-caret-down"/><t t-esc="widget.format_number(average_order, 'float', [3, 2], '%')"/></div>
                        </t>
                    </div>
                    <div class="col-sm-4 o_link_disable o_invisible_border" title="Conversion">
                        <div>Conversion</div>
                        <div class="o_highlight"><t t-esc="widget.format_number(widget.dashboards_data.sales.summary.order_convertion_pctg, 'float', [3, 2], '%')"/></div>
                        <t t-set="order_convertion" t-value="widget.dashboards_data.sales.evl_summary.evl_order_convertion_pctg"/>
                        <t t-if="order_convertion &gt; 0">
                            <div class="o_green" t-att-title="set_tooltip"><i class="fa fa-caret-up"/><t t-esc="widget.format_number(order_convertion, 'float', [3, 2], '%')"/></div>
                        </t>
                        <t t-if="order_convertion &lt; 0">
                            <div class="o_red" t-att-title="set_tooltip"><i class="fa fa-caret-down"/><t t-esc="widget.format_number(order_convertion, 'float', [3, 2], '%')"/></div>
                        </t>
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-xs-12 o_top_margin">
                <div class="row">
                    <h4>Best Sellers</h4>
                    <table class="table table-responsive table-hover">
                        <tr>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Sold</th>
                        </tr>
                        <tr class="o_product_template" t-foreach="widget.dashboards_data.sales.best_sellers" t-as="product" t-att-data-product-id="product.id">
                            <td><t t-esc="product.name"/></td>
                            <td><t t-esc="product.qty"/></td>
                            <td><t t-esc="widget.render_monetary_field(product.sales, widget.data.currency)"/></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </t>
</templates>
