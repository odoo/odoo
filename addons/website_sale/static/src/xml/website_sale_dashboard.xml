<?xml version="1.0" encoding="UTF-8"?>

<templates>

    <t t-extend="website.dashboard_common">
        <t t-jquery=".o_dashboard_smart_button" t-operation="before">
            <t t-if="widget.groups.sale_salesman">
                <div t-if="widget.dashboards_data.sales.values.unpaid_orders" class="o_inner_box o_main o_box_item" title="Confirm orders when you get paid.">
                    <a href="#" class="o_dashboard_action" name="website_sale.action_unpaid_orders_ecommerce">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.unpaid_orders"/></div>
                        Unpaid Orders
                    </a>
                </div>
                <div t-if="widget.dashboards_data.sales.values.order_to_invoice" class="o_inner_box o_main o_box_item" title="Generate an invoice from orders ready for invoicing.">
                    <a href="#" class="o_dashboard_action" name="website_sale.sale_order_action_order_to_invoice">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.order_to_invoice"/></div>
                        Orders to Invoice
                    </a>
                </div>
                <div t-if="widget.dashboards_data.sales.values.payment_to_capture" class="o_inner_box o_main o_box_item" title="Capture order payments when the delivery is completed.">
                    <a href="#" class="o_dashboard_action" name="website_sale.payment_transaction_action_payments_to_capture">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.payment_to_capture"/></div>
                        Payments to Capture
                    </a>
                </div>
                <div t-if="widget.dashboards_data.sales.values.abandoned_carts" class="o_inner_box o_main o_box_item" title="Send a recovery email to visitors who haven't completed their order.">
                    <a href="#" class="o_dashboard_action" name="website_sale.sale_order_action_abandonned_carts">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.values.abandoned_carts"/></div>
                        Abandoned Carts
                    </a>
                </div>
            </t>
        </t>
    </t>

    <t t-name="website_sale.dashboard_sales">
        <t t-if="widget.groups.sale_salesman">
            <div class="row o_dashboard_sales">
                <div class="col-xs-12 o_box">
                    <div t-if="widget.dashboards_data.sales.best_sellers and widget.dashboards_data.sales.best_sellers.length">
                        <div class="col-md-7 col-xs-12">
                            <t t-if="widget.date_range">
                                <h2>Sales Since Last <t t-esc="widget.date_range"></t></h2>
                            </t>
                            <t t-else=""><h2>Sales</h2></t>
                            <div id="o_graph_sales" class="o_graph" data-type="sales"/>
                        </div>

                        <div class="col-md-5 col-xs-12">
                            <t t-call="website_sale.products_table"/>
                        </div>
                    </div>
                    <div t-if="!widget.dashboards_data.sales.best_sellers || !widget.dashboards_data.sales.best_sellers.length">
                        <div class="col-md-12 col-xs-12">
                            <t t-if="widget.date_range">
                                <h2>Sales Since Last <t t-esc="widget.date_range"></t></h2>
                            </t>
                            <t t-else=""><h2>Sales</h2></t>
                            <div class="o_demo_background">
                            </div>
                            <div class="o_demo_message">
                                <h3>There is no recent confirmed order.</h3>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </t>
    </t>

    <t t-name="website_sale.products_table">
        <div class="row">
            <div class="col-md-12 col-xs-12">
                <div class="row">
                    <h4>AT A GLANCE</h4>
                    <div class="col-sm-4 o_link_enable" title="Orders">
                        <a href="#" class="o_dashboard_action" name="website_sale.sale_report_action_dashboard">
                            <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.orders"/></div>
                            Orders
                        </a>
                    </div>
                    <div class="col-sm-4 o_link_enable" title="Untaxed Total Sold">
                        <a href="#" class="o_dashboard_action" name="website_sale.sale_report_action_dashboard">
                            <div class="o_highlight"><t t-esc="widget.render_monetary_field(
                            widget.dashboards_data.sales.summary.sold, widget.data.currency)"/></div>
                            Sold
                        </a>
                    </div>
                    <div class="col-sm-4 o_link_enable o_invisible_border" title="Carts">
                        <a href="#" class="o_dashboard_action" name="website_sale.sale_report_action_dashboard_carts">
                            <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.carts"/></div>
                            Carts
                        </a>
                    </div>
                    <div class="col-sm-4 o_link_disable" title="Orders/Day">
                        <div class="o_highlight"><t t-esc="widget.dashboards_data.sales.summary.order_ratio"/></div>
                        Orders/Day
                    </div>
                    <div class="col-sm-4 o_link_disable" title="Average Order">
                        <div class="o_highlight"><t t-esc="widget.render_monetary_field((widget.dashboards_data.sales.summary.sold/widget.dashboards_data.sales.summary.orders), widget.data.currency)"/></div>
                        Average Order
                    </div>
                    <div class="col-sm-4 o_link_disable o_invisible_border" title="Conversion">
                        <div class="o_highlight"><t t-esc="widget.format_number(widget.dashboards_data.sales.summary.orders/
                        widget.dashboards_data.sales.summary.carts*100, widget.data.currency, '%')"/></div>
                        Conversion
                    </div>
                </div>
            </div>
            <div class="col-md-12 col-xs-12 o_top_margin">
                <div class="row">
                    <h4>Best Sellers</h4>
                    <table class="table table-responsive table-hover">
                        <tr>
                            <th>Product</th>
                            <th>Quantity</th>
                            <th>Sold</th>
                        </tr>
                        <tr class="o_product_template" t-foreach="widget.dashboards_data.sales.best_sellers" t-as="product" t-att-data-product-id="product.id">
                            <td><t t-esc="product.name"/></td>
                            <td><t t-esc="product.qty"/></td>
                            <td><t t-esc="widget.render_monetary_field(
                            product.sales, widget.data.currency)"/></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </t>
</templates>
