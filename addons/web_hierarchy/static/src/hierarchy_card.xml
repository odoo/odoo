<?xml version="1.0" encoding="utf-8" ?>
<templates>

    <t t-name="web_hierarchy.HierarchyCard">
        <div class="o_hierarchy_node_container d-flex flex-column" t-att-class="this.classNames" t-att-data-node-id="this.props.node.id">
            <div class="o_hierarchy_node_button_container w-100 d-flex justify-content-end">
                <button t-if="this.props.node.canShowParentNode"
                        name="hierarchy_search_parent_node"
                        class="btn p-0"
                        t-on-click.synthetic="this.onClickArrowUp"
                >
                    <i class="fa fa-chevron-up"/>
                </button>
            </div>
            <div class="o_hierarchy_node w-100 h-100 d-flex flex-column justify-content-between border"
                t-att-class="{
                    'border-bottom-0': this.props.node.nodes.length or this.props.node.canShowChildNodes,
                }"
                t-att-data-node-id="this.props.node.id"
                t-custom-click.synthetic="onGlobalClick"
            >
                <div class="o_hierarchy_node_content">
                    <Record resModel="this.props.node.model.resModel"
                            resId="this.props.node.resId"
                            fields="this.props.node.model.fields"
                            activeFields="this.props.node.model.activeFields"
                            values="this.props.node.data"
                            t-slot-scope="data"
                    >
                        <t t-call="{{ this.templates['hierarchy-box'] }}" t-call-context="getRenderingContext(data)"/>
                    </Record>
                </div>
                <button t-if="this.props.node.nodes.length or this.props.node.canShowChildNodes"
                        name="hierarchy_search_subsidiaries"
                        class="o_hierarchy_node_button btn rounded-0 d-grid"
                        t-att-class="{
                            'btn-primary': !this.props.node.nodes.length,
                            'btn-secondary': this.props.node.nodes.length > 0,
                        }"
                        t-on-click.synthetic="this.onClickArrowDown"
                >
                    <t t-if="!this.props.node.nodes.length">
                        <span style="grid-column: 2;">
                            Unfold
                        </span>
                        <span class="text-end" style="grid-column: 3;">
                            <t t-out="this.props.node.childResIds.length"/>
                            <i class="fa ps-1" t-att-class="this.props.archInfo.icon"/>
                        </span>
                    </t>
                    <t t-else="">
                        <span style="grid-column: 2;">
                            Fold
                        </span>
                    </t>
                </button>
            </div>
        </div>
    </t>

</templates>
