<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        <menuitem
            id="hr.menu_hr_reporting"
            name="Reporting"
            parent="hr.menu_hr_root"
            sequence="40" />

        <record id="view_timesheet_line_graph" model="ir.ui.view">
            <field name="name">report.timesheet.line.graph</field>
            <field name="model">report.timesheet.line</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph string="Timesheet Line" type="bar">
                    <field name="account_id"/>
                    <field name="quantity" operator="+"/>
                    <field group="True" name="user_id"/>
                </graph>
            </field>
        </record>

        <record id="view_timesheet_line_tree" model="ir.ui.view">
            <field name="name">report.timesheet.line.tree</field>
            <field name="model">report.timesheet.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Timesheet Line">
                    <field name="date" invisible="1"/>
                    <field name="day" invisible="1"/>
                    <field name="quantity" sum="Quantity"/>
                    <field name="cost" sum="Cost"/>
                    <field name="user_id" invisible="1"/>
                    <field name="name" invisible="1"/>
                    <field name="month" invisible="1"/>
                    <field name="account_id" invisible="1"/>
                    <field name="product_id" invisible="1"/>
                    <field name="invoice_id" invisible="1"/>
                </tree>
            </field>
        </record>

        <record id="view_timesheet_line_search" model="ir.ui.view">
            <field name="name">report.timesheet.line.search</field>
            <field name="model">report.timesheet.line</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Timesheet by user">
                    <group col="10" colspan="4">
                    	<filter icon="terp-hr" string="This Year"
	                    	    domain="[('date','&lt;=', time.strftime('%%Y-%%m-%%d')),('date','&gt;',(datetime.date.today()-datetime.timedelta(days=365)).strftime('%%Y-%%m-%%d'))]"
	                    	    help="Timesheet lines in this year"/>
	                    <filter icon="terp-hr" string="This Month"
	                    		name="month"
	                    		domain="[('date','&lt;=', time.strftime('%%Y-%%m-%%d')), ('date','&gt;',(datetime.date.today()-datetime.timedelta(days=30)).strftime('%%Y-%%m-%%d'))]"
	                    		help="Timesheet lines in this month"/>
		                <filter icon="gtk-media-rewind"
	                            string="    7 Days    "
	                            separator="1"
	                            domain="[('date','&lt;=', time.strftime('%%Y-%%m-%%d')), ('date','&gt;',(datetime.date.today()-datetime.timedelta(days=7)).strftime('%%Y-%%m-%%d'))]"
	                            help="Timesheet lines during last 7 days"/>
	                    <separator orientation="vertical"/>
	  					<field name="user_id" widget="selection">
	                        <filter icon="terp-hr"
	                        		string="Non Assigned timesheets to users"
	                        		help="Non Assigned timesheets to users"
	                        		domain="[('user_id','=',False)]"/>
	                    </field>
	                    <field name="account_id"/>
                        <field name="product_id"/>
                    </group>
                    <newline/>
                    <group expand="1" string="Group By..." colspan="10" col="12">
                        <filter string="User" name="User" icon="terp-hr" context="{'group_by':'user_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Account" icon="terp-hr" context="{'group_by':'account_id'}"/>
                        <filter string="Product" icon="terp-hr" context="{'group_by':'product_id'}"/>
                        <filter string="Invoice" icon="terp-hr" context="{'group_by':'invoice_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Day" icon="terp-hr" context="{'group_by':'day'}"/>
                        <filter string="Month" icon="terp-hr" context="{'group_by':'month'}"/>
                        <filter string="Year" icon="terp-hr" context="{'group_by':'name'}"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Extended options..." colspan="10" col="12">
                        <field name="date"/>
                        <separator orientation="vertical"/>
                        <field name="invoice_id" widget="selection"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_timesheet_line_stat_all" model="ir.actions.act_window">
            <field name="name">Timesheet Line</field>
            <field name="res_model">report.timesheet.line</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,graph</field>
            <field name="context">{'search_default_month':1,'search_default_User':1,'search_default_user_id':uid,'group_by_no_leaf':1,'group_by':[]}</field>
            <field name="search_view_id" ref="view_timesheet_line_search"/>
        </record>
        <menuitem action="action_timesheet_line_stat_all" id="menu_report_timesheet_line_all" parent="hr.menu_hr_reporting"/>


        <!-- Statistics report on timesheet by user -->

        <record id="view_timesheet_user_graph" model="ir.ui.view">
            <field name="name">report_timesheet.user.graph</field>
            <field name="model">report_timesheet.user</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph string="Timesheet by user" type="bar">
                    <field name="name"/>
                    <field name="quantity" operator="+"/>
                    <field group="True" name="user_id"/>
                </graph>
            </field>
        </record>

        <record id="view_timesheet_user_form" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.user.form</field>
            <field name="model">report_timesheet.user</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Timesheet by user">
                    <field name="name" select="1"/>
                    <field name="month" select="1"/>
                    <field name="user_id" select="1"/>
                </form>
            </field>
        </record>

        <record id="view_timesheet_user_tree" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.user.tree</field>
            <field name="model">report_timesheet.user</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Timesheet by user">
                    <field name="name"/>
                    <field name="month"/>
                    <field name="user_id"/>
                    <field name="quantity"/>
                    <field name="cost"/>
                </tree>
            </field>
        </record>

        <record id="view_timesheet_account_date_graph_account" model="ir.ui.view">
            <field name="name">report_timesheet.account.date.graph</field>
            <field name="model">report_timesheet.account.date</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph orientation="horizontal" string="Daily timesheet per account" type="bar">
                    <field name="name"/>
                    <field name="quantity" operator="+"/>
                    <field group="True" name="account_id"/>
                </graph>
            </field>
        </record>

        <record id="view_timesheet_user_search" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.user.search</field>
            <field name="model">report_timesheet.user</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Timesheet by user">
                    <group col="10" colspan="4">
                        <filter icon="terp-hr" string="My Timesheets" domain="[('user_id','=',uid)]" help="My Timesheets"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-hr" string="This Year" domain="[('name','=',time.strftime('%%Y'))]" help="Timesheet by user in this year"/>
                        <filter icon="terp-hr" string="This Month" domain="[('month','=',time.strftime('%%m'))]" help="Timesheet by user in this month"/>
                        <separator orientation="vertical"/>
                        <field name="name" select="1"/>
                        <field name="month" select="1"/>
                        <field name="user_id" select="1"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_timesheet_user_stat_all" model="ir.actions.act_window">
            <field name="name">Timesheet by User</field>
            <field name="res_model">report_timesheet.user</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="search_view_id" ref="view_timesheet_user_search"/>
        </record>
        <!-- <menuitem action="action_timesheet_user_stat_all" id="menu_report_timesheet_user_all" parent="hr.menu_hr_reporting"/> -->

        <!-- Statistics report on timesheets to invoice -->

        <record id="view_timesheet_invoice_graph" model="ir.ui.view">
            <field name="name">report_timesheet.invoice.graph</field>
            <field name="model">report_timesheet.invoice</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph string="Timesheet by invoice">
                    <field name="account_id"/>
                    <field name="amount_invoice" operator="+"/>
                </graph>
            </field>
        </record>

        <record id="view_timesheet_invoice_form" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.invoice.form</field>
            <field name="model">report_timesheet.invoice</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Timesheet by invoice">
                    <field name="account_id" select="1"/>
                    <field name="manager_id" select="1"/>
                    <field name="user_id" select="1"/>
                </form>
            </field>
        </record>

        <record id="view_timesheet_invoice_search" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.invoice.search</field>
            <field name="model">report_timesheet.invoice</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Timesheet by invoice">
                    <filter icon="terp-hr" string="My Timesheets" domain="[('user_id','=',uid)]" help="My Timesheets to invoice"/>
                    <separator orientation="vertical"/>
                    <field name="account_id" select="1"/>
                    <field name="manager_id" select="1"/>
                    <field name="user_id" select="1"/>
                </search>
            </field>
        </record>

        <record id="view_timesheet_invoice_tree" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.invoice.tree</field>
            <field name="model">report_timesheet.invoice</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Timesheets to invoice">
                    <field name="user_id"/>
                    <field name="account_id"/>
                    <field name="manager_id"/>
                    <field name="quantity"/>
                    <field name="amount_invoice"/>
                </tree>
            </field>
        </record>

        <record id="action_timesheet_invoice_stat_all" model="ir.actions.act_window">
            <field name="name">Timesheet by Invoice</field>
            <field name="res_model">report_timesheet.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="search_view_id" ref="view_timesheet_invoice_search"/>
        </record>
       <!--  <menuitem action="action_timesheet_invoice_stat_all" id="menu_report_timesheet_invoice_all" parent="hr.menu_hr_reporting"/> -->

        <!-- Statistics report on daily timesheets per account -->

        <record id="view_timesheet_account_date_tree" model="ir.ui.view">
            <field name="name">report_timesheet.account.date.tree</field>
            <field name="model">report_timesheet.account.date</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Daily timesheet per account">
                    <field name="name"/>
                    <field name="month" select="1"/>
                    <field name="account_id"/>
                    <field name="user_id"/>
                    <field name="quantity"/>
                </tree>
            </field>
        </record>
        <record id="view_timesheet_account_date_graph" model="ir.ui.view">
            <field name="name">report_timesheet.account.date.graph</field>
            <field name="model">report_timesheet.account.date</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph orientation="horizontal" string="Daily timesheet per account">
                    <field name="account_id"/>
                    <field name="quantity" operator="+"/>
                    <field group="True" name="user_id"/>
                </graph>
            </field>
        </record>

        <record id="view_timesheet_account_date_form" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.account.date.form</field>
            <field name="model">report_timesheet.account.date</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Daily timesheet by account">
                    <field name="name" select="1"/>
                    <field name="month" select="1"/>
                    <field name="account_id" select="1"/>
                    <field name="user_id" select="1"/>
                    <field name="quantity"/>
                </form>
            </field>
        </record>

        <record id="view_timesheet_account_date_search" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.account.date.search</field>
            <field name="model">report_timesheet.account.date</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Daily timesheet by account">
                    <group col="10" colspan="4">
                        <filter icon="terp-hr" string="My Daily Timesheets" domain="[('user_id','=',uid)]" help="My Daily Timesheets by account"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-hr" string="This Year" domain="[('name','=',time.strftime('%%Y'))]" help="Daily Timesheets for this year"/>
                        <filter icon="terp-hr" string="This Month" domain="[('month','=',time.strftime('%%m'))]" help="Daily Timesheets of this month"/>
                        <separator orientation="vertical"/>
                        <field name="name" select="1"/>
                        <field name="month" select="1"/>
                        <field name="account_id" select="1"/>
                        <field name="user_id" select="1"/>
                    </group>
                </search>
            </field>
        </record>

        <record id="action_timesheet_account_date_stat_all" model="ir.actions.act_window">
            <field name="name">Daily Timesheet by Account</field>
            <field name="res_model">report_timesheet.account.date</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="search_view_id" ref="view_timesheet_account_date_search"/>
        </record>
        <!--  <menuitem action="action_timesheet_account_date_stat_all" id="menu_report_timesheet_account_date_all" parent="hr.menu_hr_reporting"/>-->

        <!-- Statistics report on timesheets per account -->

        <record id="view_timesheet_account_tree" model="ir.ui.view">
            <field name="name">report_timesheet.account.tree</field>
            <field name="model">report_timesheet.account</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Timesheet per account">
                    <field name="name"/>
                    <field name="month" />
                    <field name="account_id"/>
                    <field name="user_id"/>
                    <field name="quantity"/>
                </tree>
            </field>
        </record>
        <record id="view_timesheet_account_graph" model="ir.ui.view">
            <field name="name">report_timesheet.account.graph</field>
            <field name="model">report_timesheet.account</field>
            <field name="type">graph</field>
            <field name="arch" type="xml">
                <graph string="Timesheet per account">
                    <field name="account_id"/>
                    <field name="quantity" operator="+"/>
                    <field group="True" name="user_id"/>
                </graph>
            </field>
        </record>

        <record id="view_timesheet_account_form" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.account.form</field>
            <field name="model">report_timesheet.account</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Timesheet by account">
                    <field name="name" select="1"/>
                    <field name="month" select="1"/>
                    <field name="account_id" select="1"/>
                    <field name="user_id" select="1"/>
                    <field name="quantity"/>
                </form>
            </field>
        </record>

        <record id="view_timesheet_account_search" model="ir.ui.view">
            <field name="name">report_timesheet.timesheet.account.search</field>
            <field name="model">report_timesheet.account</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <form string="Timesheet by account">
                    <group col="10" colspan="4">
                        <filter icon="terp-hr" string="My Timesheets" domain="[('user_id','=',uid)]" help="My Timesheets by account"/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-hr" string="This Year" domain="[('name','=',time.strftime('%%Y'))]"/>
                        <filter icon="terp-hr" string="This Month" domain="[('month','=',time.strftime('%%m'))]"/>
                        <separator orientation="vertical"/>
                        <field name="name" select="1"/>
                        <field name="month" select="1"/>
                        <field name="account_id" select="1"/>
                        <field name="user_id" select="1"/>
                    </group>
                </form>
            </field>
        </record>


        <record id="action_timesheet_account_stat_all" model="ir.actions.act_window">
            <field name="name">Timesheet by Account</field>
            <field name="res_model">report_timesheet.account</field>
            <field name="view_type">form</field>
            <field name="view_mode">graph,tree</field>
            <field name="search_view_id" ref="view_timesheet_account_search"/>
        </record>
        <!-- <menuitem action="action_timesheet_account_stat_all" id="menu_report_timesheet_account_all" parent="hr.menu_hr_reporting"/> -->

        <act_window domain="[('user_id', '=', active_id)]" id="act_res_users_2_report_timesheet_user" name="Timesheets per day" res_model="report_timesheet.user" src_model="res.users"/>

        <act_window domain="[('user_id', '=', active_id)]" id="act_res_users_2_report_timehsheet_account" name="Timesheets per account" res_model="report_timesheet.account" src_model="res.users"/>

        <act_window domain="[('account_id', '=', active_id)]" id="act_account_analytic_account_2_report_timehsheet_account" name="Timesheets" res_model="report_timesheet.account" src_model="account.analytic.account"/>

        <act_window domain="[('manager_id', '=', active_id)]" id="act_res_users_2_report_timesheet_invoice" name="Costs to invoice" res_model="report_timesheet.invoice" src_model="res.users"/>


        <!-- Random Timesheet  -->

        <record model="ir.ui.view" id="view_random_timesheet_tree">
            <field name="name">report.random.timesheet.tree</field>
            <field name="model">report.random.timesheet</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Random Timesheets">
                    <field name="analytic_account_id" select="1"/>
                    <field name="name" select="1"/>
                    <field name="quantity" select="2" />
                    <field name="date" select="1"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_random_timesheet_board">
            <field name="name">Random Timesheet</field>
            <field name="res_model">report.random.timesheet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="view_random_timesheet_tree"/>
        </record>

        <!-- Random Timesheet Lines of random activities -->

		<record id="view_random_timesheet_lines_search" model="ir.ui.view">
            <field name="name">random.timesheet.lines.search</field>
            <field name="model">random.timesheet.lines</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Timesheet Lines">
                   <group col='15' colspan='4'>
                    	<field name="date"/>
                    	<field name="user_id" widget="selection"/>
                    	<field name="product_id" widget="selection"/>
                    	<field name="analytic_account_id" widget="selection"/>
                    	<field name="general_account_id" widget="selection"/>
                   </group>
                   <newline/>
                   <group expand="1" string="Group By..." colspan="4" col="20">
                        <filter string="User" icon="terp-project" domain="[]" context="{'group_by':'user_id'}"/>
                        <filter string="Product" icon="terp-project" domain="[]" context="{'group_by':'product_id'}"/>
                        <filter string="Analytic Account" icon="terp-project" domain="[]" context="{'group_by':'analytic_account_id'}"/>
                   		<filter string="General Account" icon="terp-project" domain="[]" context="{'group_by':'general_account_id'}"/>
                   </group>
               </search>
            </field>
        </record>

        <record model="ir.ui.view" id="view_random_timesheet_lines_tree">
            <field name="name">random.timesheet.lines.tree</field>
            <field name="model">random.timesheet.lines</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Random Timesheets Lines">
                    <field name="date" select="1"/>
                    <field name="user_id"/>
                    <field name="name" select="1"/>
                    <field name="quantity" />
                    <field name="product_id" select="1"/>
                    <field name="analytic_account_id" select="1"/>
                    <field name="uom_id" />
                    <field name="amount" />
                    <field name="to_invoice" select="1"/>
                    <field name="general_account_id" />
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_random_timesheet_lines_board">
            <field name="type">ir.actions.act_window</field>
            <field name="name">Timesheet Lines</field>
            <field name="res_model">random.timesheet.lines</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{'search_default_user_id':uid }</field>
            <field name="view_id" ref="view_random_timesheet_lines_tree"/>
        </record>
         <!--Time Tracking menu in project Management-->
         <menuitem icon="terp-project" id="base.menu_main_pm" name="Project Management" sequence="1"/>
         <menuitem
             id="base.menu_project_management_time_tracking"
             name="Time Tracking"
             parent="base.menu_main_pm" sequence="3"/>
        <menuitem action="action_random_timesheet_lines_board" id="menu_project_management_timesheet_lines_board" parent="base.menu_project_management_time_tracking" sequence="7"/>
      <!--<menuitem action="action_random_timesheet_lines_board" id="menu_hr_action_random_timesheet_lines_board"
            parent="hr_attendance.menu_hr_time_tracking" groups="hr.group_hr_manager"/>-->
       <menuitem action="action_random_timesheet_lines_board" id="menu_hr_action_random_timesheet_lines_board" name="Timesheets Lines"
            parent="hr_attendance.menu_hr_time_tracking" groups="hr.group_hr_manager"/>
    </data>
</openerp>
