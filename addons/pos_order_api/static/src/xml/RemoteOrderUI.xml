<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">
    <t t-name="pos_order_api.TicketScreen" t-inherit="point_of_sale.TicketScreen" t-inherit-mode="extension">
        <!-- Add Source Badge after the Order Reference row (td element containing pos_reference) -->
        <!-- Target the second td in each order row, which contains the order name and reference -->
        <xpath expr="//tr[hasclass('order-row')]/td[2]" position="inside">
            <div t-if="order.is_api_order" class="mt-1">
                <span class="badge rounded-pill" t-attf-class="{{ order.api_source === 'uber' ? 'text-bg-success' : 'text-bg-primary' }}">
                    <i t-if="order.api_source === 'uber'" class="fa fa-motorcycle me-1"/>
                    <i t-else="" class="fa fa-globe me-1"/>
                    <t t-esc="order.api_source === 'uber' ? 'Uber Eats' : (order.api_source === 'native_web' ? 'Website' : 'Remote')"/>
                </span>
            </div>
        </xpath>

        <!-- Add Customer Notes in the partner/preset column (third td) -->
        <xpath expr="//tr[hasclass('order-row')]/td[3]" position="inside">
            <div t-if="order.api_order_notes" class="small text-warning mt-1" style="max-width: 200px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                <i class="fa fa-sticky-note-o me-1"/>
                <t t-esc="order.api_order_notes"/>
            </div>
        </xpath>
    </t>
</templates>
