<odoo>
    <!-- Vista de formulario para evaluación del clima -->
    <record id="evaluacion_clima_view_form" model="ir.ui.view">
        <field name="name">evaluacion_clima.form</field>
        <field name="model">evaluacion</field>
        <field name="arch" type="xml">
            <form string="Clima" create="false" duplicate="0">
                <header>
                    <button class="btn btn-primary" name="action_asignar_usuarios_externos" string="Asignar usuarios externos" type="object" groups="evaluaciones.evaluaciones_cliente_cr_group_user"/>
                    <button class=" btn btn-primary" name="action_importar_preguntas_clima" string="Agregar catálogo de preguntas" type="object" />
                    <field name="estado" widget="statusbar" statusbar_visible="borrador, publicado, finalizado" />
                </header>
                <sheet>
                    <h1>Crear evaluación Clima Laboral</h1>
                    <br></br>
                    <group>
                        <field name="nombre"/>
                    </group>
                    <group>
                        <field name="estado" invisible="1"/>
                    </group>
                    <group>
                        <field name="descripcion" placeholder="Descripción de la evaluación"/>
                    </group>
                    <group>
                        <field name="fecha_inicio">
                            <widget name="date"/>
                        </field>
                        <field name="fecha_final">
                            <widget name="date"/>
                        </field>
                        <field name="incluir_demograficos" placeholder="Incluir datos demográficos"/>
                    </group>
                    <group>
                        <!-- Campo para seleccionar el formato de las preguntas escalares -->
                        <field name="escalar_format"/>
                    </group>
                    <notebook>
                        <page string="Preguntas">
                            <field class="lh-lg w-100" name="pregunta_ids" domain="[('tipo', '=', False)]">
                                <tree create="true" delete="true">
                                    <field name="categoria" string="Categoría"/>
                                    <field name="pregunta_texto"/>
                                    <field name="tipo"/>
                                </tree>
                                <form string="Agregar pregunta">
                                    <group>
                                        <field name="pregunta_texto" placeholder="Ingrese la pregunta"/>
                                        <field name="tipo"/>
                                        <field name="categoria" placeholder="Seleccione o agregue una categoría" required="True"/>
                                        <field name="ponderacion" invisible="tipo != 'escala'" required="True"/>
                                        <field name="opcion_ids" placeholder="Opciones" context="{'default_pregunta_id': active_id}" invisible="tipo != 'multiple_choice'" required="True">
                                            <tree create="true" delete="true" editable="bottom">
                                                <field name="opcion_texto"/>
                                            </tree>
                                        </field>
                                    </group>
                                </form>
                            </field>
                        </page>
                        <page string="Asignados">
                            <field class="lh-lg w-100" colspan="2" name="usuario_ids" nolabel="1" context="{'actual_evaluacion_id': active_id}">
                                <tree editable="bottom" create="false">
                                    <field class="lh-m" name="name" readonly="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Asignados Externos">
                            <field class="lh-lg w-100" colspan="2" name="usuario_externo_ids" nolabel="1" context="{'actual_evaluacion_id': active_id}">
                                <tree create="false" editable="bottom">
                                    <field class="lh-m" name="nombre" readonly="1"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Semaforización">
                            <field name="niveles">
                                <tree editable="bottom">
                                    <field name="techo" />
                                    <field name="color" widget="color" />
                                    <field name="descripcion_nivel" />
                                </tree>
                            </field>
                        </page>
                        <page string="Notificaciones">
                            <group>
                                <field name="mensaje_bienvenida" placeholder="Escribe aquí tu mensaje de bienvenida"/>
                                <field name="mensaje_agradecimiento" placeholder="Escribe aquí tu mensaje de bienvenida"/>
                                <field name="contenido_correo" placeholder="Escribe el contenido del correo"/>
                            </group>
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>
</odoo>
