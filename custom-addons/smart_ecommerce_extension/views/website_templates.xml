<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ============================================================ -->
    <!-- HOMEPAGE - RESPONSIVE CATEGORY FILTERS -->
    <!-- ============================================================ -->
    
    <!-- Homepage Categories Section -->
    <template id="homepage_categories" inherit_id="website.homepage" name="Homepage Categories">
        <xpath expr="//div[@id='wrap']" position="inside">
            <t t-set="categories" t-value="request.env['product.public.category'].sudo().search([('parent_id', '=', False)])"/>
            
            <!-- Hero Section with Categories -->
            <section class="smart-homepage-categories py-5" style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);">
                <div class="container">
                    <!-- Section Header -->
                    <div class="text-center mb-4">
                        <h2 class="fw-bold" style="color:rgb(75, 113, 95);">
                            <i class="fa fa-th-large me-2"/>Shop by Category
                        </h2>
                        <p class="text-muted">Browse our wide selection of products</p>
                    </div>
                    
                    <!-- Categories Grid -->
                    <div class="row g-3 justify-content-center">
                        <!-- All Products Card -->
                        <div class="col-6 col-md-4 col-lg-2">
                            <a href="/shop" class="card smart-category-card h-100 text-decoration-none border-0 shadow-sm">
                                <div class="card-body text-center py-4">
                                    <i class="fa fa-shopping-bag fa-3x mb-3" style="color: #714B67;"/>
                                    <h6 class="card-title mb-0">All Products</h6>
                                </div>
                            </a>
                        </div>
                        <!-- Category Cards -->
                        <t t-foreach="categories[:5]" t-as="cat">
                            <div class="col-6 col-md-4 col-lg-2">
                                <a t-att-href="'/shop/category/%s' % slug(cat)" class="card smart-category-card h-100 text-decoration-none border-0 shadow-sm">
                                    <div class="card-body text-center py-4">
                                        <t t-if="cat.image_128">
                                            <img t-att-src="image_data_uri(cat.image_128)" 
                                                 class="rounded-circle mb-3" 
                                                 style="width: 64px; height: 64px; object-fit: cover;"/>
                                        </t>
                                        <t t-else="">
                                            <i class="fa fa-folder-open fa-3x mb-3" style="color: #714B67;"/>
                                        </t>
                                        <h6 class="card-title mb-1"><t t-esc="cat.name"/></h6>
                                        <span class="badge bg-secondary"><t t-esc="len(cat.product_tmpl_ids)"/> items</span>
                                    </div>
                                </a>
                            </div>
                        </t>
                    </div>
                    
                    <!-- View All Categories Link -->
                    <div t-if="len(categories) > 5" class="text-center mt-4">
                        <a href="/shop" class="btn btn-outline-primary">
                            View All Categories <i class="fa fa-arrow-right ms-2"/>
                        </a>
                    </div>
                </div>
            </section>
            
            <!-- Quick Links -->
            <section class="smart-quick-links py-4">
                <div class="container">
                    <div class="row g-3">
                        <div class="col-md-4">
                            <a href="/shop?availability=in_stock" class="card bg-success text-white text-decoration-none h-100">
                                <div class="card-body d-flex align-items-center">
                                    <i class="fa fa-check-circle fa-2x me-3"/>
                                    <div>
                                        <h6 class="mb-0">In Stock</h6>
                                        <small>Available now</small>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-md-4">
                            <a href="/shop?order=create_date+desc" class="card bg-info text-white text-decoration-none h-100">
                                <div class="card-body d-flex align-items-center">
                                    <i class="fa fa-star fa-2x me-3"/>
                                    <div>
                                        <h6 class="mb-0">New Arrivals</h6>
                                        <small>Latest products</small>
                                    </div>
                                </div>
                            </a>
                        </div>
                        <div class="col-md-4">
                            <a href="/shop" class="card text-decoration-none h-100" style="background: linear-gradient(135deg, #714B67 0%, #9B6A8F 100%); color: white;">
                                <div class="card-body d-flex align-items-center">
                                    <i class="fa fa-percent fa-2x me-3"/>
                                    <div>
                                        <h6 class="mb-0">Special Offers</h6>
                                        <small>Best deals</small>
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </section>
            
            <!-- Featured Products Section -->
            <section class="smart-featured-products py-5" style="background-color: #ffffff;">
                <div class="container">
                    <div class="text-center mb-5">
                        <h2 class="fw-bold" style="color:rgb(75, 113, 95);">
                            <i class="fa fa-star me-2"/>Featured Products
                        </h2>
                        <p class="text-muted">Discover our best-selling and newest products</p>
                    </div>
                    
                    <t t-set="products" t-value="request.env['product.template'].sudo().search([
                        ('is_published', '=', True),
                        ('sale_ok', '=', True),
                        ('website_published', '=', True)
                    ], limit=12, order='create_date desc')"/>
                    
                    <t t-if="products">
                        <div class="row g-4">
                            <t t-foreach="products" t-as="product">
                                <div class="col-6 col-md-4 col-lg-3">
                                    <div class="card h-100 border-0 shadow-sm product-card" style="transition: transform 0.2s; cursor: pointer;" onmouseover="this.style.transform='translateY(-5px)'" onmouseout="this.style.transform='translateY(0)'">
                                        <a t-att-href="product.website_url" class="text-decoration-none">
                                            <div class="position-relative overflow-hidden" style="height: 200px; background-color: #f8f9fa;">
                                                <t t-if="product.image_1920">
                                                    <img t-att-src="'/web/image/product.template/%s/image_1920' % product.id" 
                                                         t-att-alt="product.name"
                                                         class="w-100 h-100" 
                                                         style="object-fit: cover;"/>
                                                </t>
                                                <t t-else="">
                                                    <div class="d-flex align-items-center justify-content-center h-100">
                                                        <i class="fa fa-image fa-3x text-muted"/>
                                                    </div>
                                                </t>
                                                <t t-if="product.availability_status == 'in_stock'">
                                                    <span class="badge bg-success position-absolute top-0 end-0 m-2">
                                                        <i class="fa fa-check-circle me-1"/>In Stock
                                                    </span>
                                                </t>
                                                <t t-elif="product.availability_status == 'low_stock'">
                                                    <span class="badge bg-warning position-absolute top-0 end-0 m-2">
                                                        <i class="fa fa-exclamation-triangle me-1"/>Low Stock
                                                    </span>
                                                </t>
                                                <t t-elif="product.availability_status == 'out_of_stock'">
                                                    <span class="badge bg-danger position-absolute top-0 end-0 m-2">
                                                        <i class="fa fa-times-circle me-1"/>Out of Stock
                                                    </span>
                                                </t>
                                            </div>
                                            <div class="card-body">
                                                <h6 class="card-title text-dark mb-2" style="min-height: 40px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                                                    <t t-esc="product.name"/>
                                                </h6>
                                                <div class="d-flex justify-content-between align-items-center mb-2">
                                                    <span class="h6 mb-0 text-primary fw-bold">
                                                        <t t-esc="product.list_price" t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                                                    </span>
                                                    <t t-if="product.brand">
                                                        <span class="badge bg-secondary">
                                                            <t t-esc="product.brand"/>
                                                        </span>
                                                    </t>
                                                </div>
                                            </div>
                                        </a>
                                        <div class="card-footer bg-white border-0 pt-0">
                                            <form action="/shop/cart/update" method="post" class="d-grid">
                                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                                <input type="hidden" name="product_id" t-att-value="product.id"/>
                                                <input type="hidden" name="add_qty" value="1"/>
                                                <button type="submit" 
                                                        class="btn btn-primary w-100 btn-sm">
                                                    <i class="fa fa-shopping-cart me-2"/>Add to Cart
                                                </button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                        
                        <div class="text-center mt-5">
                            <a href="/shop" class="btn btn-outline-primary btn-lg">
                                View All Products <i class="fa fa-arrow-right ms-2"/>
                            </a>
                        </div>
                    </t>
                    <t t-else="">
                        <div class="text-center py-5">
                            <i class="fa fa-box-open fa-4x text-muted mb-3"/>
                            <p class="text-muted">No products available at the moment.</p>
                        </div>
                    </t>
                </div>
            </section>
        </xpath>
    </template>
    
    <!-- ============================================================ -->
    <!-- SHOP PAGE - SMART FILTERS (Adds to existing aside if present, otherwise creates one) -->
    <!-- ============================================================ -->
    
    <!-- Mobile Filter Button (above the main row) -->
    <template id="shop_mobile_filter_button" inherit_id="website_sale.products" name="SMART Mobile Filter Button">
        <xpath expr="//div[hasclass('o_wsale_products_main_row')]" position="before">
            <!-- Mobile Filter Toggle Button -->
            <div class="d-lg-none mb-3 px-3">
                <button class="btn btn-outline-primary w-100" type="button" 
                        data-bs-toggle="offcanvas" data-bs-target="#smartMobileFilters" 
                        aria-controls="smartMobileFilters">
                    <i class="fa fa-filter me-2"/>Filters &amp; Categories
                </button>
            </div>
            
            <!-- Mobile Offcanvas Filters -->
            <div class="offcanvas offcanvas-start" tabindex="-1" id="smartMobileFilters" aria-labelledby="smartMobileFiltersLabel">
                <div class="offcanvas-header" style="background: linear-gradient(135deg, #714B67 0%, #9B6A8F 100%);">
                    <h5 class="offcanvas-title text-white" id="smartMobileFiltersLabel">
                        <i class="fa fa-filter me-2"/>Filters
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"/>
                </div>
                <div class="offcanvas-body">
                    <!-- Categories -->
                    <div class="mb-4">
                        <h6 class="fw-bold border-bottom pb-2" style="color: #714B67;">
                            <i class="fa fa-th-list me-2"/>Categories
                        </h6>
                        <div class="d-flex flex-wrap gap-2">
                            <a href="/shop" t-attf-class="btn btn-sm #{'btn-primary' if not category else 'btn-outline-secondary'}">
                                <i class="fa fa-home me-1"/>All
                            </a>
                            <t t-foreach="categories" t-as="c">
                                <a t-att-href="keep('/shop/category/%s' % slug(c), category=0)" 
                                   t-attf-class="btn btn-sm #{'btn-primary' if category and category.id == c.id else 'btn-outline-secondary'}">
                                    <t t-esc="c.name"/>
                                </a>
                            </t>
                        </div>
                    </div>
                    
                    <!-- Availability -->
                    <div class="mb-4">
                        <h6 class="fw-bold border-bottom pb-2" style="color: #714B67;">
                            <i class="fa fa-check-circle me-2"/>Availability
                        </h6>
                        <div class="d-flex flex-wrap gap-2">
                            <a t-att-href="keep(availability='')" 
                               t-attf-class="btn btn-sm #{'btn-secondary' if not selected_availability else 'btn-outline-secondary'}">All</a>
                            <a t-att-href="keep(availability='in_stock')" 
                               t-attf-class="btn btn-sm #{'btn-success' if selected_availability == 'in_stock' else 'btn-outline-success'}">
                                <i class="fa fa-check me-1"/>In Stock
                            </a>
                            <a t-att-href="keep(availability='low_stock')" 
                               t-attf-class="btn btn-sm #{'btn-warning' if selected_availability == 'low_stock' else 'btn-outline-warning'}">
                                <i class="fa fa-exclamation-triangle me-1"/>Low Stock
                            </a>
                            <a t-att-href="keep(availability='out_of_stock')" 
                               t-attf-class="btn btn-sm #{'btn-danger' if selected_availability == 'out_of_stock' else 'btn-outline-danger'}">
                                <i class="fa fa-times me-1"/>Out of Stock
                            </a>
                        </div>
                    </div>
                    
                    <!-- Brand Filter -->
                    <t t-if="brands">
                        <div class="mb-4">
                            <h6 class="fw-bold border-bottom pb-2" style="color: #714B67;">
                                <i class="fa fa-tag me-2"/>Brand
                            </h6>
                            <div class="d-flex flex-wrap gap-2">
                                <a t-att-href="keep(brand='')" 
                                   t-attf-class="btn btn-sm #{'btn-secondary' if not selected_brand else 'btn-outline-secondary'}">All</a>
                                <t t-foreach="brands" t-as="b">
                                    <a t-att-href="keep(brand=b)" 
                                       t-attf-class="btn btn-sm #{'btn-primary' if selected_brand == b else 'btn-outline-primary'}">
                                        <t t-esc="b"/>
                                    </a>
                                </t>
                            </div>
                        </div>
                    </t>
                    
                    <!-- Price Range -->
                    <div class="mb-4">
                        <h6 class="fw-bold border-bottom pb-2" style="color: #714B67;">
                            <i class="fa fa-money me-2"/>Price Range
                        </h6>
                        <form method="get" class="row g-2">
                            <div class="col-5">
                                <input type="number" class="form-control form-control-sm" name="price_min" placeholder="Min" t-att-value="selected_price_min"/>
                            </div>
                            <div class="col-2 text-center align-self-center">-</div>
                            <div class="col-5">
                                <input type="number" class="form-control form-control-sm" name="price_max" placeholder="Max" t-att-value="selected_price_max"/>
                            </div>
                            <div class="col-12 mt-2">
                                <button type="submit" class="btn btn-primary btn-sm w-100">
                                    <i class="fa fa-search me-1"/>Apply
                                </button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Clear Filters -->
                    <div t-if="category or selected_brand or selected_availability" class="mt-4">
                        <a href="/shop" class="btn btn-outline-danger w-100">
                            <i class="fa fa-times me-1"/>Clear All Filters
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Active Filters Display -->
            <div t-if="category or selected_brand or selected_availability or selected_price_min or selected_price_max" 
                 class="px-3 mb-3">
                <div class="d-flex flex-wrap gap-2 align-items-center p-2 bg-light rounded">
                    <span class="text-muted small fw-bold">Active:</span>
                    <t t-if="category">
                        <a href="/shop" class="badge bg-primary text-decoration-none">
                            <t t-esc="category.name"/> <i class="fa fa-times ms-1"/>
                        </a>
                    </t>
                    <t t-if="selected_brand">
                        <a t-att-href="keep(brand='')" class="badge bg-info text-decoration-none">
                            <t t-esc="selected_brand"/> <i class="fa fa-times ms-1"/>
                        </a>
                    </t>
                    <t t-if="selected_availability">
                        <a t-att-href="keep(availability='')" class="badge bg-success text-decoration-none">
                            <t t-esc="selected_availability.replace('_', ' ').title()"/> <i class="fa fa-times ms-1"/>
                        </a>
                    </t>
                    <a href="/shop" class="badge bg-danger text-decoration-none ms-auto">
                        <i class="fa fa-refresh me-1"/>Reset
                    </a>
                </div>
            </div>
        </xpath>
    </template>
    
    <!-- Desktop Filter Sidebar (in the existing aside element) -->
    <template id="shop_desktop_filters" inherit_id="website_sale.products" name="SMART Desktop Filters">
        <xpath expr="//aside[@id='products_grid_before']//div[hasclass('o_wsale_products_grid_before_rail')]" position="inside">
            <!-- SMART Additional Filters -->
            <div class="smart-extra-filters mt-4 pt-3 border-top">
                <!-- Availability Filter -->
                <div class="mb-4">
                    <h6 class="fw-bold small mb-3" style="color: #714B67;">
                        <i class="fa fa-check-circle me-2"/>Availability
                    </h6>
                    <div class="d-flex flex-column gap-1">
                        <a t-att-href="keep(availability='')" 
                           t-attf-class="small text-decoration-none #{'fw-bold text-primary' if not selected_availability else 'text-dark'}">
                            <i class="fa fa-circle-o me-1"/> All
                        </a>
                        <a t-att-href="keep(availability='in_stock')" 
                           t-attf-class="small text-decoration-none #{'fw-bold text-success' if selected_availability == 'in_stock' else 'text-success'}">
                            <i class="fa fa-check me-1"/> In Stock
                        </a>
                        <a t-att-href="keep(availability='low_stock')" 
                           t-attf-class="small text-decoration-none #{'fw-bold text-warning' if selected_availability == 'low_stock' else 'text-warning'}">
                            <i class="fa fa-exclamation-triangle me-1"/> Low Stock
                        </a>
                        <a t-att-href="keep(availability='out_of_stock')" 
                           t-attf-class="small text-decoration-none #{'fw-bold text-danger' if selected_availability == 'out_of_stock' else 'text-danger'}">
                            <i class="fa fa-times me-1"/> Out of Stock
                        </a>
                    </div>
                </div>
                
                <!-- Brand Filter -->
                <t t-if="brands">
                    <div class="mb-4">
                        <h6 class="fw-bold small mb-3" style="color: #714B67;">
                            <i class="fa fa-tag me-2"/>Brand
                        </h6>
                        <div class="d-flex flex-wrap gap-1">
                            <a t-att-href="keep(brand='')" 
                               t-attf-class="badge text-decoration-none #{'bg-secondary' if not selected_brand else 'bg-light text-dark border'}">
                                All
                            </a>
                            <t t-foreach="brands" t-as="b">
                                <a t-att-href="keep(brand=b)" 
                                   t-attf-class="badge text-decoration-none #{'bg-primary' if selected_brand == b else 'bg-light text-dark border'}">
                                    <t t-esc="b"/>
                                </a>
                            </t>
                        </div>
                    </div>
                </t>
            </div>
        </xpath>
    </template>
    
    <!-- ============================================================ -->
    <!-- CHECKOUT - DELIVERY ZONE SELECTION -->
    <!-- ============================================================ -->
    
    <template id="checkout_delivery_zone" inherit_id="website_sale.checkout" name="Checkout Delivery Zone">
        <xpath expr="//div[@id='shop_checkout']" position="inside">
            <t t-set="delivery_zones" t-value="request.env['delivery.zone'].sudo().search([('active', '=', True)])"/>
            <t t-set="error" t-value="request.params.get('error')"/>
            
            <!-- Error message for missing delivery zone -->
            <t t-if="error == 'delivery_zone_required' and website_sale_order and website_sale_order._has_deliverable_products()">
                <div class="alert alert-warning alert-dismissible fade show mt-3" role="alert">
                    <i class="fa fa-exclamation-triangle me-2"/>Please select a delivery zone before proceeding to payment.
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            </t>
            
            <!-- Use div.smart-zone-panel instead of div.card to avoid triggering address change handlers -->
            <div t-if="delivery_zones" class="smart-delivery-zone-section mt-4 mb-4">
                <div class="smart-zone-panel border-0 shadow-sm rounded overflow-hidden">
                    <div class="smart-zone-header text-white p-3" style="background: linear-gradient(135deg, #714B67 0%, #9B6A8F 100%);">
                        <h5 class="mb-0">
                            <i class="fa fa-truck me-2"/>Select Delivery Zone
                            <t t-if="website_sale_order and website_sale_order._has_deliverable_products() and not website_sale_order.delivery_zone_id">
                                <span class="badge bg-warning text-dark ms-2">Required</span>
                            </t>
                        </h5>
                    </div>
                    <div class="smart-zone-body p-3 bg-white">
                        <p class="text-muted mb-3">
                            <t t-if="website_sale_order and website_sale_order.partner_shipping_id and website_sale_order.partner_shipping_id.city">
                                <i class="fa fa-map-marker me-1 text-primary"/>Shipping to: <strong t-esc="website_sale_order.partner_shipping_id.city"/>
                            </t>
                            <t t-else="">
                                Choose your delivery zone to see accurate delivery costs and estimated delivery times.
                            </t>
                        </p>
                        
                        <div class="delivery-zone-options">
                            <t t-foreach="delivery_zones" t-as="zone">
                                <div class="form-check delivery-zone-option mb-3 p-3 border rounded"
                                     t-att-data-zone-id="zone.id"
                                     t-att-data-zone-price="zone.base_price"
                                     t-att-data-zone-days="zone.estimated_days"
                                     t-att-data-zone-name="zone.name">
                                    <input class="form-check-input delivery-zone-radio" type="radio" 
                                           name="delivery_zone_id" t-att-id="'zone_%s' % zone.id"
                                           t-att-value="zone.id"
                                           t-att-checked="order.delivery_zone_id.id == zone.id if order else False"/>
                                    <label class="form-check-label w-100" t-att-for="'zone_%s' % zone.id" style="cursor: pointer;">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div>
                                                <strong><t t-esc="zone.name"/></strong>
                                                <div class="text-muted small">
                                                    <i class="fa fa-clock-o me-1"/>Est: <t t-esc="zone.estimated_days"/> day<t t-if="zone.estimated_days != 1">s</t>
                                                </div>
                                                <t t-if="zone.free_delivery_threshold > 0">
                                                    <div class="text-success small">
                                                        <i class="fa fa-gift me-1"/>Free delivery over <t t-esc="zone.free_delivery_threshold" t-options="{'widget': 'monetary', 'display_currency': zone.currency_id}"/>
                                                    </div>
                                                </t>
                                            </div>
                                            <span class="badge fs-6" style="background: linear-gradient(135deg, #28a745 0%, #218838 100%);">
                                                <t t-esc="zone.base_price" t-options="{'widget': 'monetary', 'display_currency': zone.currency_id}"/>
                                            </span>
                                        </div>
                                    </label>
                                </div>
                            </t>
                        </div>
                        
                        <!-- Selected zone info display -->
                        <div id="delivery_zone_info" class="mt-3 p-3 bg-light rounded" t-att-class="'d-none' if not (website_sale_order and website_sale_order.delivery_zone_id) else ''">
                            <div class="d-flex justify-content-between align-items-center flex-wrap">
                                <div class="mb-2 mb-md-0">
                                    <strong><i class="fa fa-check-circle me-1 text-success"/>Selected Zone: </strong>
                                    <span id="selected_zone_name" t-esc="website_sale_order.delivery_zone_id.name if website_sale_order and website_sale_order.delivery_zone_id else ''"/>
                                </div>
                                <div class="d-flex gap-2 flex-wrap">
                                    <span class="badge bg-info">
                                        <i class="fa fa-clock-o me-1"/>Est. <span id="selected_zone_days">
                                            <t t-if="website_sale_order and website_sale_order.delivery_zone_id">
                                                <t t-esc="website_sale_order.delivery_zone_id.estimated_days"/> day<t t-if="website_sale_order.delivery_zone_id.estimated_days != 1">s</t>
                                            </t>
                                        </span>
                                    </span>
                                    <span class="badge bg-success" id="selected_zone_price">
                                        <t t-if="website_sale_order and website_sale_order.computed_delivery_price">
                                            <t t-esc="website_sale_order.computed_delivery_price" t-options="{'widget': 'monetary', 'display_currency': website_sale_order.currency_id}"/>
                                        </t>
                                        <t t-else="">
                                            -
                                        </t>
                                    </span>
                                </div>
                            </div>
                            <t t-if="website_sale_order and website_sale_order.estimated_delivery_date">
                                <div class="mt-2 small text-muted">
                                    <i class="fa fa-calendar me-1"/>Estimated delivery: 
                                    <strong t-esc="website_sale_order.estimated_delivery_date" t-options="{'widget': 'date'}"/>
                                </div>
                            </t>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>
    
    <!-- ============================================================ -->
    <!-- PRODUCT PAGE ENHANCEMENTS -->
    <!-- ============================================================ -->
    
    <template id="product_brand_model" inherit_id="website_sale.product" name="Product Brand &amp; Model">
        <xpath expr="//h1[@itemprop='name']" position="after">
            <div t-if="product.brand or product.product_model" class="product-brand-model mb-2">
                <span t-if="product.brand" class="badge text-bg-secondary me-1"><t t-esc="product.brand"/></span>
                <span t-if="product.product_model" class="text-muted">Model: <t t-esc="product.product_model"/></span>
            </div>
            <div class="mb-2">
                <span t-if="product.availability_status == 'in_stock'" class="badge text-bg-success">
                    <i class="fa fa-check me-1"/> In Stock
                </span>
                <span t-elif="product.availability_status == 'low_stock'" class="badge text-bg-warning">
                    <i class="fa fa-exclamation-triangle me-1"/> Low Stock
                </span>
                <span t-elif="product.availability_status == 'out_of_stock'" class="badge text-bg-danger">
                    <i class="fa fa-times me-1"/> Out of Stock
                </span>
            </div>
        </xpath>
    </template>
    
    <template id="product_specifications_video" inherit_id="website_sale.product" name="Specifications &amp; Video">
        <xpath expr="//div[@id='product_full_description']" position="after">
            <div t-if="product.specifications" class="mt-4">
                <h4 class="border-bottom pb-2"><i class="fa fa-list-ul me-2"/>Specifications</h4>
                <div class="smart-specifications" t-out="product.specifications"/>
            </div>
            <div t-if="product.video_url" class="mt-4 smart-product-video">
                <h4 class="border-bottom pb-2"><i class="fa fa-play-circle me-2"/>Product Video</h4>
                <div class="ratio ratio-16x9">
                    <iframe t-att-src="product.get_video_embed_url()" frameborder="0" allowfullscreen="allowfullscreen"/>
                </div>
            </div>
        </xpath>
    </template>
    
    <!-- ============================================================ -->
    <!-- ORDER CONFIRMATION PAGE -->
    <!-- ============================================================ -->
    
    <template id="order_confirmation_delivery" inherit_id="website_sale.confirmation" name="Order Confirmation Delivery Info">
        <xpath expr="//div[@id='oe_structure_website_sale_confirmation_1']" position="before">
            <div class="alert alert-success d-flex align-items-center mt-3">
                <i class="fa fa-check-circle fa-2x me-3 text-success"/>
                <div>
                    <strong>Your order has been confirmed!</strong>
                    <p class="mb-0 small">Order reference: <strong t-field="order.name"/></p>
                </div>
            </div>
            
            <div t-if="order.delivery_zone_id" class="card mt-3 border-info">
                <div class="card-body">
                    <h5 class="card-title"><i class="fa fa-truck me-2 text-info"/>Delivery Information</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Delivery Zone:</strong> <t t-esc="order.delivery_zone_id.name"/></p>
                            <p class="mb-1" t-if="order.estimated_delivery_date">
                                <strong>Estimated Delivery:</strong> 
                                <t t-esc="order.estimated_delivery_date" t-options="{'widget': 'date'}"/>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1" t-if="order.computed_delivery_price">
                                <strong>Delivery Cost:</strong> 
                                <t t-esc="order.computed_delivery_price" t-options="{'widget': 'monetary', 'display_currency': order.currency_id}"/>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>
    </template>
</odoo>
