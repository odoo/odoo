!function(e){"use strict";class t{constructor(){this.subscriptions={}}on(e,t,n){if(!n)throw new Error("Missing callback");this.subscriptions[e]||(this.subscriptions[e]=[]),this.subscriptions[e].push({owner:t,callback:n})}off(e,t){const n=this.subscriptions[e];n&&(this.subscriptions[e]=n.filter(e=>e.owner!==t))}trigger(e,...t){const n=this.subscriptions[e]||[];for(let e=0,o=n.length;e<o;e++){const o=n[e];o.callback.call(o.owner,...t)}}clear(){this.subscriptions={}}}class n{constructor(){this.rev=1,this.allowMutations=!0,this.weakMap=new WeakMap}notifyCB(){}observe(e,t){if(null===e||"object"!=typeof e||e instanceof Date)return e;return(this.weakMap.get(e)||this._observe(e,t)).proxy}revNumber(e){const t=this.weakMap.get(e);return t?t.rev:0}_observe(e,t){var n=this;const o=new Proxy(e,{get(t,o){const r=t[o];return n.observe(r,e)},set(e,t,o){if(o!==e[t]){if(!n.allowMutations)throw new Error(`Observed state cannot be changed here! (key: "${t}", val: "${o}")`);n._updateRevNumber(e),e[t]=o,n.notifyCB()}return!0},deleteProperty:(e,t)=>(t in e&&(delete e[t],n._updateRevNumber(e),n.notifyCB()),!0)}),r={value:e,proxy:o,rev:this.rev,parent:t};return this.weakMap.set(e,r),this.weakMap.set(r.proxy,r),r}_updateRevNumber(e){this.rev++;let t=this.weakMap.get(e),n=e;do{(t=this.weakMap.get(n)).rev++}while((n=t.parent)&&n!==e)}}function o(e,t){var n,o,r=t.elm,i=e.data.props,s=t.data.props;if((i||s)&&i!==s){for(n in i=i||{},s=s||{},i)s[n]||delete r[n];for(n in s)o=s[n],i[n]===o||"value"===n&&r[n]===o||(r[n]=o)}}const r={create:o,update:o};function i(e,t,n){if("function"==typeof e)e.call(t,n,t);else if("object"==typeof e)if("function"==typeof e[0])if(2===e.length)e[0].call(t,e[1],n,t);else{var o=e.slice(1);o.push(n),o.push(t),e[0].apply(t,o)}else for(let o=0,r=e.length;o<r;o++)i(e[o],t,n)}function s(){return function e(t){!function(e,t){var n=e.type,o=t.data.on;o&&(o[n]?i(o[n],t,e):o["!"+n]&&i(o["!"+n],t,e))}(t,e.vnode)}}function a(e,t){var n,o=e.data.on,r=e.listener,i=e.elm,a=t&&t.data.on,l=t&&t.elm;if(o!==a){if(o&&r)if(a){for(n in o)if(!a[n]){const e="!"===n.charAt(0);n=e?n.slice(1):n,i.removeEventListener(n,r,e)}}else for(n in o){const e="!"===n.charAt(0);n=e?n.slice(1):n,i.removeEventListener(n,r,e)}if(a){var d=t.listener=e.listener||s();if(d.vnode=t,o){for(n in a)if(!o[n]){const e="!"===n.charAt(0);n=e?n.slice(1):n,l.addEventListener(n,d,e)}}else for(n in a){const e="!"===n.charAt(0);n=e?n.slice(1):n,l.addEventListener(n,d,e)}}}}const l={create:a,update:a,destroy:a},d="http://www.w3.org/1999/xlink",c="http://www.w3.org/XML/1998/namespace",u=58,h=120;function p(e,t){var n,o=t.elm,r=e.data.attrs,i=t.data.attrs;if((r||i)&&r!==i){for(n in r=r||{},i=i||{}){const e=i[n];r[n]!==e&&(!0===e?o.setAttribute(n,""):!1===e?o.removeAttribute(n):n.charCodeAt(0)!==h?o.setAttribute(n,e):n.charCodeAt(3)===u?o.setAttributeNS(c,n,e):n.charCodeAt(5)===u?o.setAttributeNS(d,n,e):o.setAttribute(n,e))}for(n in r)n in i||o.removeAttribute(n)}}const f={create:p,update:p};function m(e,t){var n,o,r,i=e.data.class,s=t.data.class;if((i||s)&&i!==s){for(o in i=i||{},s=s||{},r=t.elm,i)o&&!s[o]&&r.classList.remove(o);for(o in s)(n=s[o])!==i[o]&&r.classList[n?"add":"remove"](o)}}const _={create:m,update:m};function v(e,t,n,o,r){return{sel:e,data:t,children:n,text:o,elm:r,key:void 0===t?void 0:t.key}}function g(e){return void 0===e}function w(e){return void 0!==e}const $=v("",{},[],void 0,void 0);function b(e,t){return e.key===t.key&&e.sel===t.sel}function y(e,t,n){let o,r,i,s={};for(o=t;o<=n;++o)null!=(i=e[o])&&void 0!==(r=i.key)&&(s[r]=o);return s}const x=["create","update","remove","destroy","pre","post"];const N=Array.isArray;function C(e){return"string"==typeof e||"number"==typeof e}const L={createElement:function(e){return document.createElement(e)},createElementNS:function(e,t){return document.createElementNS(e,t)},createTextNode:function(e){return document.createTextNode(e)},createComment:function(e){return document.createComment(e)},insertBefore:function(e,t,n){e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},appendChild:function(e,t){e.appendChild(t)},parentNode:function(e){return e.parentNode},nextSibling:function(e){return e.nextSibling},tagName:function(e){return e.tagName},setTextContent:function(e,t){e.textContent=t}};function E(e,t,n){if("dummy"!==n&&(e.ns="http://www.w3.org/2000/svg","foreignObject"!==n&&void 0!==t))for(let e=0,n=t.length;e<n;++e){const n=t[e];let o=n.data;void 0!==o&&E(o,n.children,n.sel)}}function D(e,t,n){var o,r,i,s,a={};if(void 0!==n?(a=t,N(n)?o=n:C(n)?r=n:n&&n.sel&&(o=[n])):void 0!==t&&(N(t)?o=t:C(t)?r=t:t&&t.sel?o=[t]:a=t),void 0!==o)for(i=0,s=o.length;i<s;++i)C(o[i])&&(o[i]=v(void 0,void 0,void 0,o[i],void 0));return v(e,a,o,r,void 0)}const T=function(e,t){let n,o,r={};const i=void 0!==t?t:L;for(n=0;n<x.length;++n)for(r[x[n]]=[],o=0;o<e.length;++o){const t=e[o][x[n]];void 0!==t&&r[x[n]].push(t)}function s(e){const t=e.id?"#"+e.id:"",n=e.className?"."+e.className.split(" ").join("."):"";return v(i.tagName(e).toLowerCase()+t+n,{},[],void 0,e)}function a(e,t){return function(){if(0==--t){const t=i.parentNode(e);i.removeChild(t,e)}}}function l(e,t){let n,o,s=e.data;void 0!==s&&w(n=s.hook)&&w(n=n.init)&&(n(e),s=e.data);let a=e.children,d=e.sel;if("!"===d)g(e.text)&&(e.text=""),e.elm=i.createComment(e.text);else if(void 0!==d){const c=e.elm||(e.elm=w(s)&&w(n=s.ns)?i.createElementNS(n,d):i.createElement(d));for(n=0,o=r.create.length;n<o;++n)r.create[n]($,e);if(N(a))for(n=0,o=a.length;n<o;++n){const e=a[n];null!=e&&i.appendChild(c,l(e,t))}else C(e.text)&&i.appendChild(c,i.createTextNode(e.text));w(n=e.data.hook)&&(n.create&&n.create($,e),n.insert&&t.push(e))}else e.elm=i.createTextNode(e.text);return e.elm}function d(e,t,n,o,r,s){for(;o<=r;++o){const r=n[o];null!=r&&i.insertBefore(e,l(r,s),t)}}function c(e){let t,n,o,i,s=e.data;if(void 0!==s){for(w(t=s.hook)&&w(t=t.destroy)&&t(e),t=0,n=r.destroy.length;t<n;++t)r.destroy[t](e);if(void 0!==e.children)for(o=0,i=e.children.length;o<i;++o)null!=(t=e.children[o])&&"string"!=typeof t&&c(t)}}function u(e,t,n,o){for(;n<=o;++n){let o,s,l,d,u=t[n];if(null!=u)if(w(u.sel)){for(c(u),l=r.remove.length+1,d=a(u.elm,l),o=0,s=r.remove.length;o<s;++o)r.remove[o](u,d);w(o=u.data)&&w(o=o.hook)&&w(o=o.remove)?o(u,d):d()}else i.removeChild(e,u.elm)}}function h(e,t,n){let o,s,a;w(o=t.data)&&w(a=o.hook)&&w(o=a.prepatch)&&o(e,t);const c=t.elm=e.elm;let p=e.children,f=t.children;if(e!==t){if(void 0!==t.data){for(o=0,s=r.update.length;o<s;++o)r.update[o](e,t);w(o=t.data.hook)&&w(o=o.update)&&o(e,t)}g(t.text)?w(p)&&w(f)?p!==f&&function(e,t,n,o){let r,s,a,c,p=0,f=0,m=t.length-1,_=t[0],v=t[m],w=n.length-1,$=n[0],x=n[w];for(;p<=m&&f<=w;)null==_?_=t[++p]:null==v?v=t[--m]:null==$?$=n[++f]:null==x?x=n[--w]:b(_,$)?(h(_,$,o),_=t[++p],$=n[++f]):b(v,x)?(h(v,x,o),v=t[--m],x=n[--w]):b(_,x)?(h(_,x,o),i.insertBefore(e,_.elm,i.nextSibling(v.elm)),_=t[++p],x=n[--w]):b(v,$)?(h(v,$,o),i.insertBefore(e,v.elm,_.elm),v=t[--m],$=n[++f]):(void 0===r&&(r=y(t,p,m)),g(s=r[$.key])?(i.insertBefore(e,l($,o),_.elm),$=n[++f]):((a=t[s]).sel!==$.sel?i.insertBefore(e,l($,o),_.elm):(h(a,$,o),t[s]=void 0,i.insertBefore(e,a.elm,_.elm)),$=n[++f]));(p<=m||f<=w)&&(p>m?d(e,c=null==n[w+1]?null:n[w+1].elm,n,f,w,o):u(e,t,p,m))}(c,p,f,n):w(f)?(w(e.text)&&i.setTextContent(c,""),d(c,null,f,0,f.length-1,n)):w(p)?u(c,p,0,p.length-1):w(e.text)&&i.setTextContent(c,""):e.text!==t.text&&(w(p)&&u(c,p,0,p.length-1),i.setTextContent(c,t.text)),w(a)&&w(o=a.postpatch)&&o(e,t)}}return function(e,t){let n,o,a,d;const c=[];for(n=0,o=r.pre.length;n<o;++n)r.pre[n]();for(function(e){return void 0!==e.sel}(e)||(e=s(e)),b(e,t)?h(e,t,c):(a=e.elm,d=i.parentNode(a),l(t,c),null!==d&&(i.insertBefore(d,t.elm,i.nextSibling(a)),u(d,[e],0,0))),n=0,o=c.length;n<o;++n)c[n].data.hook.insert(c[n]);for(n=0,o=r.post.length;n<o;++n)r.post[n]();return t}}([l,f,r,_]),A="true,false,NaN,null,undefined,debugger,console,window,in,instanceof,new,function,return,this,eval,void,Math,RegExp,Array,Object,Date".split(","),P={and:"&&",or:"||",gt:">",gte:">=",lt:"<",lte:"<="},k={"{":"LEFT_BRACE","}":"RIGHT_BRACE","[":"LEFT_BRACKET","]":"RIGHT_BRACKET",":":"COLON",",":"COMMA","(":"LEFT_PAREN",")":"RIGHT_PAREN"},I="...,.,===,==,+,!==,!=,!,||,&&,>=,>,<=,<,?,-,*,/,%,typeof ,=>,=,;,in ".split(",");const S=[function(e){let t=e[0],n=t;if("'"!==t&&'"'!==t)return!1;let o,r=1;for(;e[r]&&e[r]!==n;){if(t+=o=e[r],"\\"===o){if(!(o=e[++r]))throw new Error("Invalid expression");t+=o}r++}if(e[r]!==n)throw new Error("Invalid expression");return{type:"VALUE",value:t+=n}},function(e){let t=e[0];if(t&&t.match(/[0-9]/)){let n=1;for(;e[n]&&e[n].match(/[0-9]|\./);)t+=e[n],n++;return{type:"VALUE",value:t}}return!1},function(e){for(let t of I)if(e.startsWith(t))return{type:"OPERATOR",value:t};return!1},function(e){let t=e[0];if(t&&t.match(/[a-zA-Z_\$]/)){let n=1;for(;e[n]&&e[n].match(/\w/);)t+=e[n],n++;return t in P?{type:"OPERATOR",value:P[t],size:t.length}:{type:"SYMBOL",value:t}}return!1},function(e){const t=e[0];return!!(t&&t in k)&&{type:k[t],value:t}}];function R(e,t){t=Object.create(t);const n=function(e){const t=[];let n=!0;for(;n;)if(e=e.trim()){for(let o of S)if(n=o(e)){t.push(n),e=e.slice(n.size||n.value.length);break}}else n=!1;if(e.length)throw new Error(`Tokenizer error: could not tokenize "${e}"`);return t}(e);for(let e=0;e<n.length;e++){let o=n[e],r=n[e-1],i=n[e+1],s="SYMBOL"===o.type&&!A.includes(o.value);if("SYMBOL"!==o.type||A.includes(o.value)||r&&("OPERATOR"===r.type&&"."===r.value?s=!1:"LEFT_BRACE"!==r.type&&"COMMA"!==r.type||i&&"COLON"===i.type&&(s=!1)),i&&"OPERATOR"===i.type&&"=>"===i.value)if("RIGHT_PAREN"===o.type){let o=e-1;for(;o>0&&"LEFT_PAREN"!==n[o].type;)"SYMBOL"===n[o].type&&n[o].originalValue&&(n[o].value=n[o].originalValue,t[n[o].value]={id:n[o].value,expr:n[o].value}),o--}else t[o.value]={id:o.value,expr:o.value};s&&(o.varName=o.value,o.value in t&&"id"in t[o.value]?o.value=t[o.value].expr:(o.originalValue=o.value,o.value=`scope['${o.value}']`))}return n}const O=/\{\{.*?\}\}/g;let M=(()=>{class e{constructor(e){this.code=[],this.variables={},this.escaping=!1,this.parentNode=null,this.parentTextNode=null,this.rootNode=null,this.indentLevel=0,this.shouldDefineParent=!1,this.shouldDefineScope=!1,this.protectedScopeNumber=0,this.shouldDefineQWeb=!1,this.shouldDefineUtils=!1,this.shouldDefineRefs=!1,this.shouldDefineResult=!0,this.loopNumber=0,this.inPreTag=!1,this.allowMultipleRoots=!1,this.hasParentWidget=!1,this.hasKey0=!1,this.keyStack=[],this.rootContext=this,this.templateName=e||"noname",this.addLine("let h = this.h;")}generateID(){return e.nextID++}generateTemplateKey(e=""){const t=this.generateID();if(0===this.loopNumber&&!this.hasKey0)return`'${e}__${t}__'`;let n=`\`${e}__${t}__`;for(let e=this.hasKey0?0:1;e<this.loopNumber+1;e++)n+=`\${key${e}}__`;return this.addLine(`let k${t} = ${n}\`;`),`k${t}`}generateCode(){return this.shouldDefineResult&&this.code.unshift("    let result;"),this.shouldDefineScope&&this.code.unshift("    let scope = Object.create(context);"),this.shouldDefineRefs&&this.code.unshift("    context.__owl__.refs = context.__owl__.refs || {};"),this.shouldDefineParent&&(this.hasParentWidget?this.code.unshift("    let parent = extra.parent;"):this.code.unshift("    let parent = context;")),this.shouldDefineQWeb&&this.code.unshift("    let QWeb = this.constructor;"),this.shouldDefineUtils&&this.code.unshift("    let utils = this.constructor.utils;"),this.code}withParent(e){if(!this.allowMultipleRoots&&this===this.rootContext&&(this.parentNode||this.parentTextNode))throw new Error("A template should not have more than one root node");return this.rootContext.rootNode||(this.rootContext.rootNode=e),!this.parentNode&&this.rootContext.shouldDefineResult&&this.addLine(`result = vn${e};`),this.subContext("parentNode",e)}subContext(e,t){const n=Object.create(this);return n[e]=t,n}indent(){this.rootContext.indentLevel++}dedent(){this.rootContext.indentLevel--}addLine(e){const t=new Array(this.indentLevel+2).join("    ");return this.code.push(t+e),this.code.length-1}addIf(e){this.addLine(`if (${e}) {`),this.indent()}addElse(){this.dedent(),this.addLine("} else {"),this.indent()}closeIf(){this.dedent(),this.addLine("}")}getValue(e){return e in this.variables?this.getValue(this.variables[e]):e}formatExpression(e){return this.rootContext.shouldDefineScope=!0,function(e,t){return R(e,t).map(e=>e.value).join("")}(e,this.variables)}captureExpression(e){this.rootContext.shouldDefineScope=!0;const t=this.generateID(),n=R(e,this.variables),o=new Set;return n.map(e=>(e.varName&&(o.has(e.varName)||(o.add(e.varName),this.addLine(`const ${e.varName}_${t} = ${e.value};`)),e.value=`${e.varName}_${t}`),e.value)).join("")}interpolate(e){let t=e.match(O);return t&&t[0].length===e.length?`(${this.formatExpression(e.slice(2,-2))})`:"`"+e.replace(/\{\{.*?\}\}/g,e=>"${"+this.formatExpression(e.slice(2,-2))+"}")+"`"}startProtectScope(e){const t=this.generateID();this.rootContext.protectedScopeNumber++,this.rootContext.shouldDefineScope=!0;return this.addLine(`let _origScope${t} = scope;`),this.addLine("scope = Object.create(scope);"),e||this.addLine("scope.__access_mode__ = 'ro';"),t}stopProtectScope(e){this.rootContext.protectedScopeNumber--,this.addLine(`scope = _origScope${e};`)}}return e.nextID=1,e})();const F={setTimeout:window.setTimeout.bind(window),clearTimeout:window.clearTimeout.bind(window),setInterval:window.setInterval.bind(window),clearInterval:window.clearInterval.bind(window),requestAnimationFrame:window.requestAnimationFrame.bind(window),random:Math.random,Date:window.Date,fetch:(window.fetch||(()=>{})).bind(window),localStorage:window.localStorage};const j={};function U(e){if(void 0===e)return"";if("number"==typeof e)return String(e);const t=document.createElement("p");return t.textContent=e,t.innerHTML}function B(e,t){for(let n in e)if(e[n]!==t[n])return!1;return!0}var q=Object.freeze({__proto__:null,whenReady:function(e){return new Promise(function(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e,!1)}).then(e||function(){})},loadJS:function(e){if(e in j)return j[e];const t=new Promise(function(t,n){const o=document.createElement("script");o.type="text/javascript",o.src=e,o.onload=function(){t()},o.onerror=function(){n(`Error loading file '${e}'`)},(document.head||document.getElementsByTagName("head")[0]).appendChild(o)});return j[e]=t,t},loadFile:async function(e){const t=await F.fetch(e);if(!t.ok)throw new Error("Error while fetching xml templates");return await t.text()},escape:U,debounce:function(e,t,n){let o;return function(){const r=this,i=arguments,s=n&&!o;F.clearTimeout(o),o=F.setTimeout(function(){o=null,n||e.apply(r,i)},t),s&&e.apply(r,i)}},shallowEqual:B});const W=["input","textarea","button","select","option","optgroup"],V=["label","title","placeholder","alt"],z=/[\r\n]/,K=/\s+/g,H={create:"(_, n)",insert:"vn",remove:"(vn, rm)",destroy:"()"};function Q(e){return e&&e.hasOwnProperty("__owl__")}const G={zero:Symbol("zero"),toObj(e){if("string"==typeof e){if(!(e=e.trim()))return{};let t=e.split(/\s+/),n={};for(let e=0;e<t.length;e++)n[t[e]]=!0;return n}return e},shallowEqual:B,addNameSpace(e){E(e.data,e.children,e.sel)},VDomArray:class extends Array{},vDomToString:function(e){return e.map(e=>{if(e.sel){const t=document.createElement(e.sel);return T(t,e).elm.outerHTML}return e.text}).join("")},getComponent(e){for(;e&&!Q(e);)e=e.__proto__;return e},getScope(e,t){const n=e;for(;e&&!e.hasOwnProperty(t)&&(!e.hasOwnProperty("__access_mode__")||"ro"!==e.__access_mode__);){const t=e.__proto__;if(!t||Q(t))return n;e=t}return e}};function Z(e){const t=(new DOMParser).parseFromString(e,"text/xml");if(t.getElementsByTagName("parsererror").length){let n="Invalid XML in template.";const o=t.getElementsByTagName("parsererror")[0].textContent;if(o){n+="\nThe parser has produced the following error message:\n"+o;const t=/\d+/g,r=t.exec(o);if(r){const i=Number(r[0]),s=e.split("\n")[i-1],a=t.exec(o);if(s&&a){const e=Number(a[0])-1;s[e]&&(n+=`\nThe error might be located at xml line ${i} column ${e}\n`+`${s}\n${"-".repeat(e-1)}^`)}}}throw new Error(n)}return t}function Y(e){return e.replace(/\'/g,"\\'")}let J=(()=>{class e extends t{constructor(t={}){super(),this.h=D,this.subTemplates={},this.isUpdating=!1,this.templates=Object.create(e.TEMPLATES),t.templates&&this.addTemplates(t.templates),t.translateFn&&(this.translateFn=t.translateFn)}static addDirective(t){if(t.name in e.DIRECTIVE_NAMES)throw new Error(`Directive "${t.name} already registered`);e.DIRECTIVES.push(t),e.DIRECTIVE_NAMES[t.name]=1,e.DIRECTIVES.sort((e,t)=>e.priority-t.priority),t.extraNames&&t.extraNames.forEach(t=>e.DIRECTIVE_NAMES[t]=1)}static registerComponent(t,n){if(e.components[t])throw new Error(`Component '${t}' has already been registered`);e.components[t]=n}static registerTemplate(t,n){if(e.TEMPLATES[t])throw new Error(`Template '${t}' has already been registered`);const o=new e;o.addTemplate(t,n),e.TEMPLATES[t]=o.templates[t]}addTemplate(e,t,n){if(n&&e in this.templates)return;const o=Z(t);if(!o.firstChild)throw new Error("Invalid template (should not be empty)");this._addTemplate(e,o.firstChild)}addTemplates(e){const t=("string"==typeof e?Z(e):e).getElementsByTagName("templates")[0];if(t)for(let e of t.children){const t=e.getAttribute("t-name");this._addTemplate(t,e)}}_addTemplate(e,t){if(e in this.templates)throw new Error(`Template ${e} already defined`);this._processTemplate(t);const n={elem:t,fn:function(o,r){const i=this._compile(e,t);return n.fn=i,i.call(this,o,r)}};this.templates[e]=n}_processTemplate(e){let t=e.querySelectorAll("[t-elif], [t-else]");for(let e=0,n=t.length;e<n;e++){let n=t[e],o=n.previousElementSibling,r=function(e){return o.getAttribute(e)},i=function(e){return+!!n.getAttribute(e)};if(!o||!r("t-if")&&!r("t-elif"))throw new Error("t-elif and t-else directives must be preceded by a t-if or t-elif directive");{if(r("t-foreach"))throw new Error("t-if cannot stay at the same level as t-foreach when using t-elif or t-else");if(["t-if","t-elif","t-else"].map(i).reduce(function(e,t){return e+t})>1)throw new Error("Only one conditional branching directive is allowed per node");let e;for(;(e=n.previousSibling)!==o;){if(e.nodeValue.trim().length&&8!==e.nodeType)throw new Error("text is not allowed between branching directives");e.remove()}}}}render(e,t={},n=null){const o=this.templates[e];if(!o)throw new Error(`Template ${e} does not exist`);return o.fn.call(this,t,n)}renderToString(e,t={},n){const o=this.render(e,t,n);if(void 0===o.sel)return o.text;const r=document.createElement(o.sel),i=T(r,o).elm;return function e(t){3===t.nodeType&&(t.textContent=U(t.textContent));for(let n of t.childNodes)e(n)}(i),i.outerHTML}forceUpdate(){this.isUpdating=!0,Promise.resolve().then(()=>{this.isUpdating&&(this.isUpdating=!1,this.trigger("update"))})}_compile(e,t,n,o){const r=t.attributes.hasOwnProperty("t-debug"),i=new M(e);if("t"!==t.tagName&&(i.shouldDefineResult=!1),n&&(i.variables=Object.create(n.variables),i.parentNode=n.parentNode||i.generateID(),i.allowMultipleRoots=!0,i.hasParentWidget=!0,i.shouldDefineResult=!1,i.addLine(`let c${i.parentNode} = extra.parentNode;`),o&&(i.addLine('let key0 = extra.key || "";'),i.hasKey0=!0)),this._compileNode(t,i),!n)if(i.shouldDefineResult)i.addLine("return result;");else{if(!i.rootNode)throw new Error(`A template should have one root node (${i.templateName})`);i.addLine(`return vn${i.rootNode};`)}let s=i.generateCode();const a=i.templateName.replace(/`/g,"'").slice(0,200);let l;s.unshift(`    // Template name: "${a}"`);try{l=new Function("context, extra",s.join("\n"))}catch(e){throw console.groupCollapsed(`Invalid Code generated by ${a}`),console.warn(s.join("\n")),console.groupEnd(),new Error(`Invalid generated code while compiling template '${a}': ${e.message}`)}if(r){const t=this.templates[e];if(t){const e=`Template: ${t.elem.outerHTML}\nCompiled code:\n${l.toString()}`;console.log(e)}}return l}_compileNode(t,n){if(!(t instanceof Element)){let e=t.textContent;if(!n.inPreTag){if(z.test(e)&&!e.trim())return;e=e.replace(K," ")}if(this.translateFn&&"off"!==t.parentNode.getAttribute("t-translation")&&(e=this.translateFn(e)),n.parentNode)3===t.nodeType?n.addLine(`c${n.parentNode}.push({text: \`${e}\`});`):8===t.nodeType&&n.addLine(`c${n.parentNode}.push(h('!', \`${e}\`));`);else if(n.parentTextNode)n.addLine(`vn${n.parentTextNode}.text += \`${e}\`;`);else{let t=n.generateID();n.addLine(`let vn${t} = {text: \`${e}\`};`),n.addLine(`result = vn${t};`),n.rootContext.rootNode=t,n.rootContext.parentTextNode=t}return}const o=t.tagName[0];if(o===o.toUpperCase())t.setAttribute("t-component",t.tagName);else if("t"!==t.tagName&&t.hasAttribute("t-component"))throw new Error(`Directive 't-component' can only be used on <t> nodes (used on a <${t.tagName}>)`);const r=t.attributes,i=[],s=[];for(let n=0;n<r.length;n++){let o=r[n].name;if(o.startsWith("t-")){if(!(o.slice(2).split(/-|\./)[0]in e.DIRECTIVE_NAMES))throw new Error(`Unknown QWeb directive: '${o}'`);if("t"!==t.tagName&&("t-esc"===o||"t-raw"===o)){const e=document.createElement("t");e.setAttribute(o,t.getAttribute(o));for(let n of Array.from(t.childNodes))e.appendChild(n);t.appendChild(e),t.removeAttribute(o)}}}const a=e.DIRECTIVES.length,l=r.length;let d=!1;for(let t=0;t<a;t++){let n,o,s=e.DIRECTIVES[t];for(let e=0;e<l;e++){const t=r[e].name;(t==="t-"+s.name||t.startsWith("t-"+s.name+"-")||t.startsWith("t-"+s.name+"."))&&(n=t,o=r[e].textContent,i.push({directive:s,value:o,fullName:n}),"on"!==s.name&&"model"!==s.name||(d=!0))}}for(let{directive:e,value:o,fullName:r}of i)if(e.finalize&&s.push({directive:e,value:o,fullName:r}),e.atNodeEncounter){if(e.atNodeEncounter({node:t,qweb:this,ctx:n,fullName:r,value:o})){for(let{directive:e,value:o,fullName:r}of s)e.finalize({node:t,qweb:this,ctx:n,fullName:r,value:o});return}}if("t"!==t.nodeName){let e=this._compileGenericNode(t,n,d);n=n.withParent(e);let o={},r=function(e,t){o[e]=o[e]||[],o[e].push(t)};for(let{directive:o,value:s,fullName:a}of i)o.atNodeCreation&&o.atNodeCreation({node:t,qweb:this,ctx:n,fullName:a,value:s,nodeID:e,addNodeHook:r});if(Object.keys(o).length){n.addLine(`p${e}.hook = {`);for(let e in o){n.addLine(`  ${e}: ${H[e]} => {`);for(let t of o[e])n.addLine(`    ${t}`);n.addLine("  },")}n.addLine("};")}}"pre"===t.nodeName&&(n=n.subContext("inPreTag",!0)),this._compileChildren(t,n),("svg"===t.nodeName||"g"===t.nodeName&&n.rootNode===n.parentNode)&&(n.rootContext.shouldDefineUtils=!0,n.addLine(`utils.addNameSpace(vn${n.parentNode});`));for(let{directive:e,value:o,fullName:r}of s)e.finalize({node:t,qweb:this,ctx:n,fullName:r,value:o})}_compileGenericNode(e,t,n=!0){if(1!==e.nodeType)throw new Error("unsupported node type");const o=e.attributes,r=[],i=[],s=[];function a(t,n){let o=!1;if("input"===e.nodeName&&"checked"===t){let t=e.getAttribute("type");"checkbox"!==t&&"radio"!==t||(o=!0)}"option"===e.nodeName&&"selected"===t&&(o=!0),"disabled"===t&&W.indexOf(e.nodeName)>-1&&(o=!0),("readonly"===t&&"input"===e.nodeName||"textarea"===e.nodeName)&&(o=!0),o&&i.push(`${t}: _${n}`)}let l="";for(let n=0;n<o.length;n++){let i=o[n].name,d=o[n].textContent;if(this.translateFn&&V.includes(i)&&(d=this.translateFn(d)),!i.startsWith("t-")&&!e.getAttribute("t-attf-"+i)){const e=t.generateID();if("class"===i){if(d=d.trim()){let e=d.split(/\s+/).map(e=>`'${Y(e)}':true`).join(",");l?t.addLine(`Object.assign(${l}, {${e}})`):(l=`_${t.generateID()}`,t.addLine(`let ${l} = {${e}};`))}}else t.addLine(`let _${e} = '${Y(d)}';`),i.match(/^[a-zA-Z]+$/)||(i='"'+i+'"'),r.push(`${i}: _${e}`),a(i,e)}if(i.startsWith("t-att-")){let n=i.slice(6);const o=t.getValue(d);let s="string"==typeof o?t.formatExpression(o):`scope.${o.id}`;if("class"===n)t.rootContext.shouldDefineUtils=!0,s=`utils.toObj(${s})`,l?t.addLine(`Object.assign(${l}, ${s})`):(l=`_${t.generateID()}`,t.addLine(`let ${l} = ${s};`));else{const o=t.generateID();n.match(/^[a-zA-Z]+$/)||(n='"'+n+'"');const i=e.getAttribute(n);if(i){const e=t.generateID();t.addLine(`let _${e} = ${s};`),s=`'${i}' + (_${e} ? ' ' + _${e} : '')`;const o=r.findIndex(e=>e.startsWith(n+":"));r.splice(o,1)}t.addLine(`let _${o} = ${s};`),r.push(`${n}: _${o}`),a(n,o)}}if(i.startsWith("t-attf-")){let n=i.slice(7);n.match(/^[a-zA-Z]+$/)||(n='"'+n+'"');const o=t.interpolate(d),s=t.generateID();let a=e.getAttribute(n);a?t.addLine(`let _${s} = '${a} ' + ${o};`):t.addLine(`let _${s} = ${o};`),r.push(`${n}: _${s}`)}if("t-att"===i){let e=t.generateID();t.addLine(`let _${e} = ${t.formatExpression(d)};`),s.push(e)}}let d=t.generateID();const c=[`key:${t.loopNumber||t.hasKey0?`\`\${key${t.loopNumber}}_${d}\``:d}`];r.length+s.length>0&&c.push(`attrs:{${r.join(",")}}`),i.length>0&&c.push(`props:{${i.join(",")}}`),l&&c.push(`class:${l}`),n&&c.push("on:{}"),t.addLine(`let c${d} = [], p${d} = {${c.join(",")}};`);for(let e of s)t.addIf(`_${e} instanceof Array`),t.addLine(`p${d}.attrs[_${e}[0]] = _${e}[1];`),t.addElse(),t.addLine(`for (let key in _${e}) {`),t.indent(),t.addLine(`p${d}.attrs[key] = _${e}[key];`),t.dedent(),t.addLine("}"),t.closeIf();return t.addLine(`let vn${d} = h('${e.nodeName}', p${d}, c${d});`),t.parentNode?t.addLine(`c${t.parentNode}.push(vn${d});`):(t.loopNumber||t.hasKey0)&&(t.rootContext.shouldDefineResult=!0,t.addLine(`result = vn${d};`)),d}_compileChildren(e,t){if(e.childNodes.length>0)for(let n of Array.from(e.childNodes))this._compileNode(n,t)}}return e.utils=G,e.components=Object.create(null),e.DIRECTIVE_NAMES={name:1,att:1,attf:1,translation:1},e.DIRECTIVES=[],e.TEMPLATES={},e.nextId=1,e.dev=!1,e.slots={},e.nextSlotId=1,e.subTemplates={},e})();const X=new DOMParser;function ee(e){if(!(e instanceof Element))return{text:e.textContent};const t={};for(let n of e.attributes)t[n.name]=n.textContent;const n=[];for(let t of e.childNodes)n.push(ee(t));const o=D(e.tagName,{attrs:t},n);return"svg"===o.sel&&E(o.data,o.children,o.sel),o}function te(e,t,n,o){if(o.rootContext.shouldDefineScope=!0,"0"===e){if(o.parentNode){o.rootContext.shouldDefineUtils=!0;const e=o.escaping?"{text: utils.vDomToString(scope[utils.zero])}":"...scope[utils.zero]";o.addLine(`c${o.parentNode}.push(${e});`)}return}let r;if("string"==typeof e?(r=`_${o.generateID()}`,o.addLine(`let ${r} = ${o.formatExpression(e)};`)):r=`scope.${e.id}`,o.addIf(`${r} != null`),o.escaping){let t;if(e.hasBody&&(o.rootContext.shouldDefineUtils=!0,t=o.startProtectScope(),o.addLine(`${r} = ${r} instanceof utils.VDomArray ? utils.vDomToString(${r}) : ${r};`)),o.parentTextNode)o.addLine(`vn${o.parentTextNode}.text += ${r};`);else if(o.parentNode)o.addLine(`c${o.parentNode}.push({text: ${r}});`);else{let e=o.generateID();o.rootContext.rootNode=e,o.rootContext.parentTextNode=e,o.addLine(`let vn${e} = {text: ${r}};`),o.rootContext.shouldDefineResult&&o.addLine(`result = vn${e}`)}e.hasBody&&o.stopProtectScope(t)}else o.rootContext.shouldDefineUtils=!0,e.hasBody?(o.addLine(`const vnodeArray = ${r} instanceof utils.VDomArray ? ${r} : utils.htmlToVDOM(${r});`),o.addLine(`c${o.parentNode}.push(...vnodeArray);`)):o.addLine(`c${o.parentNode}.push(...utils.htmlToVDOM(${r}));`);t.childNodes.length&&(o.addElse(),n._compileChildren(t,o)),o.closeIf()}J.utils.htmlToVDOM=function(e){const t=X.parseFromString(e,"text/html"),n=[];for(let e of t.body.childNodes)n.push(ee(e));return n},J.addDirective({name:"esc",priority:70,atNodeEncounter:({node:e,qweb:t,ctx:n})=>(te(n.getValue(e.getAttribute("t-esc")),e,t,n.subContext("escaping",!0)),!0)}),J.addDirective({name:"raw",priority:80,atNodeEncounter:({node:e,qweb:t,ctx:n})=>(te(n.getValue(e.getAttribute("t-raw")),e,t,n),!0)}),J.addDirective({name:"set",extraNames:["value"],priority:60,atNodeEncounter({node:e,qweb:t,ctx:n}){n.rootContext.shouldDefineScope=!0;const o=e.getAttribute("t-set");let r=e.getAttribute("t-value");n.variables[o]=n.variables[o]||{};let i=n.variables[o];const s=e.hasChildNodes();if(i.id=o,i.expr=`scope.${o}`,r){const e=n.formatExpression(r);let t="scope";n.protectedScopeNumber&&(n.rootContext.shouldDefineUtils=!0,t=`utils.getScope(scope, '${o}')`),n.addLine(`${t}.${o} = ${e};`),i.value=e}if(s){n.rootContext.shouldDefineUtils=!0,r&&n.addIf(`!(${i.expr})`);const o=n.generateID(),s=n.parentNode;n.parentNode=o,n.addLine(`let c${o} = new utils.VDomArray();`);const a=e.cloneNode(!0);for(let e of["t-set","t-value","t-if","t-else","t-elif"])a.removeAttribute(e);t._compileNode(a,n),n.addLine(`${i.expr} = c${o}`),i.value=`c${o}`,i.hasBody=!0,n.parentNode=s,r&&n.closeIf()}return!0}}),J.addDirective({name:"if",priority:20,atNodeEncounter({node:e,ctx:t}){let n=t.getValue(e.getAttribute("t-if"));return t.addIf("string"==typeof n?t.formatExpression(n):`scope.${n.id}`),!1},finalize({ctx:e}){e.closeIf()}}),J.addDirective({name:"elif",priority:30,atNodeEncounter({node:e,ctx:t}){let n=t.getValue(e.getAttribute("t-elif"));return t.addLine(`else if (${"string"==typeof n?t.formatExpression(n):`scope.${n.id}`}) {`),t.indent(),!1},finalize({ctx:e}){e.closeIf()}}),J.addDirective({name:"else",priority:40,atNodeEncounter:({ctx:e})=>(e.addLine("else {"),e.indent(),!1),finalize({ctx:e}){e.closeIf()}}),J.addDirective({name:"call",priority:50,atNodeEncounter({node:e,qweb:t,ctx:n}){if(n.rootContext.shouldDefineScope=!0,n.rootContext.shouldDefineUtils=!0,"t"!==e.nodeName)throw new Error("Invalid tag for t-call directive (should be 't')");const o=e.getAttribute("t-call"),r=t.templates[o];if(!r)throw new Error(`Cannot find template "${o}" (t-call)`);let i=t.subTemplates[o];if(!i){i=J.nextId++,t.subTemplates[o]=i;const e=t._compile(o,r.elem,n,!0);J.subTemplates[i]=e}let s,a=e.hasChildNodes();if(a){n.addLine("{"),n.indent(),s=n.startProtectScope();const o=e.cloneNode(!0);for(let e of["t-if","t-else","t-elif","t-call"])o.removeAttribute(e);const r=n.parentNode;n.parentNode="__0",n.addLine("{"),n.indent(),n.addLine("let c__0 = [];"),t._compileNode(o,n),n.rootContext.shouldDefineUtils=!0,n.addLine("scope[utils.zero] = c__0;"),n.parentNode=r,n.dedent(),n.addLine("}")}const l=a?"scope":"Object.assign(Object.create(context), scope)",d=n.generateTemplateKey(),c=`Object.assign({}, extra, {parentNode: ${n.parentNode?`c${n.parentNode}`:"result"}, parent: utils.getComponent(context), key: ${d}})`;return n.parentNode?n.addLine(`this.constructor.subTemplates['${i}'].call(this, ${l}, ${c});`):(n.rootContext.shouldDefineResult=!0,n.addLine("result = []"),n.addLine(`this.constructor.subTemplates['${i}'].call(this, ${l}, ${c});`),n.addLine("result = result[0]")),a&&(n.stopProtectScope(s),n.dedent(),n.addLine("}")),!0}}),J.addDirective({name:"foreach",extraNames:["as"],priority:10,atNodeEncounter({node:e,qweb:t,ctx:n}){n.rootContext.shouldDefineScope=!0,n=n.subContext("loopNumber",n.loopNumber+1);const o=e.getAttribute("t-foreach"),r=e.getAttribute("t-as");let i=n.generateID();n.addLine(`let _${i} = ${n.formatExpression(o)};`),n.addLine(`if (!_${i}) { throw new Error('QWeb error: Invalid loop expression')}`);let s=n.generateID(),a=n.generateID();n.addLine(`let _${s} = _${a} = _${i};`),n.addIf(`!(_${i} instanceof Array)`),n.addLine(`_${s} = Object.keys(_${i});`),n.addLine(`_${a} = Object.values(_${i});`),n.closeIf(),n.addLine(`let _length${s} = _${s}.length;`);let l=n.startProtectScope(!0);const d=`i${n.loopNumber}`;n.addLine(`for (let ${d} = 0; ${d} < _length${s}; ${d}++) {`),n.indent(),n.addLine(`scope.${r}_first = ${d} === 0`),n.addLine(`scope.${r}_last = ${d} === _length${s} - 1`),n.addLine(`scope.${r}_index = ${d}`),n.addLine(`scope.${r} = _${s}[${d}]`),n.addLine(`scope.${r}_value = _${a}[${d}]`);const c=e.cloneNode(!0);if(!c.hasAttribute("t-key")&&1===e.children.length&&"t"!==e.children[0].tagName&&!e.children[0].hasAttribute("t-key")&&console.warn(`Directive t-foreach should always be used with a t-key! (in template: '${n.templateName}')`),c.hasAttribute("t-key")){const e=n.formatExpression(c.getAttribute("t-key"));n.addLine(`let key${n.loopNumber} = ${e};`),c.removeAttribute("t-key")}else n.addLine(`let key${n.loopNumber} = i${n.loopNumber};`);return c.removeAttribute("t-foreach"),t._compileNode(c,n),n.dedent(),n.addLine("}"),n.stopProtectScope(l),!0}}),J.addDirective({name:"debug",priority:1,atNodeEncounter({ctx:e}){e.addLine("debugger;")}}),J.addDirective({name:"log",priority:1,atNodeEncounter({ctx:e,value:t}){const n=e.formatExpression(t);e.addLine(`console.log(${n})`)}});const ne={prevent:"e.preventDefault();",self:"if (e.target !== this.elm) {return}",stop:"e.stopPropagation();"},oe=/^[$A-Z_][0-9A-Z_$]*$/i;function re(e,t,n,o,r=ne){let i,[s,...a]=t.slice(5).split(".");if(a.includes("capture")&&(s="!"+s),!s)throw new Error("Missing event name with t-on directive");let l="";const d=n.replace(/\(.*\)/,function(e){return l=e.slice(1,-1),""});if(d.match(oe)){e.rootContext.shouldDefineUtils=!0;const t="utils.getComponent(context)";if(l){const n=e.generateID();e.addLine(`let args${n} = [${e.formatExpression(l)}];`),i=`${t}['${d}'](...args${n}, e);`,o=!1}else i=`${t}['${d}'](e);`}else o=!1,i=e.captureExpression(n);let c=`function (e) {if (!context.__owl__.isMounted){return}${a.map(e=>r[e]).join("")}${i}}`;if(o){const t=e.generateTemplateKey(s);e.addLine(`extra.handlers[${t}] = extra.handlers[${t}] || ${c};`),c=`extra.handlers[${t}]`}return{event:s,handler:c}}function ie(e){return 1e3*Number(e.slice(0,-1).replace(",","."))}function se(e,t){if(!e.parentNode)return;const n=window.getComputedStyle(e);(function(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max.apply(null,t.map((t,n)=>ie(t)+ie(e[n])))})((n.transitionDelay||"").split(", "),(n.transitionDuration||"").split(", "))>0?e.addEventListener("transitionend",t,{once:!0}):t()}J.addDirective({name:"on",priority:90,atNodeCreation({ctx:e,fullName:t,value:n,nodeID:o}){const{event:r,handler:i}=re(e,t,n,!0);e.addLine(`p${o}.on['${r}'] = ${i};`)}}),J.addDirective({name:"ref",priority:95,atNodeCreation({ctx:e,value:t,addNodeHook:n}){e.rootContext.shouldDefineRefs=!0;const o=`ref${e.generateID()}`;e.addLine(`const ${o} = ${e.interpolate(t)};`),n("create",`context.__owl__.refs[${o}] = n.elm;`),n("destroy",`delete context.__owl__.refs[${o}];`)}}),J.utils.nextFrame=function(e){requestAnimationFrame(()=>requestAnimationFrame(e))},J.utils.transitionInsert=function(e,t){const n=e.elm,o=n.parentElement&&n.parentElement.querySelector(`*[data-owl-key='${e.key}']`);o&&o.remove(),n.classList.add(t+"-enter"),n.classList.add(t+"-enter-active"),n.classList.remove(t+"-leave-active"),n.classList.remove(t+"-leave-to");const r=()=>{n.classList.remove(t+"-enter-active"),n.classList.remove(t+"-enter-to")};this.nextFrame(()=>{n.classList.remove(t+"-enter"),n.classList.add(t+"-enter-to"),se(n,r)})},J.utils.transitionRemove=function(e,t,n){const o=e.elm;o.setAttribute("data-owl-key",e.key),o.classList.add(t+"-leave"),o.classList.add(t+"-leave-active");const r=()=>{o.classList.contains(t+"-leave-active")&&(o.classList.remove(t+"-leave-active"),o.classList.remove(t+"-leave-to"),n())};this.nextFrame(()=>{o.classList.remove(t+"-leave"),o.classList.add(t+"-leave-to"),se(o,r)})},J.addDirective({name:"transition",priority:96,atNodeCreation({ctx:e,value:t,addNodeHook:n}){e.rootContext.shouldDefineUtils=!0;const o={insert:`utils.transitionInsert(vn, '${t}');`,remove:`utils.transitionRemove(vn, '${t}', rm);`};for(let e in o)n(e,o[e])}}),J.addDirective({name:"slot",priority:80,atNodeEncounter({ctx:e,value:t,node:n,qweb:o}){const r=e.generateID();e.addLine(`const slot${r} = this.constructor.slots[context.__owl__.slotId + '_' + '${t}'];`),e.addIf(`slot${r}`);let i=`c${e.parentNode}`;if(e.parentNode||(e.rootContext.shouldDefineResult=!0,e.rootContext.shouldDefineUtils=!0,i=`children${e.generateID()}`,e.addLine(`let ${i}= []`),e.addLine("result = {}")),e.addLine(`slot${r}.call(this, context.__owl__.scope, Object.assign({}, extra, {parentNode: ${i}, parent: extra.parent || context}));`),e.parentNode||e.addLine(`utils.defineProxy(result, ${i}[0]);`),n.hasChildNodes()){e.addElse();const t=n.cloneNode(!0);t.removeAttribute("t-slot"),o._compileNode(t,e)}return e.closeIf(),!0}}),J.utils.toNumber=function(e){const t=parseFloat(e);return isNaN(t)?e:t},J.addDirective({name:"model",priority:42,atNodeCreation({ctx:e,nodeID:t,value:n,node:o,fullName:r,addNodeHook:i}){const s=o.getAttribute("type");let a,l=r.includes(".lazy")?"change":"input",d=e.formatExpression(n);const c=d.lastIndexOf("."),u=d.slice(0,c);e.addLine(`let expr${t} = ${u};`),d=`expr${t}.${d.slice(c+1)}`;const h=e.generateTemplateKey();if("select"===o.tagName)e.addLine(`p${t}.props = {value: ${d}};`),i("create",`n.elm.value=${d};`),l="change",a=`(ev) => {${d} = ev.target.value}`;else if("checkbox"===s)e.addLine(`p${t}.props = {checked: ${d}};`),a=`(ev) => {${d} = ev.target.checked}`;else if("radio"===s){const n=o.getAttribute("value");e.addLine(`p${t}.props = {checked:${d} === '${n}'};`),a=`(ev) => {${d} = ev.target.value}`,l="click"}else{e.addLine(`p${t}.props = {value: ${d}};`);let n=`ev.target.value${r.includes(".trim")?".trim()":""}`;r.includes(".number")&&(e.rootContext.shouldDefineUtils=!0,n=`utils.toNumber(${n})`),a=`(ev) => {${d} = ${n}}`}e.addLine(`extra.handlers[${h}] = extra.handlers[${h}] || (${a});`),e.addLine(`p${t}.on['${l}'] = extra.handlers[${h}];`)}}),J.addDirective({name:"key",priority:45,atNodeEncounter({ctx:e,value:t,node:n}){0===e.loopNumber&&(e.keyStack.push(e.rootContext.hasKey0),e.rootContext.hasKey0=!0),e.addLine("{"),e.indent(),e.addLine(`let key${e.loopNumber} = ${e.formatExpression(t)};`)},finalize({ctx:e}){e.dedent(),e.addLine("}"),0===e.loopNumber&&(e.rootContext.hasKey0=e.keyStack.pop())}});const ae={};Object.defineProperty(ae,"mode",{get:()=>J.dev?"dev":"prod",set(e){if(J.dev="dev"===e,J.dev){const e="https://github.com/odoo/owl/blob/master/doc/reference/config.md#mode";console.warn(`Owl is running in 'dev' mode.  This is not suitable for production use. See ${e} for more information.`)}else console.log("Owl is now running in 'prod' mode.")}});class le extends CustomEvent{constructor(e,t,n){super(t,n),this.originalComponent=e}}const de=Object.assign({},ne,{self:"if (e.target !== vn.elm) {return}"});J.utils.defineProxy=function(e,t){for(let n in t)Object.defineProperty(e,n,{get:()=>t[n],set(e){t[n]=e}})},J.utils.assignHooks=function(e,t){if("hook"in e){const n=e.hook;for(let e in t){const o=n[e],r=t[e];n[e]=o?(...e)=>{o(...e),r(...e)}:r}}else e.hook=t},J.addDirective({name:"component",extraNames:["props"],priority:100,atNodeEncounter({ctx:e,value:t,node:n,qweb:o}){e.addLine(`// Component '${t}'`),e.rootContext.shouldDefineQWeb=!0,e.rootContext.shouldDefineParent=!0,e.rootContext.shouldDefineUtils=!0,e.rootContext.shouldDefineScope=!0;let r=!!n.getAttribute("t-props");const i=[];let s="";const a=n.attributes,l={};for(let t=0;t<a.length;t++){const n=a[t].name,o=a[t].textContent;n.startsWith("t-on-")?i.push([n,o]):"t-transition"===n?s=o:n.startsWith("t-")||"class"!==n&&"style"!==n&&(l[n]=e.formatExpression(o)||"undefined")}let d=Object.keys(l).map(e=>e+":"+l[e]).join(","),c=e.generateID();const u=e.generateTemplateKey();let h=n.getAttribute("t-ref"),p="",f="";h&&(e.rootContext.shouldDefineRefs=!0,f=`ref${e.generateID()}`,e.addLine(`const ${f} = ${e.interpolate(h)};`),p=`context.__owl__.refs[${f}] = w${c};`);let m=`w${c}.destroy();`;h&&(m+=`delete context.__owl__.refs[${f}];`),s&&(m=`let finalize = () => {\n          ${m}\n        };\n        delete w${c}.__owl__.transitionInserted;\n        utils.transitionRemove(vn, '${s}', finalize);`);let _="",v=n.getAttribute("class"),g=n.getAttribute("t-att-class"),w=n.getAttribute("style"),$=n.getAttribute("t-att-style");if($){const t=`_${e.generateID()}`;e.addLine(`const ${t} = ${e.formatExpression($)};`),$=t}let b="";if(v||g||w||$||i.length){if(v){let t=v.trim().split(/\s+/).map(e=>`'${e}':true`).join(",");b=`_${e.generateID()}`,e.addLine(`let ${b} = {${t}};`)}if(g){let t=e.formatExpression(g);"{"===t[0]&&"}"===t[t.length-1]||(t=`utils.toObj(${t})`),v?e.addLine(`Object.assign(${b}, ${t})`):(b=`_${e.generateID()}`,e.addLine(`let ${b} = ${t};`))}let t=i.map(function([t,n]){const o=t.match(/\.capture/);t=o?t.replace(/\.capture/,""):t;const{event:r,handler:i}=re(e,t,n,!1,de);return o?`vn.elm.addEventListener('${r}', ${i}, true);`:`vn.elm.addEventListener('${r}', ${i});`}).join("");const n=$||!!w&&`'${w}'`;_=`utils.assignHooks(vnode.data, {create(_, vn){${n?`vn.elm.style = ${n};`:""}${t}}});`}e.addLine(`let w${c} = ${u} in parent.__owl__.cmap ? parent.__owl__.children[parent.__owl__.cmap[${u}]] : false;`);let y=!e.parentNode;if(y){let t=e.generateID();e.rootContext.rootNode=t,y=!0,e.rootContext.shouldDefineResult=!0,e.addLine(`let vn${t} = {};`),e.addLine(`result = vn${t};`)}if(r){const t=e.formatExpression(n.getAttribute("t-props"));e.addLine(`let props${c} = Object.assign({${d}}, ${t});`)}else e.addLine(`let props${c} = {${d}};`);e.addIf(`w${c} && w${c}.__owl__.currentFiber && !w${c}.__owl__.vnode`),e.addLine(`w${c}.destroy();`),e.addLine(`w${c} = false;`),e.closeIf();let x="";y&&(x=`utils.defineProxy(vn${e.rootNode}, pvnode);`);const N=n.childNodes.length;let C=N?"Object.assign(Object.create(context), scope)":"undefined";e.addIf(`w${c}`);let L="";$&&(L=`.then(()=>{if (w${c}.__owl__.isDestroyed) {return};w${c}.el.style=${$};});`),e.addLine(`w${c}.__updateProps(props${c}, extra.fiber, ${C})${L};`),e.addLine(`let pvnode = w${c}.__owl__.pvnode;`),x&&e.addLine(x),e.parentNode&&e.addLine(`c${e.parentNode}.push(pvnode);`),e.addElse();let E="";t.match(O)||(E=`|| ${e.formatExpression(t)}`);const D=e.interpolate(t);if(e.addLine(`let componentKey${c} = ${D};`),e.addLine(`let W${c} = context.constructor.components[componentKey${c}] || QWeb.components[componentKey${c}]${E};`),e.addLine(`if (!W${c}) {throw new Error('Cannot find the definition of component "' + componentKey${c} + '"')}`),e.addLine(`w${c} = new W${c}(parent, props${c});`),s&&(e.addLine(`const __patch${c} = w${c}.__patch;`),e.addLine(`w${c}.__patch = (t, vn) => {__patch${c}.call(w${c}, t, vn); if(!w${c}.__owl__.transitionInserted){w${c}.__owl__.transitionInserted = true;utils.transitionInsert(w${c}.__owl__.vnode, '${s}');}};`)),e.addLine(`parent.__owl__.cmap[${u}] = w${c}.__owl__.id;`),N){const t=n.cloneNode(!0),r=Array.from(t.querySelectorAll("[t-set-slot]"));for(let e of t.children)e.getAttribute("t-set")&&e.hasChildNodes()&&r.push(e);const i=J.nextSlotId++;if(e.addLine(`w${c}.__owl__.slotId = ${i};`),r.length)for(let t=0,n=r.length;t<n;t++){const n=r[t];n.parentElement.removeChild(n);let s=n.getAttribute("t-set-slot");n.removeAttribute("t-set-slot"),s||(s=n.getAttribute("t-set"),n.removeAttribute("t-set"));const a=o._compile(`slot_${s}_template`,n,e);J.slots[`${i}_${s}`]=a}if(t.childNodes.length){const n=t.ownerDocument.createElement("t");for(let e of Object.values(t.childNodes))n.appendChild(e);const r=o._compile("slot_default_template",n,e);J.slots[`${i}_default`]=r}}e.addLine(`let fiber = w${c}.__prepare(extra.fiber, ${C}, () => { const vnode = fiber.vnode; pvnode.sel = vnode.sel; ${_}});`);const T=p?`insert(vn) {${p}},`:"";return e.addLine(`let pvnode = h('dummy', {key: ${u}, hook: {${T}remove() {},destroy(vn) {${m}}}});`),x&&e.addLine(x),e.parentNode&&e.addLine(`c${e.parentNode}.push(pvnode);`),e.addLine(`w${c}.__owl__.pvnode = pvnode;`),e.closeIf(),b&&e.addLine(`w${c}.__owl__.classObj=${b};`),e.addLine(`w${c}.__owl__.parentLastFiberId = extra.fiber.id;`),!0}});const ce=new class{constructor(e){this.tasks=[],this.isRunning=!1,this.requestAnimationFrame=e}start(){this.isRunning=!0,this.scheduleTasks()}stop(){this.isRunning=!1}addFiber(e){return e=e.root,new Promise((t,n)=>{if(e.error)return n(e.error);this.tasks.push({fiber:e,callback:()=>{if(e.error)return n(e.error);t()}}),this.isRunning||this.start()})}rejectFiber(e,t){e=e.root;const n=this.tasks.findIndex(t=>t.fiber===e);if(n>=0){const[o]=this.tasks.splice(n,1);e.cancel(),e.error=new Error(t),o.callback()}}flush(){let e=this.tasks;this.tasks=[],e=e.filter(e=>{if(e.fiber.isCompleted)return e.callback(),!1;if(0===e.fiber.counter){if(!e.fiber.error)try{e.fiber.complete()}catch(t){e.fiber.handleError(t)}return e.callback(),!1}return!0}),this.tasks=e.concat(this.tasks),0===this.tasks.length&&this.stop()}scheduleTasks(){this.requestAnimationFrame(()=>{this.flush(),this.isRunning&&this.scheduleTasks()})}}(F.requestAnimationFrame);let ue=(()=>{class e{constructor(t,n,o,r,i){this.id=e.nextId++,this.isCompleted=!1,this.shouldPatch=!0,this.isRendered=!1,this.counter=0,this.vnode=null,this.child=null,this.sibling=null,this.lastChild=null,this.parent=null,this.component=n,this.force=o,this.target=r,this.position=i;const s=n.__owl__;this.scope=s.scope,this.root=t?t.root:this,this.parent=t;let a=s.currentFiber;if(a&&!a.isCompleted){if(a.root===a&&!t)return this._reuseFiber(a),a;this._remapFiber(a)}this.root.counter++,s.currentFiber=this}_reuseFiber(t){t.cancel(),t.isCompleted=!1,t.isRendered=!1,t.child&&(t.child.parent=null,t.child=null,t.lastChild=null),t.counter=1,t.id=e.nextId++}_remapFiber(e){if(e.cancel(),this.shouldPatch=e.shouldPatch,e===e.root&&e.counter++,e.parent&&!this.parent)if(this.parent=e.parent,this.root=this.parent.root,this.sibling=e.sibling,this.parent.lastChild===e&&(this.parent.lastChild=this),this.parent.child===e)this.parent.child=this;else{let t=this.parent.child;for(;;){if(t.sibling===e){t.sibling=this;break}t=t.sibling}}}_walk(e){let t=this,n=this;for(;;){const o=e(n);if(o)n=o;else{if(n===t)return;for(;!n.sibling;){if(!n.parent||n.parent===t)return;n=n.parent}n=n.sibling}}}complete(){let e=this.component;if(this.isCompleted=!0,!this.target&&!e.__owl__.isMounted)return;const t=[];this._walk(function(e){return t.push(e),e.child});const n=t.length;for(let o=0;o<n;o++){const n=t[o];n.shouldPatch&&((e=n.component).__owl__.willPatchCB&&e.__owl__.willPatchCB(),e.willPatch())}for(let o=n-1;o>=0;o--){const n=t[o];if(e=n.component,n.target&&0===o){let t;if("self"===n.position){if((t=n.target).tagName.toLowerCase()!==n.vnode.sel)throw new Error(`Cannot attach '${e.constructor.name}' to target node (not same tag name)`);const o=n.vnode.data?{key:n.vnode.data.key}:{},r=D(n.vnode.sel,o);r.elm=t,t=r}else t=e.__owl__.vnode||document.createElement(n.vnode.sel);e.__patch(t,n.vnode)}else n.shouldPatch?e.__patch(e.__owl__.vnode,n.vnode):(e.__patch(document.createElement(n.vnode.sel),n.vnode),e.__owl__.pvnode.elm=e.__owl__.vnode.elm);e.__owl__.currentFiber=null}let o=!1;if(this.target){switch(this.position){case"first-child":this.target.prepend(this.component.el);break;case"last-child":this.target.appendChild(this.component.el)}o=document.body.contains(this.component.el),this.component.env.qweb.trigger("dom-appended")}for(let r=n-1;r>=0;r--){const n=t[r];e=n.component,n.shouldPatch&&!this.target?(e.patched(),e.__owl__.patchedCB&&e.__owl__.patchedCB()):this.target&&!o||e.__callMounted()}}cancel(){this._walk(e=>(e.isRendered||e.root.counter--,e.isCompleted=!0,e.child))}handleError(e){let t=this.component;this.vnode=t.__owl__.vnode||D("div");const n=t.env.qweb;let o=t,r=!1;for(;t&&!(r=!!t.catchError);)o=t,t=t.__owl__.parent;n.trigger("error",e),r?t.catchError(e):(this.root.counter=0,this.root.error=e,ce.flush(),o.destroy())}}return e.nextId=1,e})();function he(e,t){if(!0===t)return!0;if("function"==typeof t)return"object"==typeof e?e instanceof t:typeof e===t.name.toLowerCase();if(t instanceof Array){let n=!1;for(let o=0,r=t.length;o<r;o++)n=n||he(e,t[o]);return n}if(t.optional&&void 0===e)return!0;let n=!t.type||he(e,t.type);if(t.validate&&(n=n&&t.validate(e)),t.type===Array&&t.element)for(let o=0,r=e.length;o<r;o++)n=n&&he(e[o],t.element);if(t.type===Object&&t.shape){const o=t.shape;for(let t in o)n=n&&he(e[t],o[t]);if(n)for(let t in e)if(!(t in o))throw new Error(`unknown prop '${t}'`)}return n}J.utils.validateProps=function(e,t){const n=e.props;if(n instanceof Array){for(let o=0,r=n.length;o<r;o++){const r=n[o];if("?"===r[r.length-1])break;if(!(r in t))throw new Error(`Missing props '${n[o]}' (component '${e.name}')`)}for(let o in t)if(!n.includes(o)&&!n.includes(o+"?"))throw new Error(`Unknown prop '${o}' given to component '${e.name}'`)}else if(n){for(let o in n){if(void 0===t[o]){if(n[o]&&!n[o].optional)throw new Error(`Missing props '${o}' (component '${e.name}')`);break}let r;try{r=he(t[o],n[o])}catch(t){throw t.message=`Invalid prop '${o}' in component ${e.name} (${t.message})`,t}if(!r)throw new Error(`Invalid Prop '${o}' in component '${e.name}'`)}for(let o in t)if(!(o in n))throw new Error(`Unknown prop '${o}' given to component '${e.name}'`)}};const pe={};function fe(e){const t=e.split(/(\{|\}|;)/).map(e=>e.trim()),n=[],o=[];let r=[];function i(){r.length&&(o.push(function e(t,o){const r=[];for(const i of n[t]){let s=o&&o+" "+i||i;s.includes("&")&&(s=i.replace(/&/g,o||"")),t<n.length-1&&(s=e(t+1,s)),r.push(s)}return r.join(", ")}(0)+" {"),o.push(...r),o.push("}"),r=[])}for(;t.length;){let e=t.shift();"}"===e?(i(),n.pop()):("{"===t[0]&&(i(),n.push(e.split(/\s*,\s*/)),t.shift()),";"===t[0]&&r.push("  "+e+";"))}return o.join("\n")}function me(e,t){const n=pe[e];if(!n)throw new Error(`Invalid css stylesheet for component '${t}'. Did you forget to use the 'css' tag helper?`);n.setAttribute("component",t),document.head.appendChild(n)}const _e=Symbol("portal");let ve=1,ge=(()=>{class e{constructor(t,n){e.current=this;let o=this.constructor;const r=o.defaultProps;r&&(n=n||{},this.__applyDefaultProps(n,r)),this.props=n,J.dev&&J.utils.validateProps(o,this.props);const i=ve++;let s;if(t){this.env=t.env;const e=t.__owl__;e.children[i]=this,s=e.depth+1}else this.env=this.constructor.env,this.env.qweb||(this.env.qweb=new J),this.env.browser||(this.env.browser=F),this.env.qweb.on("update",this,()=>{this.__owl__.isMounted&&this.render(!0),this.__owl__.isDestroyed&&this.env.qweb.off("update",this)}),s=0;const a=this.env.qweb,l=o.template||this.__getTemplate(a);this.__owl__={id:i,depth:s,vnode:null,pvnode:null,isMounted:!1,isDestroyed:!1,parent:t||null,children:{},cmap:{},currentFiber:null,parentLastFiberId:0,boundHandlers:{},mountedCB:null,willUnmountCB:null,willPatchCB:null,patchedCB:null,willStartCB:null,willUpdatePropsCB:null,observer:null,renderFn:a.render.bind(a,l),classObj:null,refs:null,scope:null},o.style&&this.__applyStyles(o)}get el(){return this.__owl__.vnode?this.__owl__.vnode.elm:null}async willStart(){}mounted(){}async willUpdateProps(e){}willPatch(){}patched(){}willUnmount(){}async mount(e,t={}){const n=t.position||"last-child",o=this.__owl__;if(o.isMounted){if("self"===n||this.el.parentNode===e)return Promise.resolve();this.unmount()}if(o.isDestroyed)throw new Error("Cannot mount a destroyed component");if(o.currentFiber){const t=o.currentFiber;if(t.target===e&&t.position===n)return ce.addFiber(t);ce.rejectFiber(t,"Mounting operation cancelled")}if(!(e instanceof HTMLElement||e instanceof DocumentFragment)){let e=`Component '${this.constructor.name}' cannot be mounted: the target is not a valid DOM node.`;throw new Error(e+="\nMaybe the DOM is not ready yet? (in that case, you can use owl.utils.whenReady)")}const r=new ue(null,this,!1,e,n);return r.shouldPatch=!1,o.vnode?this.__render(r):this.__prepareAndRender(r,()=>{}),ce.addFiber(r)}unmount(){this.__owl__.isMounted&&(this.__callWillUnmount(),this.el.remove())}async render(e=!1){const t=this.__owl__,n=t.currentFiber;if(!t.isMounted&&!n)return;if(n&&!n.isRendered&&!n.isCompleted)return ce.addFiber(n.root);const o=t.isMounted,r=new ue(null,this,e,null,null);return Promise.resolve().then(()=>{if(t.isMounted||!o){if(r.isCompleted)return;this.__render(r)}else r.isCompleted=!0,t.currentFiber=null}),ce.addFiber(r)}destroy(){const e=this.__owl__;if(!e.isDestroyed){const t=this.el;this.__destroy(e.parent),t&&t.remove()}}shouldUpdate(e){return!0}trigger(e,t){this.__trigger(this,e,t)}__destroy(e){const t=this.__owl__;t.isMounted&&(t.willUnmountCB&&t.willUnmountCB(),this.willUnmount(),t.isMounted=!1);const n=t.children;for(let e in n)n[e].__destroy(this);if(e){let n=t.id;delete e.__owl__.children[n],t.parent=null}t.isDestroyed=!0,delete t.vnode,t.currentFiber&&(t.currentFiber.isCompleted=!0)}__callMounted(){const e=this.__owl__;e.isMounted=!0,e.currentFiber=null,this.mounted(),e.mountedCB&&e.mountedCB()}__callWillUnmount(){const e=this.__owl__;e.willUnmountCB&&e.willUnmountCB(),this.willUnmount(),e.isMounted=!1,this.__owl__.currentFiber&&(this.__owl__.currentFiber.isCompleted=!0,this.__owl__.currentFiber.root.counter=0);const t=e.children;for(let e in t){const n=t[e];n.__owl__.isMounted&&n.__callWillUnmount()}}__trigger(e,t,n){if(this.el){const o=new le(e,t,{bubbles:!0,cancelable:!0,detail:n}),r=this.env[_e];r&&r(o),this.el.dispatchEvent(o)}}async __updateProps(e,t,n){if(this.__owl__.scope=n,t.force||this.shouldUpdate(e)){const n=this.__owl__,o=new ue(t,this,t.force,null,null);t.child?t.lastChild.sibling=o:t.child=o,t.lastChild=o;const r=this.constructor.defaultProps;if(r&&this.__applyDefaultProps(e,r),J.dev&&J.utils.validateProps(this.constructor,e),await Promise.all([this.willUpdateProps(e),n.willUpdatePropsCB&&n.willUpdatePropsCB(e)]),o.isCompleted)return;this.props=e,this.__render(o)}}__patch(e,t){this.__owl__.vnode=T(e,t)}__prepare(e,t,n){this.__owl__.scope=t;const o=new ue(e,this,e.force,null,null);return o.shouldPatch=!1,e.child?e.lastChild.sibling=o:e.child=o,e.lastChild=o,this.__prepareAndRender(o,n),o}__applyStyles(e){for(;e&&e.style;)e.hasOwnProperty("style")&&(me(e.style,e.name),delete e.style),e=e.__proto__}__getTemplate(t){let n=this.constructor;if(!n.hasOwnProperty("_template")){let o=n.name;for(;!(o in t.templates)&&n!==e;)o=(n=n.__proto__).name;if(n===e)throw new Error(`Could not find template for component "${this.constructor.name}"`);n._template=o}return n._template}async __prepareAndRender(e,t){try{await Promise.all([this.willStart(),this.__owl__.willStartCB&&this.__owl__.willStartCB()])}catch(t){return e.handleError(t),Promise.resolve()}if(this.__owl__.isDestroyed)return Promise.resolve();e.isCompleted||(this.__render(e),t())}__render(e){const t=this.__owl__;let n;t.observer&&(t.observer.allowMutations=!1);try{let o=t.renderFn(this,{handlers:t.boundHandlers,fiber:e});for(let n in t.children){let o=t.children[n];!o.__owl__.isMounted&&o.__owl__.parentLastFiberId<e.id&&o.destroy()}if(!o)throw new Error(`Rendering '${this.constructor.name}' did not return anything`);if(e.vnode=o,t.classObj){const e=o.data;e.class=Object.assign(e.class||{},t.classObj)}}catch(e){n=e}t.observer&&(t.observer.allowMutations=!0),e.root.counter--,e.isRendered=!0,n&&e.handleError(n)}__remount(){const e=this.__owl__;e.isMounted||(e.isMounted=!0,this.mounted())}__applyDefaultProps(e,t){for(let n in t)void 0===e[n]&&(e[n]=t[n])}}return e.template=null,e._template=null,e.current=null,e.components={},e.env={},e.scheduler=ce,e})();class we extends t{constructor(e={}){super(),this.rev=1,this.mapping={},this.observer=new n,this.observer.notifyCB=(()=>{let e=this.rev;return Promise.resolve().then(()=>{e===this.rev&&this.__notifyComponents()})}),this.state=this.observer.observe(e),this.subscriptions.update=[]}async __notifyComponents(){const e=++this.rev,t=function(e,t){let n,o=!1;return e.reduce((e,r)=>{let i=t(r);return o&&(i===n?o.push(r):o=!1),o||(o=[r],e.push(o)),n=i,e},[])}(this.subscriptions.update,e=>e.owner?e.owner.__owl__.depth:-1);for(let n of t){const t=n.map(t=>t.callback.call(t.owner,e));ce.flush(),await Promise.all(t)}}}function $e(e,t,o){const r=t.__owl__,i=r.id,s=e.mapping;if(i in s)return e.state;r.observer||(r.observer=new n,r.observer.notifyCB=t.render.bind(t));const a=r.observer.notifyCB;r.observer.notifyCB=function(){e.rev>s[i]||a()},s[i]=0;const l=r.renderFn;r.renderFn=function(t,n){return s[i]=e.rev,l(t,n)},e.on("update",t,async e=>{s[i]<e&&(s[i]=e,await o())});const d=t.__destroy;return t.__destroy=(n=>{e.off("update",t),delete s[i],d.call(t,n)}),e.state}function be(e){const t=ge.current,o=t.__owl__;return o.observer||(o.observer=new n,o.observer.notifyCB=t.render.bind(t)),o.observer.observe(e)}function ye(e,t=!1){return t?function(t){const n=ge.current;if(n.__owl__[e]){const o=n.__owl__[e];n.__owl__[e]=function(){o.call(n),t.call(n)}}else n.__owl__[e]=t}:function(t){const n=ge.current;if(n.__owl__[e]){const o=n.__owl__[e];n.__owl__[e]=function(){t.call(n),o.call(n)}}else n.__owl__[e]=t}}function xe(e){return function(t){const n=ge.current;if(n.__owl__[e]){const o=n.__owl__[e];n.__owl__[e]=function(...e){return Promise.all([o.call(n,...e),t.call(n,...e)])}}else n.__owl__[e]=t}}const Ne=ye("mountedCB",!0),Ce=ye("willUnmountCB"),Le=ye("willPatchCB"),Ee=ye("patchedCB",!0),De=xe("willStartCB"),Te=xe("willUpdatePropsCB");function Ae(e){const t=ge.current;t.env=Object.assign(Object.create(t.env),e)}var Pe=Object.freeze({__proto__:null,useState:be,onMounted:Ne,onWillUnmount:Ce,onWillPatch:Le,onPatched:Ee,onWillStart:De,onWillUpdateProps:Te,useRef:function(e){const t=ge.current.__owl__;return{get el(){const n=t.refs&&t.refs[e];return n instanceof HTMLElement?n:n instanceof ge?n.el:null},get comp(){const n=t.refs&&t.refs[e];return n instanceof ge?n:null}}},useSubEnv:Ae,useExternalListener:function(e,t,n,o){const r=n.bind(ge.current);Ne(()=>e.addEventListener(t,r,o)),Ce(()=>e.removeEventListener(t,r,o))}});class ke extends we{constructor(e){if(super(e.state),this.actions=e.actions,this.env=e.env,this.getters={},this.updateFunctions=[],e.getters){const t={state:this.state,getters:this.getters};for(let n in e.getters)this.getters[n]=e.getters[n].bind(this,t)}}dispatch(e,...t){if(!this.actions[e])throw new Error(`[Error] action ${e} is undefined`);return this.actions[e]({dispatch:this.dispatch.bind(this),env:this.env,state:this.state,getters:this.getters},...t)}}const Ie=(e,t)=>e===t;function Se(e,...t){const n=`__template__${J.nextId++}`,o=String.raw(e,...t);return J.registerTemplate(n,o),n}var Re=Object.freeze({__proto__:null,xml:Se,css:function(e,...t){const n=`__sheet__${J.nextId++}`;return function(e,t){const n=document.createElement("style");n.innerHTML=fe(t),pe[e]=n}(n,String.raw(e,...t)),n}});let Oe=(()=>{class e extends ge{async __updateProps(e,t){this.render(t.force)}}return e.template=Se`<t t-slot="default"/>`,e})(),Me=(()=>{class e extends ge{constructor(e,t){super(e,t),this.doTargetLookUp=!0,this._handledEvents=new Set,this._handlerTunnel=(e=>{e.stopPropagation(),this.__trigger(e.originalComponent,e.type,e.detail)}),this.parentEnv=null,this.portal=null,this.target=null,this.parentEnv=e?e.env:{},Ae({[_e]:e=>{this._handledEvents.has(e.type)||(this.portal.elm.addEventListener(e.type,this._handlerTunnel),this._handledEvents.add(e.type))}})}__callWillUnmount(){super.__callWillUnmount(),this.el.appendChild(this.portal.elm),this.doTargetLookUp=!0}__checkVNodeStructure(e){const t=e.children;let n=0;for(let e of t)e.sel&&n++;if(1!==n)throw new Error(`Portal must have exactly one non-text child (has ${n})`)}__checkTargetPresence(){if(!this.target||!document.contains(this.target))throw new Error(`Could not find any match for "${this.props.target}"`)}__deployPortal(){this.__checkTargetPresence(),this.target.appendChild(this.portal.elm)}__destroy(e){if(this.portal&&this.portal.elm){const e=this.portal.elm,t=e.parentNode;t&&t.removeChild(e)}super.__destroy(e)}__patch(e,t){if(this.doTargetLookUp){const e=document.querySelector(this.props.target);e?(this.doTargetLookUp=!1,this.target=e):this.env.qweb.on("dom-appended",this,()=>{this.doTargetLookUp=!1,this.env.qweb.off("dom-appended",this),this.target=document.querySelector(this.props.target),this.__deployPortal()})}this.__checkVNodeStructure(t);const n=(!this.portal||this.el.contains(this.portal.elm))&&!this.doTargetLookUp;this.doTargetLookUp||n||this.__checkTargetPresence();const o=this.portal?this.portal:document.createElement(t.children[0].sel);this.portal=T(o,t.children[0]),t.children=[],super.__patch(e,t),n&&this.__deployPortal()}__trigger(e,t,n){const o=this.env;this.env=this.parentEnv,super.__trigger(e,t,n),this.env=o}}return e.template=Se`<portal><t t-slot="default"/></portal>`,e.props={target:{type:String}},e})(),Fe=(()=>{class e extends ge{constructor(){super(...arguments),this.href=this.env.router.destToPath(this.props)}async willUpdateProps(e){this.href=this.env.router.destToPath(e)}get isActive(){return"hash"===this.env.router.mode?document.location.hash===this.href:document.location.pathname===this.href}navigate(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||void 0!==e.button&&0!==e.button)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}e.preventDefault(),this.env.router.navigate(this.props)}}}return e.template=Se`
    <a  t-att-class="{'router-link-active': isActive }"
        t-att-href="href"
        t-on-click="navigate">
        <t t-slot="default"/>
    </a>
  `,e})(),je=(()=>{class e extends ge{get routeComponent(){return this.env.router.currentRoute&&this.env.router.currentRoute.component}}return e.template=Se`
    <t>
        <t
            t-if="routeComponent"
            t-component="routeComponent"
            t-key="env.router.currentRouteName"
            t-props="env.router.currentParams" />
    </t>
  `,e})();const Ue=/\{\{(.*?)\}\}/;function Be(e){const t=/\{\{(.*?)\}\}/g,n=[];let o;do{(o=t.exec(e))&&n.push(o[1].split(".")[0])}while(o);return n}const qe=we,We=be,Ve={EventBus:t,Observer:n},ze={Router:class{constructor(e,t,n={mode:"history"}){this.currentRoute=null,this.currentParams=null,e.router=this,this.mode=n.mode,this.env=e,this.routes={},this.routeIds=[];let o=1;for(let e of t)e.name||(e.name="__route__"+o++),e.component&&J.registerComponent("__component__"+e.name,e.component),e.redirect&&this.validateDestination(e.redirect),e.params=e.path?Be(e.path):[],this.routes[e.name]=e,this.routeIds.push(e.name)}async start(){this._listener=(e=>this._navigate(this.currentPath(),e)),window.addEventListener("popstate",this._listener),"hash"===this.mode&&window.addEventListener("hashchange",this._listener);const e=await this.matchAndApplyRules(this.currentPath());if("match"===e.type){this.currentRoute=e.route,this.currentParams=e.params;const t=this.routeToPath(e.route,e.params);t!==this.currentPath()&&this.setUrlFromPath(t)}}async navigate(e){const t=this.destToPath(e);return this._navigate(t)}async _navigate(e,t){const n=this.currentRouteName,o=this.currentParams,r=await this.matchAndApplyRules(e);if("match"===r.type){const e=this.routeToPath(r.route,r.params);t&&t instanceof PopStateEvent||this.setUrlFromPath(e),this.currentRoute=r.route,this.currentParams=r.params}else"nomatch"===r.type&&(this.currentRoute=null,this.currentParams=null);return!(this.currentRouteName===n&&B(this.currentParams,o)||(this.env.qweb.forceUpdate(),0))}destToPath(e){return this.validateDestination(e),e.path||this.routeToPath(this.routes[e.to],e.params)}get currentRouteName(){return this.currentRoute&&this.currentRoute.name}setUrlFromPath(e){const t="hash"===this.mode?location.pathname:"",n=location.origin+t+e;n!==window.location.href&&window.history.pushState({},e,n)}validateDestination(e){if(!e.path&&!e.to||e.path&&e.to)throw new Error(`Invalid destination: ${JSON.stringify(e)}`)}routeToPath(e,t){const n=e.path.split("/"),o=n.length;for(let e=0;e<o;e++){const o=n[e].match(Ue);if(o){const r=o[1].split(".")[0];n[e]=t[r]}}return("hash"===this.mode?"#":"")+n.join("/")}currentPath(){return("history"===this.mode?window.location.pathname:window.location.hash.slice(1))||"/"}match(e){for(let t of this.routeIds){let n=this.routes[t],o=this.getRouteParams(n,e);if(o)return{type:"match",route:n,params:o}}return{type:"nomatch"}}async matchAndApplyRules(e){const t=this.match(e);return"match"===t.type?this.applyRules(t):t}async applyRules(e){const t=e.route;if(t.redirect){const e=this.destToPath(t.redirect);return this.matchAndApplyRules(e)}if(t.beforeRouteEnter){const e=await t.beforeRouteEnter({env:this.env,from:this.currentRoute,to:t});if(!1===e)return{type:"cancelled"};if(!0!==e){const t=this.destToPath(e);return this.matchAndApplyRules(t)}}return e}getRouteParams(e,t){if("*"===e.path)return{};t.startsWith("#")&&(t=t.slice(1));const n=e.path.split("/"),o=t.split("/"),r=n.length;if(r!==o.length)return!1;const i={};for(let e=0;e<r;e++){const t=n[e];let r=o[e];const s=t.match(Ue);if(s){const[e,t]=s[1].split(".");"number"===t&&(r=parseInt(r,10)),i[e]=r}else if(t!==r)return!1}return i}},RouteComponent:je,Link:Fe},Ke=ke,He=q,Qe=Re,Ge={AsyncRoot:Oe,Portal:Me},Ze=Object.assign({},Pe,{useContext:function(e){const t=ge.current;return $e(e,t,t.render.bind(t))},useDispatch:function(e){return(e=e||ge.current.env.store).dispatch.bind(e)},useGetters:function(e){return(e=e||ge.current.env.store).getters},useStore:function(e,t={}){const n=ge.current,o=n.__owl__.id,r=t.store||n.env.store;if(!(r instanceof ke))throw new Error(`No store found when connecting '${n.constructor.name}'`);let i=e(r.state,n.props);const s=r.observer.revNumber.bind(r.observer);let a=s(i);const l=t.isEqual||Ie;function d(n,o){const r=i;i=e(n,o);const d=s(i);return(d>0&&a!==d||!l(r,i))&&(a=d,t.onUpdate&&t.onUpdate(i),!0)}r.updateFunctions[o]||(r.updateFunctions[o]=[]),r.updateFunctions[o].push(function(){return d(r.state,n.props)}),$e(r,n,function(){let e=!1;for(let t of r.updateFunctions[o])e=t()||e;if(e)return n.render()}),Te(e=>{d(r.state,e)});const c=n.__destroy;return n.__destroy=(e=>{delete r.updateFunctions[o],c.call(n,e)}),"object"!=typeof i||null===i?i:new Proxy(i,{get:(e,t)=>i[t],set(e,t,n){throw new Error("Store state should only be modified through actions")},has:(e,t)=>t in i})}});e.Component=ge,e.Context=qe,e.QWeb=J,e.Store=Ke,e.__info__={},e.config=ae,e.core=Ve,e.hooks=Ze,e.misc=Ge,e.router=ze,e.tags=Qe,e.useState=We,e.utils=He,e.__info__.version="1.0.9",e.__info__.date="2020-06-02T08:38:38.182Z",e.__info__.hash="c5a2f52",e.__info__.url="https://github.com/odoo/owl"}(this.owl=this.owl||{});