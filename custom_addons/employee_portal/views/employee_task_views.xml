<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Task templates -->
        <record id="view_employee_task_template_tree" model="ir.ui.view">
            <field name="name">employee.task.template.tree</field>
            <field name="model">employee.task.template</field>
            <field name="arch" type="xml">
                <list>
                    <field name="name"/>
                    <field name="frequency"/>
                    <field name="weekday"/>
                    <field name="month_day"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                    <field name="active"/>
                </list>
            </field>
        </record>

        <record id="view_employee_task_template_form" model="ir.ui.view">
            <field name="name">employee.task.template.form</field>
            <field name="model">employee.task.template</field>
            <field name="arch" type="xml">
                <form string="Task Template">
                    <sheet>
                        <group>
                            <field name="name"/>
                            <field name="description"/>
                            <field name="frequency"/>
                            <field name="weekday"/>
                            <field name="month_day"/>
                            <field name="employee_ids" widget="many2many_tags"/>
                            <field name="company_id" groups="base.group_multi_company"/>
                            <field name="active"/>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Tasks -->
        <record id="view_employee_task_kanban" model="ir.ui.view">
            <field name="name">employee.task.kanban</field>
            <field name="model">employee.task</field>
            <field name="arch" type="xml">
                <kanban default_group_by="status">
                    <field name="name"/>
                    <field name="date"/>
                    <field name="employee_id"/>
                    <field name="status"/>
                    <field name="company_id"/>
                    <templates>
                        <t t-name="kanban-box">
                            <div class="oe_kanban_global_click o_kanban_record">
                                <div class="fw-bold" t-esc="record.name.value"/>
                                <div class="small text-muted" t-esc="record.date.value"/>
                                <div class="small" t-esc="record.employee_id.value"/>
                                <div class="small" t-esc="record.status.value"/>
                            </div>
                        </t>
                    </templates>
                </kanban>
            </field>
        </record>

        <record id="view_employee_task_tree" model="ir.ui.view">
            <field name="name">employee.task.tree</field>
            <field name="model">employee.task</field>
            <field name="arch" type="xml">
                <list>
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="date"/>
                    <field name="deadline"/>
                    <field name="status"/>
                    <field name="template_id"/>
                    <field name="company_id" groups="base.group_multi_company"/>
                </list>
            </field>
        </record>

        <record id="view_employee_task_form" model="ir.ui.view">
            <field name="name">employee.task.form</field>
            <field name="model">employee.task</field>
            <field name="arch" type="xml">
                <form string="Task">
                    <sheet>
                        <group>
                            <field name="name"/>
                            <field name="employee_id"/>
                            <field name="date"/>
                            <field name="deadline"/>
                            <field name="status"/>
                            <field name="template_id"/>
                            <field name="board_post_id"/>
                            <field name="note"/>
                        </group>
                        <footer>
                            <button name="action_mark_done" type="object" string="Mark Done" class="btn-primary" modifiers="{&quot;invisible&quot;: [[&quot;status&quot;, &quot;=&quot;, &quot;done&quot;]]}"/>
                        </footer>
                    </sheet>
                </form>
            </field>
        </record>

        <!-- Search views -->
        <record id="view_employee_task_template_search" model="ir.ui.view">
            <field name="name">employee.task.template.search</field>
            <field name="model">employee.task.template</field>
            <field name="arch" type="xml">
                <search string="Task Templates">
                    <field name="name"/>
                    <field name="frequency"/>
                </search>
            </field>
        </record>

        <record id="view_employee_task_search" model="ir.ui.view">
            <field name="name">employee.task.search</field>
            <field name="model">employee.task</field>
            <field name="arch" type="xml">
                <search string="Tasks">
                    <field name="name"/>
                    <field name="employee_id"/>
                    <field name="status"/>
                </search>
            </field>
        </record>

        <!-- Actions -->
        <record id="action_employee_task_template" model="ir.actions.act_window">
            <field name="name">Task Templates</field>
            <field name="res_model">employee.task.template</field>
            <field name="view_mode">list,form</field>
            <field name="search_view_id" ref="employee_portal.view_employee_task_template_search"/>
        </record>

        <record id="action_employee_task_all" model="ir.actions.act_window">
            <field name="name">All Tasks</field>
            <field name="res_model">employee.task</field>
            <field name="view_mode">kanban,list,form</field>
            <field name="search_view_id" ref="employee_portal.view_employee_task_search"/>
        </record>

        <record id="action_employee_task_mine" model="ir.actions.act_window">
            <field name="name">My Tasks</field>
            <field name="res_model">employee.task</field>
            <field name="view_mode">kanban,list,form</field>
            <field name="domain">[("employee_id.user_id", "=", uid)]</field>
            <field name="search_view_id" ref="employee_portal.view_employee_task_search"/>
        </record>
    </data>
</odoo>
